(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var bp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vg={exports:{}},Bu={},_g={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sa=Symbol.for("react.element"),g0=Symbol.for("react.portal"),y0=Symbol.for("react.fragment"),v0=Symbol.for("react.strict_mode"),_0=Symbol.for("react.profiler"),w0=Symbol.for("react.provider"),x0=Symbol.for("react.context"),k0=Symbol.for("react.forward_ref"),S0=Symbol.for("react.suspense"),T0=Symbol.for("react.memo"),C0=Symbol.for("react.lazy"),Ep=Symbol.iterator;function b0(t){return t===null||typeof t!="object"?null:(t=Ep&&t[Ep]||t["@@iterator"],typeof t=="function"?t:null)}var wg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xg=Object.assign,kg={};function so(t,e,n){this.props=t,this.context=e,this.refs=kg,this.updater=n||wg}so.prototype.isReactComponent={};so.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};so.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Sg(){}Sg.prototype=so.prototype;function Cd(t,e,n){this.props=t,this.context=e,this.refs=kg,this.updater=n||wg}var bd=Cd.prototype=new Sg;bd.constructor=Cd;xg(bd,so.prototype);bd.isPureReactComponent=!0;var Ap=Array.isArray,Tg=Object.prototype.hasOwnProperty,Ed={current:null},Cg={key:!0,ref:!0,__self:!0,__source:!0};function bg(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Tg.call(e,r)&&!Cg.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Sa,type:t,key:i,ref:a,props:s,_owner:Ed.current}}function E0(t,e){return{$$typeof:Sa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ad(t){return typeof t=="object"&&t!==null&&t.$$typeof===Sa}function A0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Np=/\/+/g;function qc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?A0(""+t.key):e.toString(36)}function Pl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Sa:case g0:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+qc(a,0):r,Ap(s)?(n="",t!=null&&(n=t.replace(Np,"$&/")+"/"),Pl(s,e,n,"",function(h){return h})):s!=null&&(Ad(s)&&(s=E0(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Np,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Ap(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+qc(i,l);a+=Pl(i,e,n,c,s)}else if(c=b0(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+qc(i,l++),a+=Pl(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function ul(t,e,n){if(t==null)return t;var r=[],s=0;return Pl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function N0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rn={current:null},Ml={transition:null},O0={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:Ml,ReactCurrentOwner:Ed};function Eg(){throw Error("act(...) is not supported in production builds of React.")}Le.Children={map:ul,forEach:function(t,e,n){ul(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ul(t,function(){e++}),e},toArray:function(t){return ul(t,function(e){return e})||[]},only:function(t){if(!Ad(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Le.Component=so;Le.Fragment=y0;Le.Profiler=_0;Le.PureComponent=Cd;Le.StrictMode=v0;Le.Suspense=S0;Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O0;Le.act=Eg;Le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=xg({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Ed.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Tg.call(e,c)&&!Cg.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Sa,type:t.type,key:s,ref:i,props:r,_owner:a}};Le.createContext=function(t){return t={$$typeof:x0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:w0,_context:t},t.Consumer=t};Le.createElement=bg;Le.createFactory=function(t){var e=bg.bind(null,t);return e.type=t,e};Le.createRef=function(){return{current:null}};Le.forwardRef=function(t){return{$$typeof:k0,render:t}};Le.isValidElement=Ad;Le.lazy=function(t){return{$$typeof:C0,_payload:{_status:-1,_result:t},_init:N0}};Le.memo=function(t,e){return{$$typeof:T0,type:t,compare:e===void 0?null:e}};Le.startTransition=function(t){var e=Ml.transition;Ml.transition={};try{t()}finally{Ml.transition=e}};Le.unstable_act=Eg;Le.useCallback=function(t,e){return rn.current.useCallback(t,e)};Le.useContext=function(t){return rn.current.useContext(t)};Le.useDebugValue=function(){};Le.useDeferredValue=function(t){return rn.current.useDeferredValue(t)};Le.useEffect=function(t,e){return rn.current.useEffect(t,e)};Le.useId=function(){return rn.current.useId()};Le.useImperativeHandle=function(t,e,n){return rn.current.useImperativeHandle(t,e,n)};Le.useInsertionEffect=function(t,e){return rn.current.useInsertionEffect(t,e)};Le.useLayoutEffect=function(t,e){return rn.current.useLayoutEffect(t,e)};Le.useMemo=function(t,e){return rn.current.useMemo(t,e)};Le.useReducer=function(t,e,n){return rn.current.useReducer(t,e,n)};Le.useRef=function(t){return rn.current.useRef(t)};Le.useState=function(t){return rn.current.useState(t)};Le.useSyncExternalStore=function(t,e,n){return rn.current.useSyncExternalStore(t,e,n)};Le.useTransition=function(){return rn.current.useTransition()};Le.version="18.3.1";_g.exports=Le;var Re=_g.exports;const I0=yg(Re);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P0=Re,M0=Symbol.for("react.element"),D0=Symbol.for("react.fragment"),R0=Object.prototype.hasOwnProperty,j0=P0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,F0={key:!0,ref:!0,__self:!0,__source:!0};function Ag(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)R0.call(e,r)&&!F0.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:M0,type:t,key:i,ref:a,props:s,_owner:j0.current}}Bu.Fragment=D0;Bu.jsx=Ag;Bu.jsxs=Ag;vg.exports=Bu;var T=vg.exports,Ng={exports:{}},Cn={},Og={exports:{}},Ig={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Q,J){var ee=Q.length;Q.push(J);e:for(;0<ee;){var me=ee-1>>>1,Te=Q[me];if(0<s(Te,J))Q[me]=J,Q[ee]=Te,ee=me;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var J=Q[0],ee=Q.pop();if(ee!==J){Q[0]=ee;e:for(var me=0,Te=Q.length,Ye=Te>>>1;me<Ye;){var Je=2*(me+1)-1,Ee=Q[Je],ye=Je+1,Ae=Q[ye];if(0>s(Ee,ee))ye<Te&&0>s(Ae,Ee)?(Q[me]=Ae,Q[ye]=ee,me=ye):(Q[me]=Ee,Q[Je]=ee,me=Je);else if(ye<Te&&0>s(Ae,ee))Q[me]=Ae,Q[ye]=ee,me=ye;else break e}}return J}function s(Q,J){var ee=Q.sortIndex-J.sortIndex;return ee!==0?ee:Q.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],h=[],m=1,p=null,y=3,x=!1,w=!1,C=!1,N=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(Q){for(var J=n(h);J!==null;){if(J.callback===null)r(h);else if(J.startTime<=Q)r(h),J.sortIndex=J.expirationTime,e(c,J);else break;J=n(h)}}function R(Q){if(C=!1,k(Q),!w)if(n(c)!==null)w=!0,Z(E);else{var J=n(h);J!==null&&_e(R,J.startTime-Q)}}function E(Q,J){w=!1,C&&(C=!1,v(O),O=-1),x=!0;var ee=y;try{for(k(J),p=n(c);p!==null&&(!(p.expirationTime>J)||Q&&!X());){var me=p.callback;if(typeof me=="function"){p.callback=null,y=p.priorityLevel;var Te=me(p.expirationTime<=J);J=t.unstable_now(),typeof Te=="function"?p.callback=Te:p===n(c)&&r(c),k(J)}else r(c);p=n(c)}if(p!==null)var Ye=!0;else{var Je=n(h);Je!==null&&_e(R,Je.startTime-J),Ye=!1}return Ye}finally{p=null,y=ee,x=!1}}var P=!1,M=null,O=-1,G=5,$=-1;function X(){return!(t.unstable_now()-$<G)}function H(){if(M!==null){var Q=t.unstable_now();$=Q;var J=!0;try{J=M(!0,Q)}finally{J?se():(P=!1,M=null)}}else P=!1}var se;if(typeof S=="function")se=function(){S(H)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,xe=fe.port2;fe.port1.onmessage=H,se=function(){xe.postMessage(null)}}else se=function(){N(H,0)};function Z(Q){M=Q,P||(P=!0,se())}function _e(Q,J){O=N(function(){Q(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_continueExecution=function(){w||x||(w=!0,Z(E))},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(Q){switch(y){case 1:case 2:case 3:var J=3;break;default:J=y}var ee=y;y=J;try{return Q()}finally{y=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Q,J){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ee=y;y=Q;try{return J()}finally{y=ee}},t.unstable_scheduleCallback=function(Q,J,ee){var me=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?me+ee:me):ee=me,Q){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=ee+Te,Q={id:m++,callback:J,priorityLevel:Q,startTime:ee,expirationTime:Te,sortIndex:-1},ee>me?(Q.sortIndex=ee,e(h,Q),n(c)===null&&Q===n(h)&&(C?(v(O),O=-1):C=!0,_e(R,ee-me))):(Q.sortIndex=Te,e(c,Q),w||x||(w=!0,Z(E))),Q},t.unstable_shouldYield=X,t.unstable_wrapCallback=function(Q){var J=y;return function(){var ee=y;y=J;try{return Q.apply(this,arguments)}finally{y=ee}}}})(Ig);Og.exports=Ig;var L0=Og.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V0=Re,Tn=L0;function te(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Pg=new Set,Go={};function ni(t,e){Ui(t,e),Ui(t+"Capture",e)}function Ui(t,e){for(Go[t]=e,t=0;t<e.length;t++)Pg.add(e[t])}var Cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vh=Object.prototype.hasOwnProperty,B0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Op={},Ip={};function W0(t){return vh.call(Ip,t)?!0:vh.call(Op,t)?!1:B0.test(t)?Ip[t]=!0:(Op[t]=!0,!1)}function z0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function U0(t,e,n,r){if(e===null||typeof e>"u"||z0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sn(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Bt[t]=new sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Bt[e]=new sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Bt[t]=new sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Bt[t]=new sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Bt[t]=new sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Bt[t]=new sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Bt[t]=new sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Bt[t]=new sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Bt[t]=new sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Nd=/[\-:]([a-z])/g;function Od(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Nd,Od);Bt[e]=new sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Nd,Od);Bt[e]=new sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Nd,Od);Bt[e]=new sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Bt[t]=new sn(t,1,!1,t.toLowerCase(),null,!1,!1)});Bt.xlinkHref=new sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Bt[t]=new sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Id(t,e,n,r){var s=Bt.hasOwnProperty(e)?Bt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(U0(e,n,s,r)&&(n=null),r||s===null?W0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ir=V0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cl=Symbol.for("react.element"),wi=Symbol.for("react.portal"),xi=Symbol.for("react.fragment"),Pd=Symbol.for("react.strict_mode"),_h=Symbol.for("react.profiler"),Mg=Symbol.for("react.provider"),Dg=Symbol.for("react.context"),Md=Symbol.for("react.forward_ref"),wh=Symbol.for("react.suspense"),xh=Symbol.for("react.suspense_list"),Dd=Symbol.for("react.memo"),Hr=Symbol.for("react.lazy"),Rg=Symbol.for("react.offscreen"),Pp=Symbol.iterator;function To(t){return t===null||typeof t!="object"?null:(t=Pp&&t[Pp]||t["@@iterator"],typeof t=="function"?t:null)}var gt=Object.assign,$c;function Mo(t){if($c===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);$c=e&&e[1]||""}return`
`+$c+t}var Kc=!1;function Gc(t,e){if(!t||Kc)return"";Kc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{Kc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Mo(t):""}function q0(t){switch(t.tag){case 5:return Mo(t.type);case 16:return Mo("Lazy");case 13:return Mo("Suspense");case 19:return Mo("SuspenseList");case 0:case 2:case 15:return t=Gc(t.type,!1),t;case 11:return t=Gc(t.type.render,!1),t;case 1:return t=Gc(t.type,!0),t;default:return""}}function kh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xi:return"Fragment";case wi:return"Portal";case _h:return"Profiler";case Pd:return"StrictMode";case wh:return"Suspense";case xh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Dg:return(t.displayName||"Context")+".Consumer";case Mg:return(t._context.displayName||"Context")+".Provider";case Md:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Dd:return e=t.displayName||null,e!==null?e:kh(t.type)||"Memo";case Hr:e=t._payload,t=t._init;try{return kh(t(e))}catch{}}return null}function $0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kh(e);case 8:return e===Pd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function K0(t){var e=jg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function hl(t){t._valueTracker||(t._valueTracker=K0(t))}function Fg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=jg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Kl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sh(t,e){var n=e.checked;return gt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Mp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=cs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Lg(t,e){e=e.checked,e!=null&&Id(t,"checked",e,!1)}function Th(t,e){Lg(t,e);var n=cs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ch(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ch(t,e.type,cs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Dp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ch(t,e,n){(e!=="number"||Kl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Do=Array.isArray;function Ri(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+cs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function bh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(te(91));return gt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Rp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(te(92));if(Do(n)){if(1<n.length)throw Error(te(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:cs(n)}}function Vg(t,e){var n=cs(e.value),r=cs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function jp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Bg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Eh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Bg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var dl,Wg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(dl=dl||document.createElement("div"),dl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=dl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ho(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Fo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},G0=["Webkit","ms","Moz","O"];Object.keys(Fo).forEach(function(t){G0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fo[e]=Fo[t]})});function zg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Fo.hasOwnProperty(t)&&Fo[t]?(""+e).trim():e+"px"}function Ug(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=zg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var H0=gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ah(t,e){if(e){if(H0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(te(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(te(62))}}function Nh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oh=null;function Rd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ih=null,ji=null,Fi=null;function Fp(t){if(t=ba(t)){if(typeof Ih!="function")throw Error(te(280));var e=t.stateNode;e&&(e=$u(e),Ih(t.stateNode,t.type,e))}}function qg(t){ji?Fi?Fi.push(t):Fi=[t]:ji=t}function $g(){if(ji){var t=ji,e=Fi;if(Fi=ji=null,Fp(t),e)for(t=0;t<e.length;t++)Fp(e[t])}}function Kg(t,e){return t(e)}function Gg(){}var Hc=!1;function Hg(t,e,n){if(Hc)return t(e,n);Hc=!0;try{return Kg(t,e,n)}finally{Hc=!1,(ji!==null||Fi!==null)&&(Gg(),$g())}}function Xo(t,e){var n=t.stateNode;if(n===null)return null;var r=$u(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(te(231,e,typeof n));return n}var Ph=!1;if(Cr)try{var Co={};Object.defineProperty(Co,"passive",{get:function(){Ph=!0}}),window.addEventListener("test",Co,Co),window.removeEventListener("test",Co,Co)}catch{Ph=!1}function X0(t,e,n,r,s,i,a,l,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(m){this.onError(m)}}var Lo=!1,Gl=null,Hl=!1,Mh=null,Q0={onError:function(t){Lo=!0,Gl=t}};function Y0(t,e,n,r,s,i,a,l,c){Lo=!1,Gl=null,X0.apply(Q0,arguments)}function Z0(t,e,n,r,s,i,a,l,c){if(Y0.apply(this,arguments),Lo){if(Lo){var h=Gl;Lo=!1,Gl=null}else throw Error(te(198));Hl||(Hl=!0,Mh=h)}}function ri(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Xg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Lp(t){if(ri(t)!==t)throw Error(te(188))}function J0(t){var e=t.alternate;if(!e){if(e=ri(t),e===null)throw Error(te(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Lp(s),t;if(i===r)return Lp(s),e;i=i.sibling}throw Error(te(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(te(189))}}if(n.alternate!==r)throw Error(te(190))}if(n.tag!==3)throw Error(te(188));return n.stateNode.current===n?t:e}function Qg(t){return t=J0(t),t!==null?Yg(t):null}function Yg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Yg(t);if(e!==null)return e;t=t.sibling}return null}var Zg=Tn.unstable_scheduleCallback,Vp=Tn.unstable_cancelCallback,ew=Tn.unstable_shouldYield,tw=Tn.unstable_requestPaint,St=Tn.unstable_now,nw=Tn.unstable_getCurrentPriorityLevel,jd=Tn.unstable_ImmediatePriority,Jg=Tn.unstable_UserBlockingPriority,Xl=Tn.unstable_NormalPriority,rw=Tn.unstable_LowPriority,ey=Tn.unstable_IdlePriority,Wu=null,or=null;function sw(t){if(or&&typeof or.onCommitFiberRoot=="function")try{or.onCommitFiberRoot(Wu,t,void 0,(t.current.flags&128)===128)}catch{}}var $n=Math.clz32?Math.clz32:aw,iw=Math.log,ow=Math.LN2;function aw(t){return t>>>=0,t===0?32:31-(iw(t)/ow|0)|0}var fl=64,pl=4194304;function Ro(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ql(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=Ro(l):(i&=a,i!==0&&(r=Ro(i)))}else a=n&~s,a!==0?r=Ro(a):i!==0&&(r=Ro(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-$n(e),s=1<<n,r|=t[n],e&=~s;return r}function lw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-$n(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=lw(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Dh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ty(){var t=fl;return fl<<=1,!(fl&4194240)&&(fl=64),t}function Xc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ta(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-$n(e),t[e]=n}function cw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-$n(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Fd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-$n(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ge=0;function ny(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ry,Ld,sy,iy,oy,Rh=!1,ml=[],ts=null,ns=null,rs=null,Qo=new Map,Yo=new Map,Yr=[],hw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bp(t,e){switch(t){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":Qo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yo.delete(e.pointerId)}}function bo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ba(e),e!==null&&Ld(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function dw(t,e,n,r,s){switch(e){case"focusin":return ts=bo(ts,t,e,n,r,s),!0;case"dragenter":return ns=bo(ns,t,e,n,r,s),!0;case"mouseover":return rs=bo(rs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Qo.set(i,bo(Qo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Yo.set(i,bo(Yo.get(i)||null,t,e,n,r,s)),!0}return!1}function ay(t){var e=Ps(t.target);if(e!==null){var n=ri(e);if(n!==null){if(e=n.tag,e===13){if(e=Xg(n),e!==null){t.blockedOn=e,oy(t.priority,function(){sy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Dl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=jh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Oh=r,n.target.dispatchEvent(r),Oh=null}else return e=ba(n),e!==null&&Ld(e),t.blockedOn=n,!1;e.shift()}return!0}function Wp(t,e,n){Dl(t)&&n.delete(e)}function fw(){Rh=!1,ts!==null&&Dl(ts)&&(ts=null),ns!==null&&Dl(ns)&&(ns=null),rs!==null&&Dl(rs)&&(rs=null),Qo.forEach(Wp),Yo.forEach(Wp)}function Eo(t,e){t.blockedOn===e&&(t.blockedOn=null,Rh||(Rh=!0,Tn.unstable_scheduleCallback(Tn.unstable_NormalPriority,fw)))}function Zo(t){function e(s){return Eo(s,t)}if(0<ml.length){Eo(ml[0],t);for(var n=1;n<ml.length;n++){var r=ml[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ts!==null&&Eo(ts,t),ns!==null&&Eo(ns,t),rs!==null&&Eo(rs,t),Qo.forEach(e),Yo.forEach(e),n=0;n<Yr.length;n++)r=Yr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Yr.length&&(n=Yr[0],n.blockedOn===null);)ay(n),n.blockedOn===null&&Yr.shift()}var Li=Ir.ReactCurrentBatchConfig,Yl=!0;function pw(t,e,n,r){var s=Ge,i=Li.transition;Li.transition=null;try{Ge=1,Vd(t,e,n,r)}finally{Ge=s,Li.transition=i}}function mw(t,e,n,r){var s=Ge,i=Li.transition;Li.transition=null;try{Ge=4,Vd(t,e,n,r)}finally{Ge=s,Li.transition=i}}function Vd(t,e,n,r){if(Yl){var s=jh(t,e,n,r);if(s===null)ih(t,e,r,Zl,n),Bp(t,r);else if(dw(s,t,e,n,r))r.stopPropagation();else if(Bp(t,r),e&4&&-1<hw.indexOf(t)){for(;s!==null;){var i=ba(s);if(i!==null&&ry(i),i=jh(t,e,n,r),i===null&&ih(t,e,r,Zl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ih(t,e,r,null,n)}}var Zl=null;function jh(t,e,n,r){if(Zl=null,t=Rd(r),t=Ps(t),t!==null)if(e=ri(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Xg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Zl=t,null}function ly(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nw()){case jd:return 1;case Jg:return 4;case Xl:case rw:return 16;case ey:return 536870912;default:return 16}default:return 16}}var Jr=null,Bd=null,Rl=null;function uy(){if(Rl)return Rl;var t,e=Bd,n=e.length,r,s="value"in Jr?Jr.value:Jr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Rl=s.slice(t,1<r?1-r:void 0)}function jl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function gl(){return!0}function zp(){return!1}function bn(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?gl:zp,this.isPropagationStopped=zp,this}return gt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gl)},persist:function(){},isPersistent:gl}),e}var io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wd=bn(io),Ca=gt({},io,{view:0,detail:0}),gw=bn(Ca),Qc,Yc,Ao,zu=gt({},Ca,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ao&&(Ao&&t.type==="mousemove"?(Qc=t.screenX-Ao.screenX,Yc=t.screenY-Ao.screenY):Yc=Qc=0,Ao=t),Qc)},movementY:function(t){return"movementY"in t?t.movementY:Yc}}),Up=bn(zu),yw=gt({},zu,{dataTransfer:0}),vw=bn(yw),_w=gt({},Ca,{relatedTarget:0}),Zc=bn(_w),ww=gt({},io,{animationName:0,elapsedTime:0,pseudoElement:0}),xw=bn(ww),kw=gt({},io,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Sw=bn(kw),Tw=gt({},io,{data:0}),qp=bn(Tw),Cw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ew={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Aw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ew[t])?!!e[t]:!1}function zd(){return Aw}var Nw=gt({},Ca,{key:function(t){if(t.key){var e=Cw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=jl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(t){return t.type==="keypress"?jl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ow=bn(Nw),Iw=gt({},zu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$p=bn(Iw),Pw=gt({},Ca,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Mw=bn(Pw),Dw=gt({},io,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rw=bn(Dw),jw=gt({},zu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Fw=bn(jw),Lw=[9,13,27,32],Ud=Cr&&"CompositionEvent"in window,Vo=null;Cr&&"documentMode"in document&&(Vo=document.documentMode);var Vw=Cr&&"TextEvent"in window&&!Vo,cy=Cr&&(!Ud||Vo&&8<Vo&&11>=Vo),Kp=" ",Gp=!1;function hy(t,e){switch(t){case"keyup":return Lw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ki=!1;function Bw(t,e){switch(t){case"compositionend":return dy(e);case"keypress":return e.which!==32?null:(Gp=!0,Kp);case"textInput":return t=e.data,t===Kp&&Gp?null:t;default:return null}}function Ww(t,e){if(ki)return t==="compositionend"||!Ud&&hy(t,e)?(t=uy(),Rl=Bd=Jr=null,ki=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return cy&&e.locale!=="ko"?null:e.data;default:return null}}var zw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!zw[t.type]:e==="textarea"}function fy(t,e,n,r){qg(r),e=Jl(e,"onChange"),0<e.length&&(n=new Wd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Bo=null,Jo=null;function Uw(t){Ty(t,0)}function Uu(t){var e=Ci(t);if(Fg(e))return t}function qw(t,e){if(t==="change")return e}var py=!1;if(Cr){var Jc;if(Cr){var eh="oninput"in document;if(!eh){var Xp=document.createElement("div");Xp.setAttribute("oninput","return;"),eh=typeof Xp.oninput=="function"}Jc=eh}else Jc=!1;py=Jc&&(!document.documentMode||9<document.documentMode)}function Qp(){Bo&&(Bo.detachEvent("onpropertychange",my),Jo=Bo=null)}function my(t){if(t.propertyName==="value"&&Uu(Jo)){var e=[];fy(e,Jo,t,Rd(t)),Hg(Uw,e)}}function $w(t,e,n){t==="focusin"?(Qp(),Bo=e,Jo=n,Bo.attachEvent("onpropertychange",my)):t==="focusout"&&Qp()}function Kw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Uu(Jo)}function Gw(t,e){if(t==="click")return Uu(e)}function Hw(t,e){if(t==="input"||t==="change")return Uu(e)}function Xw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hn=typeof Object.is=="function"?Object.is:Xw;function ea(t,e){if(Hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!vh.call(e,s)||!Hn(t[s],e[s]))return!1}return!0}function Yp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zp(t,e){var n=Yp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Yp(n)}}function gy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?gy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function yy(){for(var t=window,e=Kl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Kl(t.document)}return e}function qd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Qw(t){var e=yy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&gy(n.ownerDocument.documentElement,n)){if(r!==null&&qd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Zp(n,i);var a=Zp(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Yw=Cr&&"documentMode"in document&&11>=document.documentMode,Si=null,Fh=null,Wo=null,Lh=!1;function Jp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Lh||Si==null||Si!==Kl(r)||(r=Si,"selectionStart"in r&&qd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Wo&&ea(Wo,r)||(Wo=r,r=Jl(Fh,"onSelect"),0<r.length&&(e=new Wd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Si)))}function yl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ti={animationend:yl("Animation","AnimationEnd"),animationiteration:yl("Animation","AnimationIteration"),animationstart:yl("Animation","AnimationStart"),transitionend:yl("Transition","TransitionEnd")},th={},vy={};Cr&&(vy=document.createElement("div").style,"AnimationEvent"in window||(delete Ti.animationend.animation,delete Ti.animationiteration.animation,delete Ti.animationstart.animation),"TransitionEvent"in window||delete Ti.transitionend.transition);function qu(t){if(th[t])return th[t];if(!Ti[t])return t;var e=Ti[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in vy)return th[t]=e[n];return t}var _y=qu("animationend"),wy=qu("animationiteration"),xy=qu("animationstart"),ky=qu("transitionend"),Sy=new Map,em="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ps(t,e){Sy.set(t,e),ni(e,[t])}for(var nh=0;nh<em.length;nh++){var rh=em[nh],Zw=rh.toLowerCase(),Jw=rh[0].toUpperCase()+rh.slice(1);ps(Zw,"on"+Jw)}ps(_y,"onAnimationEnd");ps(wy,"onAnimationIteration");ps(xy,"onAnimationStart");ps("dblclick","onDoubleClick");ps("focusin","onFocus");ps("focusout","onBlur");ps(ky,"onTransitionEnd");Ui("onMouseEnter",["mouseout","mouseover"]);Ui("onMouseLeave",["mouseout","mouseover"]);Ui("onPointerEnter",["pointerout","pointerover"]);Ui("onPointerLeave",["pointerout","pointerover"]);ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ni("onBeforeInput",["compositionend","keypress","textInput","paste"]);ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),e1=new Set("cancel close invalid load scroll toggle".split(" ").concat(jo));function tm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Z0(r,e,void 0,t),t.currentTarget=null}function Ty(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,h=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;tm(s,l,h),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,h=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;tm(s,l,h),i=c}}}if(Hl)throw t=Mh,Hl=!1,Mh=null,t}function ot(t,e){var n=e[Uh];n===void 0&&(n=e[Uh]=new Set);var r=t+"__bubble";n.has(r)||(Cy(e,t,2,!1),n.add(r))}function sh(t,e,n){var r=0;e&&(r|=4),Cy(n,t,r,e)}var vl="_reactListening"+Math.random().toString(36).slice(2);function ta(t){if(!t[vl]){t[vl]=!0,Pg.forEach(function(n){n!=="selectionchange"&&(e1.has(n)||sh(n,!1,t),sh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[vl]||(e[vl]=!0,sh("selectionchange",!1,e))}}function Cy(t,e,n,r){switch(ly(e)){case 1:var s=pw;break;case 4:s=mw;break;default:s=Vd}n=s.bind(null,e,n,t),s=void 0,!Ph||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ih(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Ps(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}Hg(function(){var h=i,m=Rd(n),p=[];e:{var y=Sy.get(t);if(y!==void 0){var x=Wd,w=t;switch(t){case"keypress":if(jl(n)===0)break e;case"keydown":case"keyup":x=Ow;break;case"focusin":w="focus",x=Zc;break;case"focusout":w="blur",x=Zc;break;case"beforeblur":case"afterblur":x=Zc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Up;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=vw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Mw;break;case _y:case wy:case xy:x=xw;break;case ky:x=Rw;break;case"scroll":x=gw;break;case"wheel":x=Fw;break;case"copy":case"cut":case"paste":x=Sw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=$p}var C=(e&4)!==0,N=!C&&t==="scroll",v=C?y!==null?y+"Capture":null:y;C=[];for(var S=h,k;S!==null;){k=S;var R=k.stateNode;if(k.tag===5&&R!==null&&(k=R,v!==null&&(R=Xo(S,v),R!=null&&C.push(na(S,R,k)))),N)break;S=S.return}0<C.length&&(y=new x(y,w,null,n,m),p.push({event:y,listeners:C}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",y&&n!==Oh&&(w=n.relatedTarget||n.fromElement)&&(Ps(w)||w[br]))break e;if((x||y)&&(y=m.window===m?m:(y=m.ownerDocument)?y.defaultView||y.parentWindow:window,x?(w=n.relatedTarget||n.toElement,x=h,w=w?Ps(w):null,w!==null&&(N=ri(w),w!==N||w.tag!==5&&w.tag!==6)&&(w=null)):(x=null,w=h),x!==w)){if(C=Up,R="onMouseLeave",v="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(C=$p,R="onPointerLeave",v="onPointerEnter",S="pointer"),N=x==null?y:Ci(x),k=w==null?y:Ci(w),y=new C(R,S+"leave",x,n,m),y.target=N,y.relatedTarget=k,R=null,Ps(m)===h&&(C=new C(v,S+"enter",w,n,m),C.target=k,C.relatedTarget=N,R=C),N=R,x&&w)t:{for(C=x,v=w,S=0,k=C;k;k=gi(k))S++;for(k=0,R=v;R;R=gi(R))k++;for(;0<S-k;)C=gi(C),S--;for(;0<k-S;)v=gi(v),k--;for(;S--;){if(C===v||v!==null&&C===v.alternate)break t;C=gi(C),v=gi(v)}C=null}else C=null;x!==null&&nm(p,y,x,C,!1),w!==null&&N!==null&&nm(p,N,w,C,!0)}}e:{if(y=h?Ci(h):window,x=y.nodeName&&y.nodeName.toLowerCase(),x==="select"||x==="input"&&y.type==="file")var E=qw;else if(Hp(y))if(py)E=Hw;else{E=Kw;var P=$w}else(x=y.nodeName)&&x.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(E=Gw);if(E&&(E=E(t,h))){fy(p,E,n,m);break e}P&&P(t,y,h),t==="focusout"&&(P=y._wrapperState)&&P.controlled&&y.type==="number"&&Ch(y,"number",y.value)}switch(P=h?Ci(h):window,t){case"focusin":(Hp(P)||P.contentEditable==="true")&&(Si=P,Fh=h,Wo=null);break;case"focusout":Wo=Fh=Si=null;break;case"mousedown":Lh=!0;break;case"contextmenu":case"mouseup":case"dragend":Lh=!1,Jp(p,n,m);break;case"selectionchange":if(Yw)break;case"keydown":case"keyup":Jp(p,n,m)}var M;if(Ud)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else ki?hy(t,n)&&(O="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(cy&&n.locale!=="ko"&&(ki||O!=="onCompositionStart"?O==="onCompositionEnd"&&ki&&(M=uy()):(Jr=m,Bd="value"in Jr?Jr.value:Jr.textContent,ki=!0)),P=Jl(h,O),0<P.length&&(O=new qp(O,t,null,n,m),p.push({event:O,listeners:P}),M?O.data=M:(M=dy(n),M!==null&&(O.data=M)))),(M=Vw?Bw(t,n):Ww(t,n))&&(h=Jl(h,"onBeforeInput"),0<h.length&&(m=new qp("onBeforeInput","beforeinput",null,n,m),p.push({event:m,listeners:h}),m.data=M))}Ty(p,e)})}function na(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Jl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Xo(t,n),i!=null&&r.unshift(na(t,i,s)),i=Xo(t,e),i!=null&&r.push(na(t,i,s))),t=t.return}return r}function gi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function nm(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,h=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&h!==null&&(l=h,s?(c=Xo(n,i),c!=null&&a.unshift(na(n,c,l))):s||(c=Xo(n,i),c!=null&&a.push(na(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var t1=/\r\n?/g,n1=/\u0000|\uFFFD/g;function rm(t){return(typeof t=="string"?t:""+t).replace(t1,`
`).replace(n1,"")}function _l(t,e,n){if(e=rm(e),rm(t)!==e&&n)throw Error(te(425))}function eu(){}var Vh=null,Bh=null;function Wh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zh=typeof setTimeout=="function"?setTimeout:void 0,r1=typeof clearTimeout=="function"?clearTimeout:void 0,sm=typeof Promise=="function"?Promise:void 0,s1=typeof queueMicrotask=="function"?queueMicrotask:typeof sm<"u"?function(t){return sm.resolve(null).then(t).catch(i1)}:zh;function i1(t){setTimeout(function(){throw t})}function oh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Zo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Zo(e)}function ss(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function im(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var oo=Math.random().toString(36).slice(2),sr="__reactFiber$"+oo,ra="__reactProps$"+oo,br="__reactContainer$"+oo,Uh="__reactEvents$"+oo,o1="__reactListeners$"+oo,a1="__reactHandles$"+oo;function Ps(t){var e=t[sr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[br]||n[sr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=im(t);t!==null;){if(n=t[sr])return n;t=im(t)}return e}t=n,n=t.parentNode}return null}function ba(t){return t=t[sr]||t[br],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ci(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(te(33))}function $u(t){return t[ra]||null}var qh=[],bi=-1;function ms(t){return{current:t}}function at(t){0>bi||(t.current=qh[bi],qh[bi]=null,bi--)}function nt(t,e){bi++,qh[bi]=t.current,t.current=e}var hs={},Ht=ms(hs),dn=ms(!1),Ws=hs;function qi(t,e){var n=t.type.contextTypes;if(!n)return hs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function fn(t){return t=t.childContextTypes,t!=null}function tu(){at(dn),at(Ht)}function om(t,e,n){if(Ht.current!==hs)throw Error(te(168));nt(Ht,e),nt(dn,n)}function by(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(te(108,$0(t)||"Unknown",s));return gt({},n,r)}function nu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hs,Ws=Ht.current,nt(Ht,t),nt(dn,dn.current),!0}function am(t,e,n){var r=t.stateNode;if(!r)throw Error(te(169));n?(t=by(t,e,Ws),r.__reactInternalMemoizedMergedChildContext=t,at(dn),at(Ht),nt(Ht,t)):at(dn),nt(dn,n)}var wr=null,Ku=!1,ah=!1;function Ey(t){wr===null?wr=[t]:wr.push(t)}function l1(t){Ku=!0,Ey(t)}function gs(){if(!ah&&wr!==null){ah=!0;var t=0,e=Ge;try{var n=wr;for(Ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}wr=null,Ku=!1}catch(s){throw wr!==null&&(wr=wr.slice(t+1)),Zg(jd,gs),s}finally{Ge=e,ah=!1}}return null}var Ei=[],Ai=0,ru=null,su=0,On=[],In=0,zs=null,xr=1,kr="";function Ns(t,e){Ei[Ai++]=su,Ei[Ai++]=ru,ru=t,su=e}function Ay(t,e,n){On[In++]=xr,On[In++]=kr,On[In++]=zs,zs=t;var r=xr;t=kr;var s=32-$n(r)-1;r&=~(1<<s),n+=1;var i=32-$n(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,xr=1<<32-$n(e)+s|n<<s|r,kr=i+t}else xr=1<<i|n<<s|r,kr=t}function $d(t){t.return!==null&&(Ns(t,1),Ay(t,1,0))}function Kd(t){for(;t===ru;)ru=Ei[--Ai],Ei[Ai]=null,su=Ei[--Ai],Ei[Ai]=null;for(;t===zs;)zs=On[--In],On[In]=null,kr=On[--In],On[In]=null,xr=On[--In],On[In]=null}var Sn=null,kn=null,dt=!1,Un=null;function Ny(t,e){var n=Pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function lm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Sn=t,kn=ss(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Sn=t,kn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zs!==null?{id:xr,overflow:kr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Sn=t,kn=null,!0):!1;default:return!1}}function $h(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Kh(t){if(dt){var e=kn;if(e){var n=e;if(!lm(t,e)){if($h(t))throw Error(te(418));e=ss(n.nextSibling);var r=Sn;e&&lm(t,e)?Ny(r,n):(t.flags=t.flags&-4097|2,dt=!1,Sn=t)}}else{if($h(t))throw Error(te(418));t.flags=t.flags&-4097|2,dt=!1,Sn=t}}}function um(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Sn=t}function wl(t){if(t!==Sn)return!1;if(!dt)return um(t),dt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Wh(t.type,t.memoizedProps)),e&&(e=kn)){if($h(t))throw Oy(),Error(te(418));for(;e;)Ny(t,e),e=ss(e.nextSibling)}if(um(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(te(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){kn=ss(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}kn=null}}else kn=Sn?ss(t.stateNode.nextSibling):null;return!0}function Oy(){for(var t=kn;t;)t=ss(t.nextSibling)}function $i(){kn=Sn=null,dt=!1}function Gd(t){Un===null?Un=[t]:Un.push(t)}var u1=Ir.ReactCurrentBatchConfig;function No(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(te(309));var r=n.stateNode}if(!r)throw Error(te(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(te(284));if(!n._owner)throw Error(te(290,t))}return t}function xl(t,e){throw t=Object.prototype.toString.call(e),Error(te(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function cm(t){var e=t._init;return e(t._payload)}function Iy(t){function e(v,S){if(t){var k=v.deletions;k===null?(v.deletions=[S],v.flags|=16):k.push(S)}}function n(v,S){if(!t)return null;for(;S!==null;)e(v,S),S=S.sibling;return null}function r(v,S){for(v=new Map;S!==null;)S.key!==null?v.set(S.key,S):v.set(S.index,S),S=S.sibling;return v}function s(v,S){return v=ls(v,S),v.index=0,v.sibling=null,v}function i(v,S,k){return v.index=k,t?(k=v.alternate,k!==null?(k=k.index,k<S?(v.flags|=2,S):k):(v.flags|=2,S)):(v.flags|=1048576,S)}function a(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,S,k,R){return S===null||S.tag!==6?(S=ph(k,v.mode,R),S.return=v,S):(S=s(S,k),S.return=v,S)}function c(v,S,k,R){var E=k.type;return E===xi?m(v,S,k.props.children,R,k.key):S!==null&&(S.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Hr&&cm(E)===S.type)?(R=s(S,k.props),R.ref=No(v,S,k),R.return=v,R):(R=Ul(k.type,k.key,k.props,null,v.mode,R),R.ref=No(v,S,k),R.return=v,R)}function h(v,S,k,R){return S===null||S.tag!==4||S.stateNode.containerInfo!==k.containerInfo||S.stateNode.implementation!==k.implementation?(S=mh(k,v.mode,R),S.return=v,S):(S=s(S,k.children||[]),S.return=v,S)}function m(v,S,k,R,E){return S===null||S.tag!==7?(S=Fs(k,v.mode,R,E),S.return=v,S):(S=s(S,k),S.return=v,S)}function p(v,S,k){if(typeof S=="string"&&S!==""||typeof S=="number")return S=ph(""+S,v.mode,k),S.return=v,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case cl:return k=Ul(S.type,S.key,S.props,null,v.mode,k),k.ref=No(v,null,S),k.return=v,k;case wi:return S=mh(S,v.mode,k),S.return=v,S;case Hr:var R=S._init;return p(v,R(S._payload),k)}if(Do(S)||To(S))return S=Fs(S,v.mode,k,null),S.return=v,S;xl(v,S)}return null}function y(v,S,k,R){var E=S!==null?S.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return E!==null?null:l(v,S,""+k,R);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case cl:return k.key===E?c(v,S,k,R):null;case wi:return k.key===E?h(v,S,k,R):null;case Hr:return E=k._init,y(v,S,E(k._payload),R)}if(Do(k)||To(k))return E!==null?null:m(v,S,k,R,null);xl(v,k)}return null}function x(v,S,k,R,E){if(typeof R=="string"&&R!==""||typeof R=="number")return v=v.get(k)||null,l(S,v,""+R,E);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case cl:return v=v.get(R.key===null?k:R.key)||null,c(S,v,R,E);case wi:return v=v.get(R.key===null?k:R.key)||null,h(S,v,R,E);case Hr:var P=R._init;return x(v,S,k,P(R._payload),E)}if(Do(R)||To(R))return v=v.get(k)||null,m(S,v,R,E,null);xl(S,R)}return null}function w(v,S,k,R){for(var E=null,P=null,M=S,O=S=0,G=null;M!==null&&O<k.length;O++){M.index>O?(G=M,M=null):G=M.sibling;var $=y(v,M,k[O],R);if($===null){M===null&&(M=G);break}t&&M&&$.alternate===null&&e(v,M),S=i($,S,O),P===null?E=$:P.sibling=$,P=$,M=G}if(O===k.length)return n(v,M),dt&&Ns(v,O),E;if(M===null){for(;O<k.length;O++)M=p(v,k[O],R),M!==null&&(S=i(M,S,O),P===null?E=M:P.sibling=M,P=M);return dt&&Ns(v,O),E}for(M=r(v,M);O<k.length;O++)G=x(M,v,O,k[O],R),G!==null&&(t&&G.alternate!==null&&M.delete(G.key===null?O:G.key),S=i(G,S,O),P===null?E=G:P.sibling=G,P=G);return t&&M.forEach(function(X){return e(v,X)}),dt&&Ns(v,O),E}function C(v,S,k,R){var E=To(k);if(typeof E!="function")throw Error(te(150));if(k=E.call(k),k==null)throw Error(te(151));for(var P=E=null,M=S,O=S=0,G=null,$=k.next();M!==null&&!$.done;O++,$=k.next()){M.index>O?(G=M,M=null):G=M.sibling;var X=y(v,M,$.value,R);if(X===null){M===null&&(M=G);break}t&&M&&X.alternate===null&&e(v,M),S=i(X,S,O),P===null?E=X:P.sibling=X,P=X,M=G}if($.done)return n(v,M),dt&&Ns(v,O),E;if(M===null){for(;!$.done;O++,$=k.next())$=p(v,$.value,R),$!==null&&(S=i($,S,O),P===null?E=$:P.sibling=$,P=$);return dt&&Ns(v,O),E}for(M=r(v,M);!$.done;O++,$=k.next())$=x(M,v,O,$.value,R),$!==null&&(t&&$.alternate!==null&&M.delete($.key===null?O:$.key),S=i($,S,O),P===null?E=$:P.sibling=$,P=$);return t&&M.forEach(function(H){return e(v,H)}),dt&&Ns(v,O),E}function N(v,S,k,R){if(typeof k=="object"&&k!==null&&k.type===xi&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case cl:e:{for(var E=k.key,P=S;P!==null;){if(P.key===E){if(E=k.type,E===xi){if(P.tag===7){n(v,P.sibling),S=s(P,k.props.children),S.return=v,v=S;break e}}else if(P.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Hr&&cm(E)===P.type){n(v,P.sibling),S=s(P,k.props),S.ref=No(v,P,k),S.return=v,v=S;break e}n(v,P);break}else e(v,P);P=P.sibling}k.type===xi?(S=Fs(k.props.children,v.mode,R,k.key),S.return=v,v=S):(R=Ul(k.type,k.key,k.props,null,v.mode,R),R.ref=No(v,S,k),R.return=v,v=R)}return a(v);case wi:e:{for(P=k.key;S!==null;){if(S.key===P)if(S.tag===4&&S.stateNode.containerInfo===k.containerInfo&&S.stateNode.implementation===k.implementation){n(v,S.sibling),S=s(S,k.children||[]),S.return=v,v=S;break e}else{n(v,S);break}else e(v,S);S=S.sibling}S=mh(k,v.mode,R),S.return=v,v=S}return a(v);case Hr:return P=k._init,N(v,S,P(k._payload),R)}if(Do(k))return w(v,S,k,R);if(To(k))return C(v,S,k,R);xl(v,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,S!==null&&S.tag===6?(n(v,S.sibling),S=s(S,k),S.return=v,v=S):(n(v,S),S=ph(k,v.mode,R),S.return=v,v=S),a(v)):n(v,S)}return N}var Ki=Iy(!0),Py=Iy(!1),iu=ms(null),ou=null,Ni=null,Hd=null;function Xd(){Hd=Ni=ou=null}function Qd(t){var e=iu.current;at(iu),t._currentValue=e}function Gh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Vi(t,e){ou=t,Hd=Ni=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(cn=!0),t.firstContext=null)}function Ln(t){var e=t._currentValue;if(Hd!==t)if(t={context:t,memoizedValue:e,next:null},Ni===null){if(ou===null)throw Error(te(308));Ni=t,ou.dependencies={lanes:0,firstContext:t}}else Ni=Ni.next=t;return e}var Ms=null;function Yd(t){Ms===null?Ms=[t]:Ms.push(t)}function My(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Yd(e)):(n.next=s.next,s.next=n),e.interleaved=n,Er(t,r)}function Er(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xr=!1;function Zd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Sr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function is(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,We&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Er(t,n)}return s=r.interleaved,s===null?(e.next=e,Yd(r)):(e.next=s.next,s.next=e),r.interleaved=e,Er(t,n)}function Fl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Fd(t,n)}}function hm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function au(t,e,n,r){var s=t.updateQueue;Xr=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,h=c.next;c.next=null,a===null?i=h:a.next=h,a=c;var m=t.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==a&&(l===null?m.firstBaseUpdate=h:l.next=h,m.lastBaseUpdate=c))}if(i!==null){var p=s.baseState;a=0,m=h=c=null,l=i;do{var y=l.lane,x=l.eventTime;if((r&y)===y){m!==null&&(m=m.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=t,C=l;switch(y=e,x=n,C.tag){case 1:if(w=C.payload,typeof w=="function"){p=w.call(x,p,y);break e}p=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=C.payload,y=typeof w=="function"?w.call(x,p,y):w,y==null)break e;p=gt({},p,y);break e;case 2:Xr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,y=s.effects,y===null?s.effects=[l]:y.push(l))}else x={eventTime:x,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(h=m=x,c=p):m=m.next=x,a|=y;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;y=l,l=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);if(m===null&&(c=p),s.baseState=c,s.firstBaseUpdate=h,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);qs|=a,t.lanes=a,t.memoizedState=p}}function dm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(te(191,s));s.call(r)}}}var Ea={},ar=ms(Ea),sa=ms(Ea),ia=ms(Ea);function Ds(t){if(t===Ea)throw Error(te(174));return t}function Jd(t,e){switch(nt(ia,e),nt(sa,t),nt(ar,Ea),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Eh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Eh(e,t)}at(ar),nt(ar,e)}function Gi(){at(ar),at(sa),at(ia)}function Ry(t){Ds(ia.current);var e=Ds(ar.current),n=Eh(e,t.type);e!==n&&(nt(sa,t),nt(ar,n))}function ef(t){sa.current===t&&(at(ar),at(sa))}var pt=ms(0);function lu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var lh=[];function tf(){for(var t=0;t<lh.length;t++)lh[t]._workInProgressVersionPrimary=null;lh.length=0}var Ll=Ir.ReactCurrentDispatcher,uh=Ir.ReactCurrentBatchConfig,Us=0,mt=null,Nt=null,Dt=null,uu=!1,zo=!1,oa=0,c1=0;function $t(){throw Error(te(321))}function nf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hn(t[n],e[n]))return!1;return!0}function rf(t,e,n,r,s,i){if(Us=i,mt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ll.current=t===null||t.memoizedState===null?p1:m1,t=n(r,s),zo){i=0;do{if(zo=!1,oa=0,25<=i)throw Error(te(301));i+=1,Dt=Nt=null,e.updateQueue=null,Ll.current=g1,t=n(r,s)}while(zo)}if(Ll.current=cu,e=Nt!==null&&Nt.next!==null,Us=0,Dt=Nt=mt=null,uu=!1,e)throw Error(te(300));return t}function sf(){var t=oa!==0;return oa=0,t}function rr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?mt.memoizedState=Dt=t:Dt=Dt.next=t,Dt}function Vn(){if(Nt===null){var t=mt.alternate;t=t!==null?t.memoizedState:null}else t=Nt.next;var e=Dt===null?mt.memoizedState:Dt.next;if(e!==null)Dt=e,Nt=t;else{if(t===null)throw Error(te(310));Nt=t,t={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Dt===null?mt.memoizedState=Dt=t:Dt=Dt.next=t}return Dt}function aa(t,e){return typeof e=="function"?e(t):e}function ch(t){var e=Vn(),n=e.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=t;var r=Nt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,h=i;do{var m=h.lane;if((Us&m)===m)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var p={lane:m,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(l=c=p,a=r):c=c.next=p,mt.lanes|=m,qs|=m}h=h.next}while(h!==null&&h!==i);c===null?a=r:c.next=l,Hn(r,e.memoizedState)||(cn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,mt.lanes|=i,qs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function hh(t){var e=Vn(),n=e.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Hn(i,e.memoizedState)||(cn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function jy(){}function Fy(t,e){var n=mt,r=Vn(),s=e(),i=!Hn(r.memoizedState,s);if(i&&(r.memoizedState=s,cn=!0),r=r.queue,of(By.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Dt!==null&&Dt.memoizedState.tag&1){if(n.flags|=2048,la(9,Vy.bind(null,n,r,s,e),void 0,null),Rt===null)throw Error(te(349));Us&30||Ly(n,e,s)}return s}function Ly(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=mt.updateQueue,e===null?(e={lastEffect:null,stores:null},mt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Vy(t,e,n,r){e.value=n,e.getSnapshot=r,Wy(e)&&zy(t)}function By(t,e,n){return n(function(){Wy(e)&&zy(t)})}function Wy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hn(t,n)}catch{return!0}}function zy(t){var e=Er(t,1);e!==null&&Kn(e,t,1,-1)}function fm(t){var e=rr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:t},e.queue=t,t=t.dispatch=f1.bind(null,mt,t),[e.memoizedState,t]}function la(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=mt.updateQueue,e===null?(e={lastEffect:null,stores:null},mt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Uy(){return Vn().memoizedState}function Vl(t,e,n,r){var s=rr();mt.flags|=t,s.memoizedState=la(1|e,n,void 0,r===void 0?null:r)}function Gu(t,e,n,r){var s=Vn();r=r===void 0?null:r;var i=void 0;if(Nt!==null){var a=Nt.memoizedState;if(i=a.destroy,r!==null&&nf(r,a.deps)){s.memoizedState=la(e,n,i,r);return}}mt.flags|=t,s.memoizedState=la(1|e,n,i,r)}function pm(t,e){return Vl(8390656,8,t,e)}function of(t,e){return Gu(2048,8,t,e)}function qy(t,e){return Gu(4,2,t,e)}function $y(t,e){return Gu(4,4,t,e)}function Ky(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Gy(t,e,n){return n=n!=null?n.concat([t]):null,Gu(4,4,Ky.bind(null,e,t),n)}function af(){}function Hy(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&nf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Xy(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&nf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Qy(t,e,n){return Us&21?(Hn(n,e)||(n=ty(),mt.lanes|=n,qs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,cn=!0),t.memoizedState=n)}function h1(t,e){var n=Ge;Ge=n!==0&&4>n?n:4,t(!0);var r=uh.transition;uh.transition={};try{t(!1),e()}finally{Ge=n,uh.transition=r}}function Yy(){return Vn().memoizedState}function d1(t,e,n){var r=as(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Zy(t))Jy(e,n);else if(n=My(t,e,n,r),n!==null){var s=tn();Kn(n,t,r,s),ev(n,e,r)}}function f1(t,e,n){var r=as(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zy(t))Jy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Hn(l,a)){var c=e.interleaved;c===null?(s.next=s,Yd(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=My(t,e,s,r),n!==null&&(s=tn(),Kn(n,t,r,s),ev(n,e,r))}}function Zy(t){var e=t.alternate;return t===mt||e!==null&&e===mt}function Jy(t,e){zo=uu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ev(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Fd(t,n)}}var cu={readContext:Ln,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useInsertionEffect:$t,useLayoutEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useMutableSource:$t,useSyncExternalStore:$t,useId:$t,unstable_isNewReconciler:!1},p1={readContext:Ln,useCallback:function(t,e){return rr().memoizedState=[t,e===void 0?null:e],t},useContext:Ln,useEffect:pm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Vl(4194308,4,Ky.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Vl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Vl(4,2,t,e)},useMemo:function(t,e){var n=rr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=rr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=d1.bind(null,mt,t),[r.memoizedState,t]},useRef:function(t){var e=rr();return t={current:t},e.memoizedState=t},useState:fm,useDebugValue:af,useDeferredValue:function(t){return rr().memoizedState=t},useTransition:function(){var t=fm(!1),e=t[0];return t=h1.bind(null,t[1]),rr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=mt,s=rr();if(dt){if(n===void 0)throw Error(te(407));n=n()}else{if(n=e(),Rt===null)throw Error(te(349));Us&30||Ly(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,pm(By.bind(null,r,i,t),[t]),r.flags|=2048,la(9,Vy.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=rr(),e=Rt.identifierPrefix;if(dt){var n=kr,r=xr;n=(r&~(1<<32-$n(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=oa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=c1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},m1={readContext:Ln,useCallback:Hy,useContext:Ln,useEffect:of,useImperativeHandle:Gy,useInsertionEffect:qy,useLayoutEffect:$y,useMemo:Xy,useReducer:ch,useRef:Uy,useState:function(){return ch(aa)},useDebugValue:af,useDeferredValue:function(t){var e=Vn();return Qy(e,Nt.memoizedState,t)},useTransition:function(){var t=ch(aa)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:jy,useSyncExternalStore:Fy,useId:Yy,unstable_isNewReconciler:!1},g1={readContext:Ln,useCallback:Hy,useContext:Ln,useEffect:of,useImperativeHandle:Gy,useInsertionEffect:qy,useLayoutEffect:$y,useMemo:Xy,useReducer:hh,useRef:Uy,useState:function(){return hh(aa)},useDebugValue:af,useDeferredValue:function(t){var e=Vn();return Nt===null?e.memoizedState=t:Qy(e,Nt.memoizedState,t)},useTransition:function(){var t=hh(aa)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:jy,useSyncExternalStore:Fy,useId:Yy,unstable_isNewReconciler:!1};function Wn(t,e){if(t&&t.defaultProps){e=gt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Hh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:gt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Hu={isMounted:function(t){return(t=t._reactInternals)?ri(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=tn(),s=as(t),i=Sr(r,s);i.payload=e,n!=null&&(i.callback=n),e=is(t,i,s),e!==null&&(Kn(e,t,s,r),Fl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=tn(),s=as(t),i=Sr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=is(t,i,s),e!==null&&(Kn(e,t,s,r),Fl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tn(),r=as(t),s=Sr(n,r);s.tag=2,e!=null&&(s.callback=e),e=is(t,s,r),e!==null&&(Kn(e,t,r,n),Fl(e,t,r))}};function mm(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!ea(n,r)||!ea(s,i):!0}function tv(t,e,n){var r=!1,s=hs,i=e.contextType;return typeof i=="object"&&i!==null?i=Ln(i):(s=fn(e)?Ws:Ht.current,r=e.contextTypes,i=(r=r!=null)?qi(t,s):hs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Hu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function gm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Hu.enqueueReplaceState(e,e.state,null)}function Xh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Zd(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ln(i):(i=fn(e)?Ws:Ht.current,s.context=qi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Hh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Hu.enqueueReplaceState(s,s.state,null),au(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Hi(t,e){try{var n="",r=e;do n+=q0(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function dh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Qh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var y1=typeof WeakMap=="function"?WeakMap:Map;function nv(t,e,n){n=Sr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){du||(du=!0,od=r),Qh(t,e)},n}function rv(t,e,n){n=Sr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Qh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Qh(t,e),typeof r!="function"&&(os===null?os=new Set([this]):os.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function ym(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new y1;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=I1.bind(null,t,e,n),e.then(t,t))}function vm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _m(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Sr(-1,1),e.tag=2,is(n,e,1))),n.lanes|=1),t)}var v1=Ir.ReactCurrentOwner,cn=!1;function Yt(t,e,n,r){e.child=t===null?Py(e,null,n,r):Ki(e,t.child,n,r)}function wm(t,e,n,r,s){n=n.render;var i=e.ref;return Vi(e,s),r=rf(t,e,n,r,i,s),n=sf(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ar(t,e,s)):(dt&&n&&$d(e),e.flags|=1,Yt(t,e,r,s),e.child)}function xm(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!mf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,sv(t,e,i,r,s)):(t=Ul(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:ea,n(a,r)&&t.ref===e.ref)return Ar(t,e,s)}return e.flags|=1,t=ls(i,r),t.ref=e.ref,t.return=e,e.child=t}function sv(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ea(i,r)&&t.ref===e.ref)if(cn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(cn=!0);else return e.lanes=t.lanes,Ar(t,e,s)}return Yh(t,e,n,r,s)}function iv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(Ii,xn),xn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,nt(Ii,xn),xn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,nt(Ii,xn),xn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,nt(Ii,xn),xn|=r;return Yt(t,e,s,n),e.child}function ov(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Yh(t,e,n,r,s){var i=fn(n)?Ws:Ht.current;return i=qi(e,i),Vi(e,s),n=rf(t,e,n,r,i,s),r=sf(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ar(t,e,s)):(dt&&r&&$d(e),e.flags|=1,Yt(t,e,n,s),e.child)}function km(t,e,n,r,s){if(fn(n)){var i=!0;nu(e)}else i=!1;if(Vi(e,s),e.stateNode===null)Bl(t,e),tv(e,n,r),Xh(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=Ln(h):(h=fn(n)?Ws:Ht.current,h=qi(e,h));var m=n.getDerivedStateFromProps,p=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==h)&&gm(e,a,r,h),Xr=!1;var y=e.memoizedState;a.state=y,au(e,r,a,s),c=e.memoizedState,l!==r||y!==c||dn.current||Xr?(typeof m=="function"&&(Hh(e,n,m,r),c=e.memoizedState),(l=Xr||mm(e,n,l,r,y,c,h))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=h,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Dy(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Wn(e.type,l),a.props=h,p=e.pendingProps,y=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ln(c):(c=fn(n)?Ws:Ht.current,c=qi(e,c));var x=n.getDerivedStateFromProps;(m=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==p||y!==c)&&gm(e,a,r,c),Xr=!1,y=e.memoizedState,a.state=y,au(e,r,a,s);var w=e.memoizedState;l!==p||y!==w||dn.current||Xr?(typeof x=="function"&&(Hh(e,n,x,r),w=e.memoizedState),(h=Xr||mm(e,n,h,r,y,w,c)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,w,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,w,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),a.props=r,a.state=w,a.context=c,r=h):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return Zh(t,e,n,r,i,s)}function Zh(t,e,n,r,s,i){ov(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&am(e,n,!1),Ar(t,e,i);r=e.stateNode,v1.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Ki(e,t.child,null,i),e.child=Ki(e,null,l,i)):Yt(t,e,l,i),e.memoizedState=r.state,s&&am(e,n,!0),e.child}function av(t){var e=t.stateNode;e.pendingContext?om(t,e.pendingContext,e.pendingContext!==e.context):e.context&&om(t,e.context,!1),Jd(t,e.containerInfo)}function Sm(t,e,n,r,s){return $i(),Gd(s),e.flags|=256,Yt(t,e,n,r),e.child}var Jh={dehydrated:null,treeContext:null,retryLane:0};function ed(t){return{baseLanes:t,cachePool:null,transitions:null}}function lv(t,e,n){var r=e.pendingProps,s=pt.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),nt(pt,s&1),t===null)return Kh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Yu(a,r,0,null),t=Fs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ed(n),e.memoizedState=Jh,t):lf(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return _1(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=ls(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=ls(l,i):(i=Fs(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?ed(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Jh,r}return i=t.child,t=i.sibling,r=ls(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function lf(t,e){return e=Yu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function kl(t,e,n,r){return r!==null&&Gd(r),Ki(e,t.child,null,n),t=lf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _1(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=dh(Error(te(422))),kl(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Yu({mode:"visible",children:r.children},s,0,null),i=Fs(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ki(e,t.child,null,a),e.child.memoizedState=ed(a),e.memoizedState=Jh,i);if(!(e.mode&1))return kl(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(te(419)),r=dh(i,r,void 0),kl(t,e,a,r)}if(l=(a&t.childLanes)!==0,cn||l){if(r=Rt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Er(t,s),Kn(r,t,s,-1))}return pf(),r=dh(Error(te(421))),kl(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=P1.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,kn=ss(s.nextSibling),Sn=e,dt=!0,Un=null,t!==null&&(On[In++]=xr,On[In++]=kr,On[In++]=zs,xr=t.id,kr=t.overflow,zs=e),e=lf(e,r.children),e.flags|=4096,e)}function Tm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Gh(t.return,e,n)}function fh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function uv(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Yt(t,e,r.children,n),r=pt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Tm(t,n,e);else if(t.tag===19)Tm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(nt(pt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&lu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),fh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&lu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}fh(e,!0,n,null,i);break;case"together":fh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ar(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),qs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(te(153));if(e.child!==null){for(t=e.child,n=ls(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ls(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function w1(t,e,n){switch(e.tag){case 3:av(e),$i();break;case 5:Ry(e);break;case 1:fn(e.type)&&nu(e);break;case 4:Jd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;nt(iu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(nt(pt,pt.current&1),e.flags|=128,null):n&e.child.childLanes?lv(t,e,n):(nt(pt,pt.current&1),t=Ar(t,e,n),t!==null?t.sibling:null);nt(pt,pt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return uv(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),nt(pt,pt.current),r)break;return null;case 22:case 23:return e.lanes=0,iv(t,e,n)}return Ar(t,e,n)}var cv,td,hv,dv;cv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};td=function(){};hv=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ds(ar.current);var i=null;switch(n){case"input":s=Sh(t,s),r=Sh(t,r),i=[];break;case"select":s=gt({},s,{value:void 0}),r=gt({},r,{value:void 0}),i=[];break;case"textarea":s=bh(t,s),r=bh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=eu)}Ah(n,r);var a;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Go.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var c=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&c!==l&&(c!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Go.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&ot("scroll",t),i||l===c||(i=[])):(i=i||[]).push(h,c))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};dv=function(t,e,n,r){n!==r&&(e.flags|=4)};function Oo(t,e){if(!dt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Kt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function x1(t,e,n){var r=e.pendingProps;switch(Kd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(e),null;case 1:return fn(e.type)&&tu(),Kt(e),null;case 3:return r=e.stateNode,Gi(),at(dn),at(Ht),tf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(wl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Un!==null&&(ud(Un),Un=null))),td(t,e),Kt(e),null;case 5:ef(e);var s=Ds(ia.current);if(n=e.type,t!==null&&e.stateNode!=null)hv(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(te(166));return Kt(e),null}if(t=Ds(ar.current),wl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[sr]=e,r[ra]=i,t=(e.mode&1)!==0,n){case"dialog":ot("cancel",r),ot("close",r);break;case"iframe":case"object":case"embed":ot("load",r);break;case"video":case"audio":for(s=0;s<jo.length;s++)ot(jo[s],r);break;case"source":ot("error",r);break;case"img":case"image":case"link":ot("error",r),ot("load",r);break;case"details":ot("toggle",r);break;case"input":Mp(r,i),ot("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ot("invalid",r);break;case"textarea":Rp(r,i),ot("invalid",r)}Ah(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&_l(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&_l(r.textContent,l,t),s=["children",""+l]):Go.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&ot("scroll",r)}switch(n){case"input":hl(r),Dp(r,i,!0);break;case"textarea":hl(r),jp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=eu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Bg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[sr]=e,t[ra]=r,cv(t,e,!1,!1),e.stateNode=t;e:{switch(a=Nh(n,r),n){case"dialog":ot("cancel",t),ot("close",t),s=r;break;case"iframe":case"object":case"embed":ot("load",t),s=r;break;case"video":case"audio":for(s=0;s<jo.length;s++)ot(jo[s],t);s=r;break;case"source":ot("error",t),s=r;break;case"img":case"image":case"link":ot("error",t),ot("load",t),s=r;break;case"details":ot("toggle",t),s=r;break;case"input":Mp(t,r),s=Sh(t,r),ot("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=gt({},r,{value:void 0}),ot("invalid",t);break;case"textarea":Rp(t,r),s=bh(t,r),ot("invalid",t);break;default:s=r}Ah(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Ug(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Wg(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ho(t,c):typeof c=="number"&&Ho(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Go.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ot("scroll",t):c!=null&&Id(t,i,c,a))}switch(n){case"input":hl(t),Dp(t,r,!1);break;case"textarea":hl(t),jp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+cs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ri(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ri(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=eu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Kt(e),null;case 6:if(t&&e.stateNode!=null)dv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(te(166));if(n=Ds(ia.current),Ds(ar.current),wl(e)){if(r=e.stateNode,n=e.memoizedProps,r[sr]=e,(i=r.nodeValue!==n)&&(t=Sn,t!==null))switch(t.tag){case 3:_l(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_l(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[sr]=e,e.stateNode=r}return Kt(e),null;case 13:if(at(pt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(dt&&kn!==null&&e.mode&1&&!(e.flags&128))Oy(),$i(),e.flags|=98560,i=!1;else if(i=wl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(te(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(te(317));i[sr]=e}else $i(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Kt(e),i=!1}else Un!==null&&(ud(Un),Un=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||pt.current&1?Ot===0&&(Ot=3):pf())),e.updateQueue!==null&&(e.flags|=4),Kt(e),null);case 4:return Gi(),td(t,e),t===null&&ta(e.stateNode.containerInfo),Kt(e),null;case 10:return Qd(e.type._context),Kt(e),null;case 17:return fn(e.type)&&tu(),Kt(e),null;case 19:if(at(pt),i=e.memoizedState,i===null)return Kt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Oo(i,!1);else{if(Ot!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=lu(t),a!==null){for(e.flags|=128,Oo(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return nt(pt,pt.current&1|2),e.child}t=t.sibling}i.tail!==null&&St()>Xi&&(e.flags|=128,r=!0,Oo(i,!1),e.lanes=4194304)}else{if(!r)if(t=lu(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Oo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!dt)return Kt(e),null}else 2*St()-i.renderingStartTime>Xi&&n!==1073741824&&(e.flags|=128,r=!0,Oo(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=St(),e.sibling=null,n=pt.current,nt(pt,r?n&1|2:n&1),e):(Kt(e),null);case 22:case 23:return ff(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?xn&1073741824&&(Kt(e),e.subtreeFlags&6&&(e.flags|=8192)):Kt(e),null;case 24:return null;case 25:return null}throw Error(te(156,e.tag))}function k1(t,e){switch(Kd(e),e.tag){case 1:return fn(e.type)&&tu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Gi(),at(dn),at(Ht),tf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ef(e),null;case 13:if(at(pt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(te(340));$i()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return at(pt),null;case 4:return Gi(),null;case 10:return Qd(e.type._context),null;case 22:case 23:return ff(),null;case 24:return null;default:return null}}var Sl=!1,Gt=!1,S1=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Oi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){yt(t,e,r)}else n.current=null}function nd(t,e,n){try{n()}catch(r){yt(t,e,r)}}var Cm=!1;function T1(t,e){if(Vh=Yl,t=yy(),qd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,h=0,m=0,p=t,y=null;t:for(;;){for(var x;p!==n||s!==0&&p.nodeType!==3||(l=a+s),p!==i||r!==0&&p.nodeType!==3||(c=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(x=p.firstChild)!==null;)y=p,p=x;for(;;){if(p===t)break t;if(y===n&&++h===s&&(l=a),y===i&&++m===r&&(c=a),(x=p.nextSibling)!==null)break;p=y,y=p.parentNode}p=x}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bh={focusedElem:t,selectionRange:n},Yl=!1,ve=e;ve!==null;)if(e=ve,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ve=t;else for(;ve!==null;){e=ve;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var C=w.memoizedProps,N=w.memoizedState,v=e.stateNode,S=v.getSnapshotBeforeUpdate(e.elementType===e.type?C:Wn(e.type,C),N);v.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(R){yt(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,ve=t;break}ve=e.return}return w=Cm,Cm=!1,w}function Uo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&nd(e,n,i)}s=s.next}while(s!==r)}}function Xu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function rd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function fv(t){var e=t.alternate;e!==null&&(t.alternate=null,fv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[sr],delete e[ra],delete e[Uh],delete e[o1],delete e[a1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function pv(t){return t.tag===5||t.tag===3||t.tag===4}function bm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||pv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=eu));else if(r!==4&&(t=t.child,t!==null))for(sd(t,e,n),t=t.sibling;t!==null;)sd(t,e,n),t=t.sibling}function id(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(id(t,e,n),t=t.sibling;t!==null;)id(t,e,n),t=t.sibling}var Lt=null,zn=!1;function qr(t,e,n){for(n=n.child;n!==null;)mv(t,e,n),n=n.sibling}function mv(t,e,n){if(or&&typeof or.onCommitFiberUnmount=="function")try{or.onCommitFiberUnmount(Wu,n)}catch{}switch(n.tag){case 5:Gt||Oi(n,e);case 6:var r=Lt,s=zn;Lt=null,qr(t,e,n),Lt=r,zn=s,Lt!==null&&(zn?(t=Lt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Lt.removeChild(n.stateNode));break;case 18:Lt!==null&&(zn?(t=Lt,n=n.stateNode,t.nodeType===8?oh(t.parentNode,n):t.nodeType===1&&oh(t,n),Zo(t)):oh(Lt,n.stateNode));break;case 4:r=Lt,s=zn,Lt=n.stateNode.containerInfo,zn=!0,qr(t,e,n),Lt=r,zn=s;break;case 0:case 11:case 14:case 15:if(!Gt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&nd(n,e,a),s=s.next}while(s!==r)}qr(t,e,n);break;case 1:if(!Gt&&(Oi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){yt(n,e,l)}qr(t,e,n);break;case 21:qr(t,e,n);break;case 22:n.mode&1?(Gt=(r=Gt)||n.memoizedState!==null,qr(t,e,n),Gt=r):qr(t,e,n);break;default:qr(t,e,n)}}function Em(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new S1),e.forEach(function(r){var s=M1.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Bn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Lt=l.stateNode,zn=!1;break e;case 3:Lt=l.stateNode.containerInfo,zn=!0;break e;case 4:Lt=l.stateNode.containerInfo,zn=!0;break e}l=l.return}if(Lt===null)throw Error(te(160));mv(i,a,s),Lt=null,zn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(h){yt(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)gv(e,t),e=e.sibling}function gv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bn(e,t),nr(t),r&4){try{Uo(3,t,t.return),Xu(3,t)}catch(C){yt(t,t.return,C)}try{Uo(5,t,t.return)}catch(C){yt(t,t.return,C)}}break;case 1:Bn(e,t),nr(t),r&512&&n!==null&&Oi(n,n.return);break;case 5:if(Bn(e,t),nr(t),r&512&&n!==null&&Oi(n,n.return),t.flags&32){var s=t.stateNode;try{Ho(s,"")}catch(C){yt(t,t.return,C)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Lg(s,i),Nh(l,a);var h=Nh(l,i);for(a=0;a<c.length;a+=2){var m=c[a],p=c[a+1];m==="style"?Ug(s,p):m==="dangerouslySetInnerHTML"?Wg(s,p):m==="children"?Ho(s,p):Id(s,m,p,h)}switch(l){case"input":Th(s,i);break;case"textarea":Vg(s,i);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?Ri(s,!!i.multiple,x,!1):y!==!!i.multiple&&(i.defaultValue!=null?Ri(s,!!i.multiple,i.defaultValue,!0):Ri(s,!!i.multiple,i.multiple?[]:"",!1))}s[ra]=i}catch(C){yt(t,t.return,C)}}break;case 6:if(Bn(e,t),nr(t),r&4){if(t.stateNode===null)throw Error(te(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(C){yt(t,t.return,C)}}break;case 3:if(Bn(e,t),nr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Zo(e.containerInfo)}catch(C){yt(t,t.return,C)}break;case 4:Bn(e,t),nr(t);break;case 13:Bn(e,t),nr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(hf=St())),r&4&&Em(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Gt=(h=Gt)||m,Bn(e,t),Gt=h):Bn(e,t),nr(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!m&&t.mode&1)for(ve=t,m=t.child;m!==null;){for(p=ve=m;ve!==null;){switch(y=ve,x=y.child,y.tag){case 0:case 11:case 14:case 15:Uo(4,y,y.return);break;case 1:Oi(y,y.return);var w=y.stateNode;if(typeof w.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(C){yt(r,n,C)}}break;case 5:Oi(y,y.return);break;case 22:if(y.memoizedState!==null){Nm(p);continue}}x!==null?(x.return=y,ve=x):Nm(p)}m=m.sibling}e:for(m=null,p=t;;){if(p.tag===5){if(m===null){m=p;try{s=p.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,c=p.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=zg("display",a))}catch(C){yt(t,t.return,C)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(C){yt(t,t.return,C)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Bn(e,t),nr(t),r&4&&Em(t);break;case 21:break;default:Bn(e,t),nr(t)}}function nr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(pv(n)){var r=n;break e}n=n.return}throw Error(te(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ho(s,""),r.flags&=-33);var i=bm(t);id(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=bm(t);sd(t,l,a);break;default:throw Error(te(161))}}catch(c){yt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function C1(t,e,n){ve=t,yv(t)}function yv(t,e,n){for(var r=(t.mode&1)!==0;ve!==null;){var s=ve,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Sl;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Gt;l=Sl;var h=Gt;if(Sl=a,(Gt=c)&&!h)for(ve=s;ve!==null;)a=ve,c=a.child,a.tag===22&&a.memoizedState!==null?Om(s):c!==null?(c.return=a,ve=c):Om(s);for(;i!==null;)ve=i,yv(i),i=i.sibling;ve=s,Sl=l,Gt=h}Am(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ve=i):Am(t)}}function Am(t){for(;ve!==null;){var e=ve;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Gt||Xu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Gt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Wn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&dm(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}dm(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var m=h.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&Zo(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}Gt||e.flags&512&&rd(e)}catch(y){yt(e,e.return,y)}}if(e===t){ve=null;break}if(n=e.sibling,n!==null){n.return=e.return,ve=n;break}ve=e.return}}function Nm(t){for(;ve!==null;){var e=ve;if(e===t){ve=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ve=n;break}ve=e.return}}function Om(t){for(;ve!==null;){var e=ve;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Xu(4,e)}catch(c){yt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){yt(e,s,c)}}var i=e.return;try{rd(e)}catch(c){yt(e,i,c)}break;case 5:var a=e.return;try{rd(e)}catch(c){yt(e,a,c)}}}catch(c){yt(e,e.return,c)}if(e===t){ve=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ve=l;break}ve=e.return}}var b1=Math.ceil,hu=Ir.ReactCurrentDispatcher,uf=Ir.ReactCurrentOwner,Rn=Ir.ReactCurrentBatchConfig,We=0,Rt=null,Et=null,Vt=0,xn=0,Ii=ms(0),Ot=0,ua=null,qs=0,Qu=0,cf=0,qo=null,ln=null,hf=0,Xi=1/0,vr=null,du=!1,od=null,os=null,Tl=!1,es=null,fu=0,$o=0,ad=null,Wl=-1,zl=0;function tn(){return We&6?St():Wl!==-1?Wl:Wl=St()}function as(t){return t.mode&1?We&2&&Vt!==0?Vt&-Vt:u1.transition!==null?(zl===0&&(zl=ty()),zl):(t=Ge,t!==0||(t=window.event,t=t===void 0?16:ly(t.type)),t):1}function Kn(t,e,n,r){if(50<$o)throw $o=0,ad=null,Error(te(185));Ta(t,n,r),(!(We&2)||t!==Rt)&&(t===Rt&&(!(We&2)&&(Qu|=n),Ot===4&&Zr(t,Vt)),pn(t,r),n===1&&We===0&&!(e.mode&1)&&(Xi=St()+500,Ku&&gs()))}function pn(t,e){var n=t.callbackNode;uw(t,e);var r=Ql(t,t===Rt?Vt:0);if(r===0)n!==null&&Vp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Vp(n),e===1)t.tag===0?l1(Im.bind(null,t)):Ey(Im.bind(null,t)),s1(function(){!(We&6)&&gs()}),n=null;else{switch(ny(r)){case 1:n=jd;break;case 4:n=Jg;break;case 16:n=Xl;break;case 536870912:n=ey;break;default:n=Xl}n=Cv(n,vv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function vv(t,e){if(Wl=-1,zl=0,We&6)throw Error(te(327));var n=t.callbackNode;if(Bi()&&t.callbackNode!==n)return null;var r=Ql(t,t===Rt?Vt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=pu(t,r);else{e=r;var s=We;We|=2;var i=wv();(Rt!==t||Vt!==e)&&(vr=null,Xi=St()+500,js(t,e));do try{N1();break}catch(l){_v(t,l)}while(!0);Xd(),hu.current=i,We=s,Et!==null?e=0:(Rt=null,Vt=0,e=Ot)}if(e!==0){if(e===2&&(s=Dh(t),s!==0&&(r=s,e=ld(t,s))),e===1)throw n=ua,js(t,0),Zr(t,r),pn(t,St()),n;if(e===6)Zr(t,r);else{if(s=t.current.alternate,!(r&30)&&!E1(s)&&(e=pu(t,r),e===2&&(i=Dh(t),i!==0&&(r=i,e=ld(t,i))),e===1))throw n=ua,js(t,0),Zr(t,r),pn(t,St()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(te(345));case 2:Os(t,ln,vr);break;case 3:if(Zr(t,r),(r&130023424)===r&&(e=hf+500-St(),10<e)){if(Ql(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){tn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=zh(Os.bind(null,t,ln,vr),e);break}Os(t,ln,vr);break;case 4:if(Zr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-$n(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=St()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*b1(r/1960))-r,10<r){t.timeoutHandle=zh(Os.bind(null,t,ln,vr),r);break}Os(t,ln,vr);break;case 5:Os(t,ln,vr);break;default:throw Error(te(329))}}}return pn(t,St()),t.callbackNode===n?vv.bind(null,t):null}function ld(t,e){var n=qo;return t.current.memoizedState.isDehydrated&&(js(t,e).flags|=256),t=pu(t,e),t!==2&&(e=ln,ln=n,e!==null&&ud(e)),t}function ud(t){ln===null?ln=t:ln.push.apply(ln,t)}function E1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Hn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Zr(t,e){for(e&=~cf,e&=~Qu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-$n(e),r=1<<n;t[n]=-1,e&=~r}}function Im(t){if(We&6)throw Error(te(327));Bi();var e=Ql(t,0);if(!(e&1))return pn(t,St()),null;var n=pu(t,e);if(t.tag!==0&&n===2){var r=Dh(t);r!==0&&(e=r,n=ld(t,r))}if(n===1)throw n=ua,js(t,0),Zr(t,e),pn(t,St()),n;if(n===6)throw Error(te(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Os(t,ln,vr),pn(t,St()),null}function df(t,e){var n=We;We|=1;try{return t(e)}finally{We=n,We===0&&(Xi=St()+500,Ku&&gs())}}function $s(t){es!==null&&es.tag===0&&!(We&6)&&Bi();var e=We;We|=1;var n=Rn.transition,r=Ge;try{if(Rn.transition=null,Ge=1,t)return t()}finally{Ge=r,Rn.transition=n,We=e,!(We&6)&&gs()}}function ff(){xn=Ii.current,at(Ii)}function js(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,r1(n)),Et!==null)for(n=Et.return;n!==null;){var r=n;switch(Kd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&tu();break;case 3:Gi(),at(dn),at(Ht),tf();break;case 5:ef(r);break;case 4:Gi();break;case 13:at(pt);break;case 19:at(pt);break;case 10:Qd(r.type._context);break;case 22:case 23:ff()}n=n.return}if(Rt=t,Et=t=ls(t.current,null),Vt=xn=e,Ot=0,ua=null,cf=Qu=qs=0,ln=qo=null,Ms!==null){for(e=0;e<Ms.length;e++)if(n=Ms[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Ms=null}return t}function _v(t,e){do{var n=Et;try{if(Xd(),Ll.current=cu,uu){for(var r=mt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}uu=!1}if(Us=0,Dt=Nt=mt=null,zo=!1,oa=0,uf.current=null,n===null||n.return===null){Ot=1,ua=e,Et=null;break}e:{var i=t,a=n.return,l=n,c=e;if(e=Vt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,m=l,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var y=m.alternate;y?(m.updateQueue=y.updateQueue,m.memoizedState=y.memoizedState,m.lanes=y.lanes):(m.updateQueue=null,m.memoizedState=null)}var x=vm(a);if(x!==null){x.flags&=-257,_m(x,a,l,i,e),x.mode&1&&ym(i,h,e),e=x,c=h;var w=e.updateQueue;if(w===null){var C=new Set;C.add(c),e.updateQueue=C}else w.add(c);break e}else{if(!(e&1)){ym(i,h,e),pf();break e}c=Error(te(426))}}else if(dt&&l.mode&1){var N=vm(a);if(N!==null){!(N.flags&65536)&&(N.flags|=256),_m(N,a,l,i,e),Gd(Hi(c,l));break e}}i=c=Hi(c,l),Ot!==4&&(Ot=2),qo===null?qo=[i]:qo.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=nv(i,c,e);hm(i,v);break e;case 1:l=c;var S=i.type,k=i.stateNode;if(!(i.flags&128)&&(typeof S.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(os===null||!os.has(k)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=rv(i,l,e);hm(i,R);break e}}i=i.return}while(i!==null)}kv(n)}catch(E){e=E,Et===n&&n!==null&&(Et=n=n.return);continue}break}while(!0)}function wv(){var t=hu.current;return hu.current=cu,t===null?cu:t}function pf(){(Ot===0||Ot===3||Ot===2)&&(Ot=4),Rt===null||!(qs&268435455)&&!(Qu&268435455)||Zr(Rt,Vt)}function pu(t,e){var n=We;We|=2;var r=wv();(Rt!==t||Vt!==e)&&(vr=null,js(t,e));do try{A1();break}catch(s){_v(t,s)}while(!0);if(Xd(),We=n,hu.current=r,Et!==null)throw Error(te(261));return Rt=null,Vt=0,Ot}function A1(){for(;Et!==null;)xv(Et)}function N1(){for(;Et!==null&&!ew();)xv(Et)}function xv(t){var e=Tv(t.alternate,t,xn);t.memoizedProps=t.pendingProps,e===null?kv(t):Et=e,uf.current=null}function kv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=k1(n,e),n!==null){n.flags&=32767,Et=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ot=6,Et=null;return}}else if(n=x1(n,e,xn),n!==null){Et=n;return}if(e=e.sibling,e!==null){Et=e;return}Et=e=t}while(e!==null);Ot===0&&(Ot=5)}function Os(t,e,n){var r=Ge,s=Rn.transition;try{Rn.transition=null,Ge=1,O1(t,e,n,r)}finally{Rn.transition=s,Ge=r}return null}function O1(t,e,n,r){do Bi();while(es!==null);if(We&6)throw Error(te(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(te(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(cw(t,i),t===Rt&&(Et=Rt=null,Vt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Tl||(Tl=!0,Cv(Xl,function(){return Bi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Rn.transition,Rn.transition=null;var a=Ge;Ge=1;var l=We;We|=4,uf.current=null,T1(t,n),gv(n,t),Qw(Bh),Yl=!!Vh,Bh=Vh=null,t.current=n,C1(n),tw(),We=l,Ge=a,Rn.transition=i}else t.current=n;if(Tl&&(Tl=!1,es=t,fu=s),i=t.pendingLanes,i===0&&(os=null),sw(n.stateNode),pn(t,St()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(du)throw du=!1,t=od,od=null,t;return fu&1&&t.tag!==0&&Bi(),i=t.pendingLanes,i&1?t===ad?$o++:($o=0,ad=t):$o=0,gs(),null}function Bi(){if(es!==null){var t=ny(fu),e=Rn.transition,n=Ge;try{if(Rn.transition=null,Ge=16>t?16:t,es===null)var r=!1;else{if(t=es,es=null,fu=0,We&6)throw Error(te(331));var s=We;for(We|=4,ve=t.current;ve!==null;){var i=ve,a=i.child;if(ve.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var h=l[c];for(ve=h;ve!==null;){var m=ve;switch(m.tag){case 0:case 11:case 15:Uo(8,m,i)}var p=m.child;if(p!==null)p.return=m,ve=p;else for(;ve!==null;){m=ve;var y=m.sibling,x=m.return;if(fv(m),m===h){ve=null;break}if(y!==null){y.return=x,ve=y;break}ve=x}}}var w=i.alternate;if(w!==null){var C=w.child;if(C!==null){w.child=null;do{var N=C.sibling;C.sibling=null,C=N}while(C!==null)}}ve=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,ve=a;else e:for(;ve!==null;){if(i=ve,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Uo(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,ve=v;break e}ve=i.return}}var S=t.current;for(ve=S;ve!==null;){a=ve;var k=a.child;if(a.subtreeFlags&2064&&k!==null)k.return=a,ve=k;else e:for(a=S;ve!==null;){if(l=ve,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Xu(9,l)}}catch(E){yt(l,l.return,E)}if(l===a){ve=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,ve=R;break e}ve=l.return}}if(We=s,gs(),or&&typeof or.onPostCommitFiberRoot=="function")try{or.onPostCommitFiberRoot(Wu,t)}catch{}r=!0}return r}finally{Ge=n,Rn.transition=e}}return!1}function Pm(t,e,n){e=Hi(n,e),e=nv(t,e,1),t=is(t,e,1),e=tn(),t!==null&&(Ta(t,1,e),pn(t,e))}function yt(t,e,n){if(t.tag===3)Pm(t,t,n);else for(;e!==null;){if(e.tag===3){Pm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(os===null||!os.has(r))){t=Hi(n,t),t=rv(e,t,1),e=is(e,t,1),t=tn(),e!==null&&(Ta(e,1,t),pn(e,t));break}}e=e.return}}function I1(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=tn(),t.pingedLanes|=t.suspendedLanes&n,Rt===t&&(Vt&n)===n&&(Ot===4||Ot===3&&(Vt&130023424)===Vt&&500>St()-hf?js(t,0):cf|=n),pn(t,e)}function Sv(t,e){e===0&&(t.mode&1?(e=pl,pl<<=1,!(pl&130023424)&&(pl=4194304)):e=1);var n=tn();t=Er(t,e),t!==null&&(Ta(t,e,n),pn(t,n))}function P1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Sv(t,n)}function M1(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(te(314))}r!==null&&r.delete(e),Sv(t,n)}var Tv;Tv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||dn.current)cn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return cn=!1,w1(t,e,n);cn=!!(t.flags&131072)}else cn=!1,dt&&e.flags&1048576&&Ay(e,su,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Bl(t,e),t=e.pendingProps;var s=qi(e,Ht.current);Vi(e,n),s=rf(null,e,r,t,s,n);var i=sf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,fn(r)?(i=!0,nu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Zd(e),s.updater=Hu,e.stateNode=s,s._reactInternals=e,Xh(e,r,t,n),e=Zh(null,e,r,!0,i,n)):(e.tag=0,dt&&i&&$d(e),Yt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Bl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=R1(r),t=Wn(r,t),s){case 0:e=Yh(null,e,r,t,n);break e;case 1:e=km(null,e,r,t,n);break e;case 11:e=wm(null,e,r,t,n);break e;case 14:e=xm(null,e,r,Wn(r.type,t),n);break e}throw Error(te(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wn(r,s),Yh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wn(r,s),km(t,e,r,s,n);case 3:e:{if(av(e),t===null)throw Error(te(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Dy(t,e),au(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Hi(Error(te(423)),e),e=Sm(t,e,r,n,s);break e}else if(r!==s){s=Hi(Error(te(424)),e),e=Sm(t,e,r,n,s);break e}else for(kn=ss(e.stateNode.containerInfo.firstChild),Sn=e,dt=!0,Un=null,n=Py(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($i(),r===s){e=Ar(t,e,n);break e}Yt(t,e,r,n)}e=e.child}return e;case 5:return Ry(e),t===null&&Kh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Wh(r,s)?a=null:i!==null&&Wh(r,i)&&(e.flags|=32),ov(t,e),Yt(t,e,a,n),e.child;case 6:return t===null&&Kh(e),null;case 13:return lv(t,e,n);case 4:return Jd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ki(e,null,r,n):Yt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wn(r,s),wm(t,e,r,s,n);case 7:return Yt(t,e,e.pendingProps,n),e.child;case 8:return Yt(t,e,e.pendingProps.children,n),e.child;case 12:return Yt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,nt(iu,r._currentValue),r._currentValue=a,i!==null)if(Hn(i.value,a)){if(i.children===s.children&&!dn.current){e=Ar(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Sr(-1,n&-n),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var m=h.pending;m===null?c.next=c:(c.next=m.next,m.next=c),h.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Gh(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(te(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Gh(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Yt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Vi(e,n),s=Ln(s),r=r(s),e.flags|=1,Yt(t,e,r,n),e.child;case 14:return r=e.type,s=Wn(r,e.pendingProps),s=Wn(r.type,s),xm(t,e,r,s,n);case 15:return sv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wn(r,s),Bl(t,e),e.tag=1,fn(r)?(t=!0,nu(e)):t=!1,Vi(e,n),tv(e,r,s),Xh(e,r,s,n),Zh(null,e,r,!0,t,n);case 19:return uv(t,e,n);case 22:return iv(t,e,n)}throw Error(te(156,e.tag))};function Cv(t,e){return Zg(t,e)}function D1(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(t,e,n,r){return new D1(t,e,n,r)}function mf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function R1(t){if(typeof t=="function")return mf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Md)return 11;if(t===Dd)return 14}return 2}function ls(t,e){var n=t.alternate;return n===null?(n=Pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ul(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")mf(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case xi:return Fs(n.children,s,i,e);case Pd:a=8,s|=8;break;case _h:return t=Pn(12,n,e,s|2),t.elementType=_h,t.lanes=i,t;case wh:return t=Pn(13,n,e,s),t.elementType=wh,t.lanes=i,t;case xh:return t=Pn(19,n,e,s),t.elementType=xh,t.lanes=i,t;case Rg:return Yu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Mg:a=10;break e;case Dg:a=9;break e;case Md:a=11;break e;case Dd:a=14;break e;case Hr:a=16,r=null;break e}throw Error(te(130,t==null?t:typeof t,""))}return e=Pn(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Fs(t,e,n,r){return t=Pn(7,t,r,e),t.lanes=n,t}function Yu(t,e,n,r){return t=Pn(22,t,r,e),t.elementType=Rg,t.lanes=n,t.stateNode={isHidden:!1},t}function ph(t,e,n){return t=Pn(6,t,null,e),t.lanes=n,t}function mh(t,e,n){return e=Pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function j1(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xc(0),this.expirationTimes=Xc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function gf(t,e,n,r,s,i,a,l,c){return t=new j1(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Pn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zd(i),t}function F1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function bv(t){if(!t)return hs;t=t._reactInternals;e:{if(ri(t)!==t||t.tag!==1)throw Error(te(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(fn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(te(171))}if(t.tag===1){var n=t.type;if(fn(n))return by(t,n,e)}return e}function Ev(t,e,n,r,s,i,a,l,c){return t=gf(n,r,!0,t,s,i,a,l,c),t.context=bv(null),n=t.current,r=tn(),s=as(n),i=Sr(r,s),i.callback=e??null,is(n,i,s),t.current.lanes=s,Ta(t,s,r),pn(t,r),t}function Zu(t,e,n,r){var s=e.current,i=tn(),a=as(s);return n=bv(n),e.context===null?e.context=n:e.pendingContext=n,e=Sr(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=is(s,e,a),t!==null&&(Kn(t,s,a,i),Fl(t,s,a)),a}function mu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Mm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function yf(t,e){Mm(t,e),(t=t.alternate)&&Mm(t,e)}function L1(){return null}var Av=typeof reportError=="function"?reportError:function(t){console.error(t)};function vf(t){this._internalRoot=t}Ju.prototype.render=vf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(te(409));Zu(t,e,null,null)};Ju.prototype.unmount=vf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$s(function(){Zu(null,t,null,null)}),e[br]=null}};function Ju(t){this._internalRoot=t}Ju.prototype.unstable_scheduleHydration=function(t){if(t){var e=iy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Yr.length&&e!==0&&e<Yr[n].priority;n++);Yr.splice(n,0,t),n===0&&ay(t)}};function _f(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ec(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Dm(){}function V1(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=mu(a);i.call(h)}}var a=Ev(e,r,t,0,null,!1,!1,"",Dm);return t._reactRootContainer=a,t[br]=a.current,ta(t.nodeType===8?t.parentNode:t),$s(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=mu(c);l.call(h)}}var c=gf(t,0,!1,null,null,!1,!1,"",Dm);return t._reactRootContainer=c,t[br]=c.current,ta(t.nodeType===8?t.parentNode:t),$s(function(){Zu(e,c,n,r)}),c}function tc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=mu(a);l.call(c)}}Zu(e,a,t,s)}else a=V1(n,e,t,s,r);return mu(a)}ry=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ro(e.pendingLanes);n!==0&&(Fd(e,n|1),pn(e,St()),!(We&6)&&(Xi=St()+500,gs()))}break;case 13:$s(function(){var r=Er(t,1);if(r!==null){var s=tn();Kn(r,t,1,s)}}),yf(t,1)}};Ld=function(t){if(t.tag===13){var e=Er(t,134217728);if(e!==null){var n=tn();Kn(e,t,134217728,n)}yf(t,134217728)}};sy=function(t){if(t.tag===13){var e=as(t),n=Er(t,e);if(n!==null){var r=tn();Kn(n,t,e,r)}yf(t,e)}};iy=function(){return Ge};oy=function(t,e){var n=Ge;try{return Ge=t,e()}finally{Ge=n}};Ih=function(t,e,n){switch(e){case"input":if(Th(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=$u(r);if(!s)throw Error(te(90));Fg(r),Th(r,s)}}}break;case"textarea":Vg(t,n);break;case"select":e=n.value,e!=null&&Ri(t,!!n.multiple,e,!1)}};Kg=df;Gg=$s;var B1={usingClientEntryPoint:!1,Events:[ba,Ci,$u,qg,$g,df]},Io={findFiberByHostInstance:Ps,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},W1={bundleType:Io.bundleType,version:Io.version,rendererPackageName:Io.rendererPackageName,rendererConfig:Io.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ir.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Qg(t),t===null?null:t.stateNode},findFiberByHostInstance:Io.findFiberByHostInstance||L1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cl.isDisabled&&Cl.supportsFiber)try{Wu=Cl.inject(W1),or=Cl}catch{}}Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B1;Cn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_f(e))throw Error(te(200));return F1(t,e,null,n)};Cn.createRoot=function(t,e){if(!_f(t))throw Error(te(299));var n=!1,r="",s=Av;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=gf(t,1,!1,null,null,n,!1,r,s),t[br]=e.current,ta(t.nodeType===8?t.parentNode:t),new vf(e)};Cn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(te(188)):(t=Object.keys(t).join(","),Error(te(268,t)));return t=Qg(e),t=t===null?null:t.stateNode,t};Cn.flushSync=function(t){return $s(t)};Cn.hydrate=function(t,e,n){if(!ec(e))throw Error(te(200));return tc(null,t,e,!0,n)};Cn.hydrateRoot=function(t,e,n){if(!_f(t))throw Error(te(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=Av;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Ev(e,null,t,1,n??null,s,!1,i,a),t[br]=e.current,ta(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ju(e)};Cn.render=function(t,e,n){if(!ec(e))throw Error(te(200));return tc(null,t,e,!1,n)};Cn.unmountComponentAtNode=function(t){if(!ec(t))throw Error(te(40));return t._reactRootContainer?($s(function(){tc(null,null,t,!1,function(){t._reactRootContainer=null,t[br]=null})}),!0):!1};Cn.unstable_batchedUpdates=df;Cn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ec(n))throw Error(te(200));if(t==null||t._reactInternals===void 0)throw Error(te(38));return tc(t,e,n,!1,r)};Cn.version="18.3.1-next-f1338f8080-20240426";function Nv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Nv)}catch(t){console.error(t)}}Nv(),Ng.exports=Cn;var z1=Ng.exports,Ov,Rm=z1;Ov=Rm.createRoot,Rm.hydrateRoot;const cd={id:"inst-1",name:"Trumpet",transposition:"BB",range:{lowMidi:58,highMidi:82}},U1={style:"Any",skillFocus:"patterns",scaleId:"major",keyTonic:"C",tempo:100,timeSig:[4,4],swing:!0,subdivision:"8ths",difficulty:4,lengthBars:4,instrument:cd,keyMode:"rotate",avoidedKeys:[],preferredKeys:[],lastPatternId:null},we={bgPrimary:"#14213D",bgDeep:"#000000",surfacePrimary:"#FFFFFF",surfaceSecondary:"#E5E5E5",accent:"#FCA311",textOnDark:"#FFFFFF",textOnLight:"#0B0B0B",divider:"#E5E5E5"},Oe={title:{fontSize:"1.15rem",fontWeight:600,color:we.textOnDark},sectionTitle:{fontSize:"1rem",fontWeight:600,color:we.textOnLight},body:{fontSize:"0.95rem",color:we.textOnLight},label:{fontSize:"0.85rem",fontWeight:600,color:"#2A2F36"},mono:{fontFamily:'"Consolas", "Courier New", monospace'}},be={xs:8,sm:12,md:16,lg:24},on={cardRadius:18,controlRadius:14,chipRadius:12},q1={card:"0 18px 38px rgba(0, 0, 0, 0.2)"},bt={borderRadius:on.controlRadius,border:`1px solid ${we.divider}`,padding:`${be.xs}px ${be.sm}px`,background:we.surfacePrimary,color:we.textOnLight};function Jt({children:t,style:e}){return T.jsx("div",{style:{background:we.surfacePrimary,border:`1px solid ${we.divider}`,borderRadius:on.cardRadius,padding:be.md,color:we.textOnLight,boxShadow:q1.card,...e},children:t})}function Ze({label:t,children:e}){return T.jsxs("label",{style:{display:"grid",gap:be.xs,...Oe.label},children:[t,e]})}function Qi({label:t,value:e,min:n,max:r,step:s=1,onChange:i}){return T.jsxs("div",{style:{display:"grid",gap:be.xs},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",...Oe.label},children:[T.jsx("span",{children:t}),T.jsx("span",{style:{color:we.textOnLight},children:e})]}),T.jsx("input",{type:"range",min:n,max:r,step:s,value:e,onChange:a=>i(Number(a.target.value)),style:{accentColor:we.accent,borderRadius:on.controlRadius}})]})}function Ls({options:t,selectedKey:e,selectedKeys:n,multi:r,variant:s="accent",onSelect:i}){return T.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:be.xs},children:t.map(a=>{const l=r?n==null?void 0:n.has(a.key):a.key===e,c=s==="accent"?we.accent:we.surfaceSecondary,h=s==="accent"?we.accent:we.divider,m=s==="accent"?"#1b1b1b":we.textOnLight,p=s==="accent"?we.surfaceSecondary:we.surfacePrimary;return T.jsx("button",{onClick:()=>i(a.key),style:{background:l?c:p,color:l?m:we.textOnLight,border:`1px solid ${l?h:we.divider}`,borderRadius:on.chipRadius,padding:`${be.xs/2}px ${be.sm}px`,cursor:"pointer",...Oe.body},children:a.label},a.key)})})}const $1=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function K1(t){const e=t.match(/^([A-G])(#{1}|b{1})?(\d)$/);if(!e)return 60;const n={C:0,D:2,E:4,F:5,G:7,A:9,B:11}[e[1]],r=e[2]==="#"?1:e[2]==="b"?-1:0;return(Number(e[3])+1)*12+n+r}function Pi(t){const e=Math.floor(t/12)-1,n=(t%12+12)%12;return`${$1[n]}${e}`}function gu(t,e){const r={CONCERT:0,BB:2,EB:9,F:7}[e]??0;return t+r}const jm={Trumpet:{id:"inst-1",name:"Trumpet",transposition:"BB",range:{lowMidi:58,highMidi:82}},"Alto Sax":{id:"inst-2",name:"Alto Sax",transposition:"EB",range:{lowMidi:56,highMidi:82}},"Tenor Sax":{id:"inst-3",name:"Tenor Sax",transposition:"BB",range:{lowMidi:50,highMidi:78}},Other:{id:"inst-4",name:"Other",transposition:"CONCERT",range:{lowMidi:48,highMidi:84}}},Fm=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"];function G1({instrument:t,onChange:e,preferredKeys:n,avoidedKeys:r,onPreferredKeysChange:s,onAvoidedKeysChange:i}){const a=Pi(t.range.lowMidi),l=Pi(t.range.highMidi),c=Pi(gu(t.range.lowMidi,t.transposition)),h=Pi(gu(t.range.highMidi,t.transposition)),m=(p,y)=>p.includes(y)?p.filter(x=>x!==y):[...p,y];return T.jsxs("div",{className:"stack",children:[T.jsx("div",{style:Oe.title,children:"Setup"}),T.jsx("div",{style:{color:"#A6ACB3",marginBottom:24},children:"Instrument, transposition, and comfortable range."}),T.jsx(Jt,{children:T.jsxs("div",{className:"stack",children:[T.jsx("div",{style:Oe.sectionTitle,children:"Instrument"}),T.jsx(Ze,{label:"Instrument",children:T.jsx("select",{value:t.name,onChange:p=>e({...jm[p.target.value],id:t.id}),style:bt,children:Object.keys(jm).map(p=>T.jsx("option",{children:p},p))})}),T.jsxs("div",{className:"row",children:[T.jsx(Ze,{label:"Transposition",children:T.jsxs("select",{value:t.transposition,onChange:p=>e({...t,transposition:p.target.value}),style:bt,children:[T.jsx("option",{value:"CONCERT",children:"Concert"}),T.jsx("option",{value:"BB",children:"Bb"}),T.jsx("option",{value:"EB",children:"Eb"}),T.jsx("option",{value:"F",children:"F"})]})}),T.jsx(Ze,{label:"Custom Transposition",children:T.jsx("input",{type:"text",placeholder:"e.g. A",style:bt,onBlur:p=>p.target.value?e({...t,transposition:p.target.value.toUpperCase()}):null})})]}),T.jsx("div",{style:Oe.sectionTitle,children:"Comfortable Range"}),T.jsxs("div",{className:"row",children:[T.jsx(Qi,{label:"Lowest MIDI",value:t.range.lowMidi,min:36,max:96,onChange:p=>e({...t,range:{...t.range,lowMidi:p}})}),T.jsx(Qi,{label:"Highest MIDI",value:t.range.highMidi,min:36,max:96,onChange:p=>e({...t,range:{...t.range,highMidi:p}})})]}),T.jsxs("div",{className:"row",children:[T.jsx(Ze,{label:"Lowest MIDI",children:T.jsx("input",{type:"number",value:t.range.lowMidi,style:bt,onChange:p=>e({...t,range:{...t.range,lowMidi:Number(p.target.value)}})})}),T.jsx(Ze,{label:"Highest MIDI",children:T.jsx("input",{type:"number",value:t.range.highMidi,style:bt,onChange:p=>e({...t,range:{...t.range,highMidi:Number(p.target.value)}})})})]}),T.jsx("div",{style:{fontSize:"0.9rem",color:"#5A5F66"},children:"C4=60"}),T.jsxs("div",{style:{fontSize:"0.9rem",color:"#2A2F36"},children:["Concert range: ",a,"",l," | Transposed: ",c,"",h]}),T.jsx("div",{style:Oe.sectionTitle,children:"Key Preferences"}),T.jsx(Ze,{label:"Preferred keys",children:T.jsx(Ls,{options:Fm.map(p=>({key:p,label:p})),selectedKeys:new Set(n),multi:!0,onSelect:p=>s(m(n,p))})}),T.jsx(Ze,{label:"Keys to avoid",children:T.jsx(Ls,{options:Fm.map(p=>({key:p,label:p})),selectedKeys:new Set(r),multi:!0,onSelect:p=>i(m(r,p))})})]})})]})}const hd=[{id:"major",name:"Major",formula:[0,2,4,5,7,9,11],tags:["diatonic"]},{id:"natural-minor",name:"Natural Minor",formula:[0,2,3,5,7,8,10],tags:["diatonic"]},{id:"harmonic-minor",name:"Harmonic Minor",formula:[0,2,3,5,7,8,11],tags:["diatonic"]},{id:"melodic-minor",name:"Melodic Minor",formula:[0,2,3,5,7,9,11],tags:["diatonic"]},{id:"dorian",name:"Dorian",formula:[0,2,3,5,7,9,10],tags:["mode"]},{id:"mixolydian",name:"Mixolydian",formula:[0,2,4,5,7,9,10],tags:["mode"]},{id:"blues",name:"Blues",formula:[0,3,5,6,7,10],tags:["blues"]},{id:"minor-pent",name:"Minor Pentatonic",formula:[0,3,5,7,10],tags:["pentatonic"]},{id:"major-pent",name:"Major Pentatonic",formula:[0,2,4,7,9],tags:["pentatonic"]},{id:"bebop-major",name:"Bebop Major",formula:[0,2,4,5,7,8,9,11],tags:["bebop"]},{id:"bebop-dominant",name:"Bebop Dominant",formula:[0,2,4,5,7,9,10,11],tags:["bebop"]}];function H1(t){return hd.find(e=>e.id===t)??hd[0]}const $r={scaleFragments:[{id:"frag-123",degrees:[1,2,3]},{id:"frag-321",degrees:[3,2,1]},{id:"frag-1323",degrees:[1,3,2,3]},{id:"frag-1235",degrees:[1,2,3,5]}],sequences:[{id:"seq-123",degrees:[1,2,3]},{id:"seq-234",degrees:[2,3,4]},{id:"seq-345",degrees:[3,4,5]}],arpeggios:[{id:"arp-135",degrees:[1,3,5,3]},{id:"arp-153",degrees:[1,5,3,1]},{id:"arp-1-3-5-7",degrees:[1,3,5,7]}],intervals:[{id:"int-3rds",leap:2},{id:"int-4ths",leap:3},{id:"int-5ths",leap:4},{id:"int-6ths",leap:5}]};function Iv(t){let e=2166136261;for(let n=0;n<t.length;n+=1)e^=t.charCodeAt(n),e=Math.imul(e,16777619);return function(){e+=1831565813;let r=Math.imul(e^e>>>15,1|e);return r^=r+Math.imul(r^r>>>7,61|r),((r^r>>>14)>>>0)/4294967296}}function Lm(t,e){return e[Math.floor(t()*e.length)]}function X1(t,e,n){const r=Iv(t+":tokens"),s=[];for(let i=0;i<e.length;i+=1){const a=e[i];if(n==="Blues"&&(a.degree===3||a.degree===5||a.degree===7)){s.push({...a,alteration:"b",role:"approach"});continue}if(n==="Bebop"&&r()>.7){const l=a.degree%7+1;s.push(a,{degree:l,alteration:"natural",role:"passing"});continue}s.push(a)}return s}function Q1(t,e){const n=[];return e==="flexibility"&&n.push("mostly slur, light tongue on attacks"),e==="speed"&&n.push("short tongued bursts, keep air steady"),e==="accuracy"&&n.push("separate notes, clean attacks"),e==="phrasing"&&n.push("shape in 2-bar arcs, breathe on bar lines"),t==="Highlife"&&n.push("offbeat accents, light tongue"),t==="Bebop"&&n.push("even 8ths, accent beat 2 and 4"),t==="Blues"&&n.push("lean into b3 and b7"),t==="Jazz"&&n.push("guide tones on strong beats"),n}function Y1(t,e,n,r){const s=e==="16ths"?.25:e==="triplets"?.3333333333333333:.5,i=[];for(let a=0;a<t.length;a+=1){const l=a*s,h=r&&e==="8ths"&&a%2===0?s*1.35:s*.65;i.push({midi:t[a],startBeats:l,durationBeats:h,velocity:.85,articulation:"tongue"})}return i}const Z1=["do","re","mi","fa","sol","la","ti"],Vm={do:"di",re:"ri",mi:"mi#",fa:"fi",sol:"si",la:"li",ti:"ti#"},J1={re:"ra",mi:"me",fa:"fe",sol:"se",la:"le",ti:"te"};function ex(t){return t==="bb"?-2:t==="b"?-1:t==="#"?1:t==="x"?2:0}function tx(t){const e=Z1[t.degree-1];return t.alteration==="natural"?e:t.alteration==="#"?Vm[e]??`${e}#`:t.alteration==="x"?`${Vm[e]??e}#`:t.alteration==="b"?J1[e]??`b${e}`:`bb${e}`}function nx(t){return`${t.alteration==="natural"?"":t.alteration==="bb"?"bb":t.alteration==="b"?"b":t.alteration==="#"?"#":"x"}${t.degree}`}function rx(t,e,n,r){const s=[];for(let i=-2;i<=8;i+=1)for(let a=0;a<e.length;a+=1){const l=t+e[a]+i*12;l>=n&&l<=r&&s.push(l)}return s.sort((i,a)=>i-a)}function sx(t){const e={};for(let n=0;n<t.length;n+=1)e[n+1]=t[n];return e}function ix(t){const e=[0,2,4,5,7,9,11],n={};for(let r=0;r<7;r+=1){const s=t[r]-e[r];n[r+1]=s===-2?"bb":s===-1?"b":s===1?"#":s===2?"x":"natural"}return n}function ox(t,e,n,r,s,i,a){const l=((t.degree-1)%n.length+n.length)%n.length,c=(e+n[l]+ex(t.alteration))%12,h=[];for(let y=r;y<=s;y+=1)y%12===c&&h.push(y);if(h.length===0)return e;if(i===null)return h[Math.floor(h.length/2)];let m=h[0],p=Math.abs(m-i);for(const y of h){const x=Math.abs(y-i);x<p&&(m=y,p=x)}if(p<=a)return m;for(const y of h)if(Math.abs(y-i)<=a)return y;return m}function ax(t,e,n){const r=t.subdivision==="16ths"?4:t.subdivision==="triplets"?3:2,s=t.lengthBars*t.timeSig[0]*r,a=(()=>{const c=t.skillFocus==="flexibility"?[...$r.arpeggios,...$r.scaleFragments]:t.skillFocus==="speed"?[...$r.scaleFragments,...$r.sequences]:t.skillFocus==="accuracy"?[...$r.scaleFragments,...$r.intervals]:[...$r.scaleFragments,...$r.sequences],h=Lm(e,c);return t.lastPatternId&&h.id===t.lastPatternId?Lm(e,c):h})(),l=[];for(;l.length<s;)if("degrees"in a)l.push(...a.degrees);else{const c=1+Math.floor(e()*n);l.push(c,c+a.leap)}return{degrees:l.slice(0,s),patternId:a.id}}function lx(t,e,n){const r=t.subdivision==="16ths"?4:t.subdivision==="triplets"?3:2,s=t.timeSig[0]*r,i=ax({...t,lengthBars:1},e,n).degrees.slice(0,s),a=i.map((y,x)=>x%2===0?y+1:y).slice(0,s),l=Math.max(1,t.lengthBars-3),c=[];for(let y=0;y<l;y+=1){const x=y+1;c.push(...i.map((w,C)=>w+x+(C%3===0?1:0)))}const h=[],m=1;for(let y=0;y<s-1;y+=1)h.push(2);return h.push(m),{degrees:[...i,...a,...c,...h].slice(0,t.lengthBars*s),patternId:"phrase"}}function ux(t){const e={},n=[2,3,4];for(let r=0;r<t.length;r+=1)for(const s of n){if(r+s>t.length)continue;const i=t.slice(r,r+s).map(a=>`${a.alteration}${a.degree}`).join("-");if(e[i]=(e[i]??0)+1,e[i]>2){const a=t[r+s-1];t[r+s-1]={...a,degree:a.degree%7+1}}}return t}function cx(t,e){return t.map(n=>({degree:(n-1)%7+1,alteration:e[(n-1)%7+1]??"natural",role:"passing"}))}function hx(t,e){const n=e==="16ths"?.25:e==="triplets"?.3333333333333333:.5;return t.map(r=>({pitch:r,durationBeats:n,articulation:"tongue"}))}function dx(t,e){const n=Iv(e),r=H1(t.scaleId),s=K1(t.keyTonic+"4");if(rx(s,r.formula,t.instrument.range.lowMidi,t.instrument.range.highMidi).length===0)throw new Error("Range too small for selected scale");const{degrees:a,patternId:l}=lx(t,n,r.formula.length),c=t.difficulty<=3?5:t.difficulty<=6?8:12,h=ix(r.formula),m=ux(X1(e,cx(a,h),t.style)),p=hx(m,t.subdivision),y=[];let x=null;for(const v of m){const S=ox(v,s,r.formula,t.instrument.range.lowMidi,t.instrument.range.highMidi,x,c);y.push(S),x=S}const w=Y1(y,t.subdivision,t.tempo,t.swing),N={context:{tonic:"do",key:t.keyTonic,mode:r.id,scaleMap:sx(r.formula)},phrases:[{bars:t.lengthBars,cadence:"authentic",contour:"arch"}],events:p};return{id:"ex-"+e,seed:e,createdAt:new Date().toISOString(),style:t.style,skillFocus:t.skillFocus,scaleId:t.scaleId,keyTonic:t.keyTonic,tempo:t.tempo,timeSig:t.timeSig,swing:t.swing,subdivision:t.subdivision,difficulty:t.difficulty,lengthBars:t.lengthBars,instrument:t.instrument,notes:w,tonalPlan:N,metadata:{articulationHints:Q1(t.style,t.skillFocus),rhythmicFeel:t.swing?"swing":"straight",patternId:l,labels:{keyMode:`${t.keyTonic} ${r.name}`,tempoGoal:`${t.tempo} BPM`,technicalGoal:t.skillFocus,cadenceType:"authentic"}}}}function Pv({style:t,...e}){return T.jsx("button",{...e,style:{background:we.accent,color:"#1b1b1b",borderRadius:on.controlRadius,padding:`${be.sm}px ${be.md}px`,border:"1px solid transparent",fontWeight:600,cursor:"pointer",...t}})}function Gr({style:t,...e}){return T.jsx("button",{...e,style:{background:"#0b1222",color:we.textOnDark,borderRadius:on.controlRadius,padding:`${be.sm}px ${be.md}px`,border:"1px solid #1e2a45",cursor:"pointer",...t}})}function ir({text:t}){return T.jsx("span",{style:{display:"inline-flex",alignItems:"center",padding:`${be.xs/2}px ${be.sm}px`,borderRadius:on.chipRadius,background:we.surfaceSecondary,color:we.textOnLight,marginRight:be.xs,...Oe.body},children:t})}const Bm=[{id:"ii-v-i",name:"iiVI",romanNumerals:["ii7","V7","Imaj7"],barCount:3},{id:"i-vi-ii-v",name:"IviiiV",romanNumerals:["Imaj7","vi7","ii7","V7"],barCount:4},{id:"blues-12",name:"12-bar Blues",romanNumerals:["I7","I7","I7","I7","IV7","IV7","I7","I7","V7","IV7","I7","V7"],barCount:12},{id:"highlife-1",name:"Highlife Common",romanNumerals:["I","V","vi","IV"],barCount:4}];function fx({request:t,onRequestChange:e,onGenerate:n}){var v,S;const[r,s]=Re.useState(()=>String(Date.now())),[i,a]=Re.useState(null),[l,c]=Re.useState(!1),[h,m]=Re.useState(!1),[p,y]=Re.useState(!1),[x,w]=Re.useState(((v=Bm[0])==null?void 0:v.id)??"ii-v-i"),C=Re.useMemo(()=>hd,[]),N=()=>{try{const k=dx(t,r);n(k,k.metadata.patternId),a(null),s(String(Date.now()))}catch(k){a(k.message)}};return T.jsxs("div",{className:"stack",children:[T.jsx("div",{style:Oe.title,children:"Generate"}),T.jsx("div",{style:{color:"#A6ACB3",marginBottom:24},children:"Dial in style, skill focus, and length."}),T.jsxs("div",{children:[T.jsx(ir,{text:t.style}),T.jsx(ir,{text:((S=C.find(k=>k.id===t.scaleId))==null?void 0:S.name)??"Scale"}),T.jsx(ir,{text:t.keyTonic}),T.jsx(ir,{text:`${t.tempo} BPM`}),T.jsx(ir,{text:t.subdivision})]}),T.jsx(Jt,{children:T.jsxs("div",{className:"stack",children:[T.jsx("div",{style:Oe.sectionTitle,children:"Tonal Grammar Engine"}),T.jsx("div",{style:{color:"#5A5F66",fontSize:"0.95rem"},children:"This app is a curriculum engine, not a random pattern generator. Each exercise is built from a canonical degree plan, then validated by a Tonal Grammar Engine (TGE) that enforces tonal correctness, phrase logic, style authenticity, and honest difficulty."}),T.jsx("div",{style:{color:"#5A5F66",fontSize:"0.9rem"},children:"Pipeline: Intent  Canonical Plan  TGE (validate/repair/score)  Render (Solfa / Numbers / Alphabet)."})]})}),T.jsx(Jt,{children:T.jsxs("div",{className:"stack",children:[T.jsx("div",{style:Oe.sectionTitle,children:"Musical Context"}),T.jsx(Ze,{label:"Style",children:T.jsx(Ls,{options:[{key:"Highlife",label:"Highlife"},{key:"Jazz",label:"Jazz"},{key:"Blues",label:"Blues"},{key:"Bebop",label:"Bebop"},{key:"Any",label:"Any"}],selectedKey:t.style,onSelect:k=>e({...t,style:k})})}),T.jsxs("div",{className:"row",children:[T.jsx(Ze,{label:"Skill Focus",children:T.jsxs("select",{value:t.skillFocus,onChange:k=>e({...t,skillFocus:k.target.value}),style:bt,children:[T.jsx("option",{children:"flexibility"}),T.jsx("option",{children:"patterns"}),T.jsx("option",{children:"speed"}),T.jsx("option",{children:"accuracy"}),T.jsx("option",{children:"phrasing"})]})}),T.jsx(Ze,{label:"Scale/Mode",children:T.jsx("select",{value:t.scaleId,onChange:k=>e({...t,scaleId:k.target.value}),style:bt,children:C.map(k=>T.jsx("option",{value:k.id,children:k.name},k.id))})})]}),T.jsx(Ze,{label:"Key/Tonic",children:T.jsx("select",{value:t.keyTonic,onChange:k=>e({...t,keyTonic:k.target.value}),style:bt,children:["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"].map(k=>T.jsx("option",{children:k},k))})})]})}),T.jsx(Jt,{children:T.jsxs("div",{className:"stack",children:[T.jsx("div",{style:Oe.sectionTitle,children:"Rhythm & Feel"}),T.jsxs("div",{className:"row",children:[T.jsx(Qi,{label:"BPM",value:t.tempo,min:50,max:200,onChange:k=>e({...t,tempo:k})}),T.jsx(Ze,{label:"Time Sig",children:T.jsxs("select",{value:t.timeSig.join("/"),onChange:k=>{const R=k.target.value.split("/").map(Number);e({...t,timeSig:[R[0],R[1]]})},style:bt,children:[T.jsx("option",{children:"4/4"}),T.jsx("option",{children:"3/4"}),T.jsx("option",{children:"6/8"})]})})]}),T.jsxs("div",{className:"row",children:[T.jsx(Ze,{label:"Subdivision",children:T.jsx(Ls,{options:[{key:"8ths",label:"8ths"},{key:"16ths",label:"16ths"},{key:"triplets",label:"triplets"}],selectedKey:t.subdivision,onSelect:k=>e({...t,subdivision:k})})}),T.jsx(Ze,{label:"Swing",children:T.jsxs("select",{value:t.swing?"on":"off",onChange:k=>e({...t,swing:k.target.value==="on"}),style:bt,children:[T.jsx("option",{value:"on",children:"On"}),T.jsx("option",{value:"off",children:"Off"})]})})]})]})}),T.jsx(Jt,{children:T.jsxs("div",{className:"stack",children:[T.jsx("div",{style:Oe.sectionTitle,children:"Difficulty & Length"}),T.jsxs("div",{className:"row",children:[T.jsx(Qi,{label:"Difficulty",value:t.difficulty,min:1,max:10,onChange:k=>e({...t,difficulty:k})}),T.jsx(Ze,{label:"Bars",children:T.jsx("input",{type:"number",min:1,max:16,value:t.lengthBars,style:bt,onChange:k=>e({...t,lengthBars:Number(k.target.value)})})})]})]})}),T.jsx(Jt,{children:T.jsxs("div",{className:"stack",children:[T.jsxs(Gr,{onClick:()=>c(k=>!k),children:["Advanced ",l?"^":"v"]}),l&&T.jsxs("div",{className:"stack",children:[T.jsx(Ze,{label:"Seed",children:T.jsx("input",{value:r,onChange:k=>s(k.target.value),style:bt})}),T.jsx(Ze,{label:"Rotate keys",children:T.jsxs("select",{value:t.keyMode,onChange:k=>e({...t,keyMode:k.target.value}),style:bt,children:[T.jsx("option",{value:"manual",children:"Manual"}),T.jsx("option",{value:"rotate",children:"Rotate"})]})}),T.jsx(Ze,{label:"Range override",children:T.jsxs("select",{value:h?"on":"off",onChange:k=>m(k.target.value==="on"),style:bt,children:[T.jsx("option",{value:"off",children:"Off"}),T.jsx("option",{value:"on",children:"On"})]})}),h&&T.jsxs("div",{className:"row",children:[T.jsx(Ze,{label:"Lowest MIDI",children:T.jsx("input",{type:"number",value:t.instrument.range.lowMidi,style:bt,onChange:k=>e({...t,instrument:{...t.instrument,range:{...t.instrument.range,lowMidi:Number(k.target.value)}}})})}),T.jsx(Ze,{label:"Highest MIDI",children:T.jsx("input",{type:"number",value:t.instrument.range.highMidi,style:bt,onChange:k=>e({...t,instrument:{...t.instrument,range:{...t.instrument.range,highMidi:Number(k.target.value)}}})})})]}),T.jsx(Ze,{label:"Progression template",children:T.jsx("select",{value:x,onChange:k=>w(k.target.value),style:bt,disabled:!p,children:Bm.map(k=>T.jsx("option",{value:k.id,children:k.name},k.id))})}),T.jsx(Ze,{label:"Use progression",children:T.jsxs("select",{value:p?"on":"off",onChange:k=>y(k.target.value==="on"),style:bt,children:[T.jsx("option",{value:"off",children:"Off"}),T.jsx("option",{value:"on",children:"On"})]})})]})]})}),i&&T.jsxs("div",{style:{color:"#5A5F66"},children:["Error: ",i]}),T.jsx("div",{style:{height:72}}),T.jsx("div",{style:{position:"fixed",left:0,right:0,bottom:64,padding:`${be.sm}px ${be.md}px`,display:"flex",justifyContent:"center",pointerEvents:"none"},children:T.jsx("div",{style:{maxWidth:900,width:"100%",pointerEvents:"auto"},children:T.jsx(Pv,{onClick:N,style:{width:"100%"},children:"Generate Exercise"})})})]})}function Mv({title:t,message:e,action:n}){return T.jsxs("div",{style:{border:`1px solid ${we.divider}`,borderRadius:on.cardRadius,padding:be.md,background:we.surfacePrimary,color:we.textOnLight,display:"grid",gap:be.sm},children:[T.jsx("div",{style:Oe.sectionTitle,children:t}),T.jsx("div",{style:Oe.body,children:e}),n]})}function px({exercise:t,showNoteNames:e,showSolfa:n,showNumbers:r,showRoman:s=!0}){var l;if(!t)return T.jsx(Mv,{title:"No exercise yet",message:"Generate an exercise to see notation and playback controls here."});const i=t.notes.map(c=>{const h=gu(c.midi,t.instrument.transposition);return{note:Pi(h)}}),a=((l=t.tonalPlan)==null?void 0:l.events.map(c=>c.pitch))??[];return T.jsxs("div",{className:"stack",children:[T.jsxs("div",{children:[T.jsx(ir,{text:t.style}),T.jsx(ir,{text:t.skillFocus}),T.jsx(ir,{text:t.keyTonic}),T.jsx(ir,{text:`${t.tempo} BPM`}),T.jsx(ir,{text:t.subdivision})]}),t.metadata.romanContext&&s&&T.jsxs("div",{style:Oe.mono,children:[T.jsx("span",{style:Oe.label,children:"Roman:"})," ",t.metadata.romanContext.barMap.join(" | ")]}),T.jsxs("div",{style:Oe.mono,children:[t.metadata.labels&&T.jsxs("div",{children:[T.jsx("span",{style:Oe.label,children:"Key/Mode:"})," ",t.metadata.labels.keyMode," ",T.jsx("span",{style:Oe.label,children:"Tempo:"})," ",t.metadata.labels.tempoGoal," ",T.jsx("span",{style:Oe.label,children:"Technical:"})," ",t.metadata.labels.technicalGoal," ",T.jsx("span",{style:Oe.label,children:"Cadence:"})," ",t.metadata.labels.cadenceType]}),e&&T.jsxs("div",{children:[T.jsx("span",{style:Oe.label,children:"Notes:"})," ",i.map(c=>c.note).join(" ")]}),n&&a.length>0&&T.jsxs("div",{children:[T.jsx("span",{style:Oe.label,children:"Solfa:"})," ",a.map(c=>tx(c)).join(" ")]}),r&&a.length>0&&T.jsxs("div",{children:[T.jsx("span",{style:Oe.label,children:"Numbers:"})," ",a.map(c=>nx(c)).join(" ")]})]}),T.jsxs("div",{style:{...Oe.body,color:"#5A5F66"},children:["Articulation: ",t.metadata.articulationHints.join("  ")]})]})}function mx({options:t,selected:e,onToggle:n}){return T.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${t.length}, 1fr)`,gap:be.xs},children:t.map(r=>{const s=e.has(r.key);return T.jsx("button",{onClick:()=>n(r.key),style:{background:s?we.accent:we.surfaceSecondary,color:s?"#1b1b1b":we.textOnLight,border:`1px solid ${s?we.accent:we.divider}`,borderRadius:on.controlRadius,padding:`${be.xs}px ${be.sm}px`,cursor:"pointer",fontWeight:600,...Oe.body},children:r.label},r.key)})})}function gx({value:t}){const e=Math.max(0,Math.min(100,t));return T.jsx("div",{style:{width:"100%",height:8,borderRadius:on.chipRadius,background:we.surfaceSecondary,overflow:"hidden"},children:T.jsx("div",{style:{width:`${e}%`,height:"100%",background:we.accent}})})}function yx({title:t,detail:e}){return T.jsxs("div",{style:{borderRadius:on.cardRadius,border:`1px solid ${we.accent}`,padding:be.md,background:we.surfacePrimary,display:"grid",gap:be.xs},children:[T.jsx("div",{style:{fontWeight:700},children:t}),T.jsx("div",{style:{color:"#5A5F66",fontSize:"0.9rem"},children:e})]})}function Dv({tier:t}){return T.jsxs("div",{style:{borderRadius:on.chipRadius,background:we.surfacePrimary,border:`1px solid ${we.divider}`,padding:`${be.xs/2}px ${be.sm}px`,fontSize:"0.8rem",fontWeight:600,color:we.textOnLight},children:[t," Tier"]})}const Rv="14.9.17",Wm=(t,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}),zm=(t,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:t}),dd=(t,e)=>({startTime:e,type:"setValue",value:t}),jv=(t,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:t}),Fv=(t,e,{startTime:n,target:r,timeConstant:s})=>r+(e-r)*Math.exp((n-t)/s),Mi=t=>t.type==="exponentialRampToValue",yu=t=>t.type==="linearRampToValue",Qr=t=>Mi(t)||yu(t),wf=t=>t.type==="setValue",_r=t=>t.type==="setValueCurve",vu=(t,e,n,r)=>{const s=t[e];return s===void 0?r:Qr(s)||wf(s)?s.value:_r(s)?s.values[s.values.length-1]:Fv(n,vu(t,e-1,s.startTime,r),s)},Um=(t,e,n,r,s)=>n===void 0?[r.insertTime,s]:Qr(n)?[n.endTime,n.value]:wf(n)?[n.startTime,n.value]:_r(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,vu(t,e-1,n.startTime,s)],fd=t=>t.type==="cancelAndHold",pd=t=>t.type==="cancelScheduledValues",Kr=t=>fd(t)||pd(t)?t.cancelTime:Mi(t)||yu(t)?t.endTime:t.startTime,qm=(t,e,n,{endTime:r,value:s})=>n===s?s:0<n&&0<s||n<0&&s<0?n*(s/n)**((t-e)/(r-e)):0,$m=(t,e,n,{endTime:r,value:s})=>n+(t-e)/(r-e)*(s-n),vx=(t,e)=>{const n=Math.floor(e),r=Math.ceil(e);return n===r?t[n]:(1-(e-n))*t[n]+(1-(r-e))*t[r]},_x=(t,{duration:e,startTime:n,values:r})=>{const s=(t-n)/e*(r.length-1);return vx(r,s)},bl=t=>t.type==="setTarget";class wx{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const n=Kr(e);if(fd(e)||pd(e)){const r=this._automationEvents.findIndex(i=>pd(e)&&_r(i)?i.startTime+i.duration>=n:Kr(i)>=n),s=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),fd(e)){const i=this._automationEvents[this._automationEvents.length-1];if(s!==void 0&&Qr(s)){if(i!==void 0&&bl(i))throw new Error("The internal list is malformed.");const a=i===void 0?s.insertTime:_r(i)?i.startTime+i.duration:Kr(i),l=i===void 0?this._defaultValue:_r(i)?i.values[i.values.length-1]:i.value,c=Mi(s)?qm(n,a,l,s):$m(n,a,l,s),h=Mi(s)?Wm(c,n,this._currenTime):zm(c,n,this._currenTime);this._automationEvents.push(h)}if(i!==void 0&&bl(i)&&this._automationEvents.push(dd(this.getValue(n),n)),i!==void 0&&_r(i)&&i.startTime+i.duration>n){const a=n-i.startTime,l=(i.values.length-1)/i.duration,c=Math.max(2,1+Math.ceil(a*l)),h=a/(c-1)*l,m=i.values.slice(0,c);if(h<1)for(let p=1;p<c;p+=1){const y=h*p%1;m[p]=i.values[p-1]*(1-y)+i.values[p]*y}this._automationEvents[this._automationEvents.length-1]=jv(m,i.startTime,a)}}}else{const r=this._automationEvents.findIndex(a=>Kr(a)>n),s=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(s!==void 0&&_r(s)&&Kr(s)+s.duration>n)return!1;const i=Mi(e)?Wm(e.value,e.endTime,this._currenTime):yu(e)?zm(e.value,n,this._currenTime):e;if(r===-1)this._automationEvents.push(i);else{if(_r(e)&&n+e.duration>Kr(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,i)}}return!0}flush(e){const n=this._automationEvents.findIndex(r=>Kr(r)>e);if(n>1){const r=this._automationEvents.slice(n-1),s=r[0];bl(s)&&r.unshift(dd(vu(this._automationEvents,n-2,s.startTime,this._defaultValue),s.startTime)),this._automationEvents=r}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(a=>Kr(a)>e),r=this._automationEvents[n],s=(n===-1?this._automationEvents.length:n)-1,i=this._automationEvents[s];if(i!==void 0&&bl(i)&&(r===void 0||!Qr(r)||r.insertTime>e))return Fv(e,vu(this._automationEvents,s-1,i.startTime,this._defaultValue),i);if(i!==void 0&&wf(i)&&(r===void 0||!Qr(r)))return i.value;if(i!==void 0&&_r(i)&&(r===void 0||!Qr(r)||i.startTime+i.duration>e))return e<i.startTime+i.duration?_x(e,i):i.values[i.values.length-1];if(i!==void 0&&Qr(i)&&(r===void 0||!Qr(r)))return i.value;if(r!==void 0&&Mi(r)){const[a,l]=Um(this._automationEvents,s,i,r,this._defaultValue);return qm(e,a,l,r)}if(r!==void 0&&yu(r)){const[a,l]=Um(this._automationEvents,s,i,r,this._defaultValue);return $m(e,a,l,r)}return this._defaultValue}}const xx=t=>({cancelTime:t,type:"cancelAndHold"}),kx=t=>({cancelTime:t,type:"cancelScheduledValues"}),Sx=(t,e)=>({endTime:e,type:"exponentialRampToValue",value:t}),Tx=(t,e)=>({endTime:e,type:"linearRampToValue",value:t}),Cx=(t,e,n)=>({startTime:e,target:t,timeConstant:n,type:"setTarget"}),bx=()=>new DOMException("","AbortError"),Ex=t=>(e,n,[r,s,i],a)=>{t(e[s],[n,r,i],l=>l[0]===n&&l[1]===r,a)},Ax=t=>(e,n,r)=>{const s=[];for(let i=0;i<r.numberOfInputs;i+=1)s.push(new Set);t.set(e,{activeInputs:s,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},Nx=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},Yi=new WeakSet,Lv=new WeakMap,xf=new WeakMap,Vv=new WeakMap,kf=new WeakMap,nc=new WeakMap,Bv=new WeakMap,md=new WeakMap,gd=new WeakMap,yd=new WeakMap,Wv={construct(){return Wv}},Ox=t=>{try{const e=new Proxy(t,Wv);new e}catch{return!1}return!0},Km=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Gm=(t,e)=>{const n=[];let r=t.replace(/^[\s]+/,""),s=r.match(Km);for(;s!==null;){const i=s[1].slice(1,-1),a=s[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());n.push(a),r=r.slice(s[0].length).replace(/^[\s]+/,""),s=r.match(Km)}return[n.join(";"),r]},Hm=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Xm=t=>{if(!Ox(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},Ix=(t,e,n,r,s,i,a,l,c,h,m,p,y)=>{let x=0;return(w,C,N={credentials:"omit"})=>{const v=m.get(w);if(v!==void 0&&v.has(C))return Promise.resolve();const S=h.get(w);if(S!==void 0){const E=S.get(C);if(E!==void 0)return E}const k=i(w),R=k.audioWorklet===void 0?s(C).then(([E,P])=>{const[M,O]=Gm(E,P),G=`${M};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${O}
})})(window,'_AWGS')`;return n(G)}).then(()=>{const E=y._AWGS.pop();if(E===void 0)throw new SyntaxError;r(k.currentTime,k.sampleRate,()=>E(class{},void 0,(P,M)=>{if(P.trim()==="")throw e();const O=gd.get(k);if(O!==void 0){if(O.has(P))throw e();Xm(M),Hm(M.parameterDescriptors),O.set(P,M)}else Xm(M),Hm(M.parameterDescriptors),gd.set(k,new Map([[P,M]]))},k.sampleRate,void 0,void 0))}):Promise.all([s(C),Promise.resolve(t(p,p))]).then(([[E,P],M])=>{const O=x+1;x=O;const[G,$]=Gm(E,P),fe=`${G};((AudioWorkletProcessor,registerProcessor)=>{${$}
})(${M?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${M?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${M?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${O}',class extends AudioWorkletProcessor{process(){return !1}})`,xe=new Blob([fe],{type:"application/javascript; charset=utf-8"}),Z=URL.createObjectURL(xe);return k.audioWorklet.addModule(Z,N).then(()=>{if(l(k))return k;const _e=a(k);return _e.audioWorklet.addModule(Z,N).then(()=>_e)}).then(_e=>{if(c===null)throw new SyntaxError;try{new c(_e,`__sac${O}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(Z))});return S===void 0?h.set(w,new Map([[C,R]])):S.set(C,R),R.then(()=>{const E=m.get(w);E===void 0?m.set(w,new Set([C])):E.add(C)}).finally(()=>{const E=h.get(w);E!==void 0&&E.delete(C)}),R}},Xn=(t,e)=>{const n=t.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},rc=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[r]=n;return t.delete(r),r},zv=(t,e,n,r)=>{const s=Xn(t,e),i=rc(s,a=>a[0]===n&&a[1]===r);return s.size===0&&t.delete(e),i},Aa=t=>Xn(Bv,t),Zi=t=>{if(Yi.has(t))throw new Error("The AudioNode is already stored.");Yi.add(t),Aa(t).forEach(e=>e(!0))},Uv=t=>"port"in t,Na=t=>{if(!Yi.has(t))throw new Error("The AudioNode is not stored.");Yi.delete(t),Aa(t).forEach(e=>e(!1))},vd=(t,e)=>{!Uv(t)&&e.every(n=>n.size===0)&&Na(t)},Px=(t,e,n,r,s,i,a,l,c,h,m,p,y)=>{const x=new WeakMap;return(w,C,N,v,S)=>{const{activeInputs:k,passiveInputs:R}=i(C),{outputs:E}=i(w),P=l(w),M=O=>{const G=c(C),$=c(w);if(O){const X=zv(R,w,N,v);t(k,w,X,!1),!S&&!p(w)&&n($,G,N,v),y(C)&&Zi(C)}else{const X=r(k,w,N,v);e(R,v,X,!1),!S&&!p(w)&&s($,G,N,v);const H=a(C);if(H===0)m(C)&&vd(C,k);else{const se=x.get(C);se!==void 0&&clearTimeout(se),x.set(C,setTimeout(()=>{m(C)&&vd(C,k)},H*1e3))}}};return h(E,[C,N,v],O=>O[0]===C&&O[1]===N&&O[2]===v,!0)?(P.add(M),m(w)?t(k,w,[N,v,M],!0):e(R,v,[w,N,M],!0),!0):!1}},Mx=t=>(e,n,[r,s,i],a)=>{const l=e.get(r);l===void 0?e.set(r,new Set([[s,n,i]])):t(l,[s,n,i],c=>c[0]===s&&c[1]===n,a)},Dx=t=>(e,n)=>{const r=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(e.destination);const s=()=>{n.removeEventListener("ended",s),n.disconnect(r),r.disconnect()};n.addEventListener("ended",s)},Rx=t=>(e,n)=>{t(e).add(n)},jx={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},Fx=(t,e,n,r,s,i)=>class extends t{constructor(l,c){const h=s(l),m={...jx,...c},p=r(h,m),y=i(h)?e():null;super(l,!1,p,y),this._nativeAnalyserNode=p}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(l){this._nativeAnalyserNode.fftSize=l}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(l){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=l,!(l>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(l){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=l,!(this._nativeAnalyserNode.maxDecibels>l))throw this._nativeAnalyserNode.minDecibels=c,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(l){this._nativeAnalyserNode.smoothingTimeConstant=l}getByteFrequencyData(l){this._nativeAnalyserNode.getByteFrequencyData(l)}getByteTimeDomainData(l){this._nativeAnalyserNode.getByteTimeDomainData(l)}getFloatFrequencyData(l){this._nativeAnalyserNode.getFloatFrequencyData(l)}getFloatTimeDomainData(l){this._nativeAnalyserNode.getFloatTimeDomainData(l)}},Xt=(t,e)=>t.context===e,Lx=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,a)=>{let l=e(i);if(!Xt(l,a)){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,fftSize:l.fftSize,maxDecibels:l.maxDecibels,minDecibels:l.minDecibels,smoothingTimeConstant:l.smoothingTimeConstant};l=t(a,h)}return r.set(a,l),await n(i,a,l),l};return{render(i,a){const l=r.get(a);return l!==void 0?Promise.resolve(l):s(i,a)}}},_u=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},cr=()=>new DOMException("","IndexSizeError"),Sf=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(r){throw r.code===12?cr():r}})(t.getChannelData)},Vx={numberOfChannels:1},Bx=(t,e,n,r,s,i,a,l)=>{let c=null;return class qv{constructor(m){if(s===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:p,numberOfChannels:y,sampleRate:x}={...Vx,...m};c===null&&(c=new s(1,1,44100));const w=r!==null&&e(i,i)?new r({length:p,numberOfChannels:y,sampleRate:x}):c.createBuffer(y,p,x);if(w.numberOfChannels===0)throw n();return typeof w.copyFromChannel!="function"?(a(w),Sf(w)):e(_u,()=>_u(w))||l(w),t.add(w),w}static[Symbol.hasInstance](m){return m!==null&&typeof m=="object"&&Object.getPrototypeOf(m)===qv.prototype||t.has(m)}}},un=-34028234663852886e22,Zt=-un,Tr=t=>Yi.has(t),Wx={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},zx=(t,e,n,r,s,i,a,l)=>class extends t{constructor(h,m){const p=i(h),y={...Wx,...m},x=s(p,y),w=a(p),C=w?e():null;super(h,!1,x,C),this._audioBufferSourceNodeRenderer=C,this._isBufferNullified=!1,this._isBufferSet=y.buffer!==null,this._nativeAudioBufferSourceNode=x,this._onended=null,this._playbackRate=n(this,w,x.playbackRate,Zt,un)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(h){if(this._nativeAudioBufferSourceNode.buffer=h,h!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(h){this._nativeAudioBufferSourceNode.loop=h}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(h){this._nativeAudioBufferSourceNode.loopEnd=h}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(h){this._nativeAudioBufferSourceNode.loopStart=h}get onended(){return this._onended}set onended(h){const m=typeof h=="function"?l(this,h):null;this._nativeAudioBufferSourceNode.onended=m;const p=this._nativeAudioBufferSourceNode.onended;this._onended=p!==null&&p===m?h:p}get playbackRate(){return this._playbackRate}start(h=0,m=0,p){if(this._nativeAudioBufferSourceNode.start(h,m,p),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=p===void 0?[h,m]:[h,m,p]),this.context.state!=="closed"){Zi(this);const y=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",y),Tr(this)&&Na(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",y)}}stop(h=0){this._nativeAudioBufferSourceNode.stop(h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=h)}},Ux=(t,e,n,r,s)=>()=>{const i=new WeakMap;let a=null,l=null;const c=async(h,m)=>{let p=n(h);const y=Xt(p,m);if(!y){const x={buffer:p.buffer,channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,loop:p.loop,loopEnd:p.loopEnd,loopStart:p.loopStart,playbackRate:p.playbackRate.value};p=e(m,x),a!==null&&p.start(...a),l!==null&&p.stop(l)}return i.set(m,p),y?await t(m,h.playbackRate,p.playbackRate):await r(m,h.playbackRate,p.playbackRate),await s(h,m,p),p};return{set start(h){a=h},set stop(h){l=h},render(h,m){const p=i.get(m);return p!==void 0?Promise.resolve(p):c(h,m)}}},qx=t=>"playbackRate"in t,$x=t=>"frequency"in t&&"gain"in t,Kx=t=>"offset"in t,Gx=t=>!("frequency"in t)&&"gain"in t,Hx=t=>"detune"in t&&"frequency"in t&&!("gain"in t),Xx=t=>"pan"in t,en=t=>Xn(Lv,t),Oa=t=>Xn(Vv,t),_d=(t,e)=>{const{activeInputs:n}=en(t);n.forEach(s=>s.forEach(([i])=>{e.includes(t)||_d(i,[...e,t])}));const r=qx(t)?[t.playbackRate]:Uv(t)?Array.from(t.parameters.values()):$x(t)?[t.Q,t.detune,t.frequency,t.gain]:Kx(t)?[t.offset]:Gx(t)?[t.gain]:Hx(t)?[t.detune,t.frequency]:Xx(t)?[t.pan]:[];for(const s of r){const i=Oa(s);i!==void 0&&i.activeInputs.forEach(([a])=>_d(a,e))}Tr(t)&&Na(t)},$v=t=>{_d(t.destination,[])},Qx=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback"),Yx=(t,e,n,r,s,i,a,l,c)=>class extends t{constructor(m={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let p;try{p=new c(m)}catch(w){throw w.code===12&&w.message==="sampleRate is not in range"?n():w}if(p===null)throw r();if(!Qx(m.latencyHint))throw new TypeError(`The provided value '${m.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(m.sampleRate!==void 0&&p.sampleRate!==m.sampleRate)throw n();super(p,2);const{latencyHint:y}=m,{sampleRate:x}=p;if(this._baseLatency=typeof p.baseLatency=="number"?p.baseLatency:y==="balanced"?512/x:y==="interactive"||y===void 0?256/x:y==="playback"?1024/x:Math.max(2,Math.min(128,Math.round(y*x/128)))*128/x,this._nativeAudioContext=p,c.name==="webkitAudioContext"?(this._nativeGainNode=p.createGain(),this._nativeOscillatorNode=p.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(p.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,p.state==="running"){this._state="suspended";const w=()=>{this._state==="suspended"&&(this._state=null),p.removeEventListener("statechange",w)};p.addEventListener("statechange",w)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),$v(this)}))}createMediaElementSource(m){return new s(this,{mediaElement:m})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(m){return new a(this,{mediaStream:m})}createMediaStreamTrackSource(m){return new l(this,{mediaStreamTrack:m})}resume(){return this._state==="suspended"?new Promise((m,p)=>{const y=()=>{this._nativeAudioContext.removeEventListener("statechange",y),this._nativeAudioContext.state==="running"?m():this.resume().then(m,p)};this._nativeAudioContext.addEventListener("statechange",y)}):this._nativeAudioContext.resume().catch(m=>{throw m===void 0||m.code===15?e():m})}suspend(){return this._nativeAudioContext.suspend().catch(m=>{throw m===void 0?e():m})}},Zx=(t,e,n,r,s,i,a,l)=>class extends t{constructor(h,m){const p=i(h),y=a(p),x=s(p,m,y),w=y?e(l):null;super(h,!1,x,w),this._isNodeOfNativeOfflineAudioContext=y,this._nativeAudioDestinationNode=x}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(h){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(h>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=h}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(h){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=h}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},Jx=t=>{const e=new WeakMap,n=async(r,s)=>{const i=s.destination;return e.set(s,i),await t(r,s,i),i};return{render(r,s){const i=e.get(s);return i!==void 0?Promise.resolve(i):n(r,s)}}},ek=(t,e,n,r,s,i,a,l)=>(c,h)=>{const m=h.listener,p=()=>{const E=new Float32Array(1),P=e(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),M=a(h);let O=!1,G=[0,0,-1,0,1,0],$=[0,0,0];const X=()=>{if(O)return;O=!0;const xe=r(h,256,9,0);xe.onaudioprocess=({inputBuffer:Z})=>{const _e=[i(Z,E,0),i(Z,E,1),i(Z,E,2),i(Z,E,3),i(Z,E,4),i(Z,E,5)];_e.some((J,ee)=>J!==G[ee])&&(m.setOrientation(..._e),G=_e);const Q=[i(Z,E,6),i(Z,E,7),i(Z,E,8)];Q.some((J,ee)=>J!==$[ee])&&(m.setPosition(...Q),$=Q)},P.connect(xe)},H=xe=>Z=>{Z!==G[xe]&&(G[xe]=Z,m.setOrientation(...G))},se=xe=>Z=>{Z!==$[xe]&&($[xe]=Z,m.setPosition(...$))},fe=(xe,Z,_e)=>{const Q=n(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Z});Q.connect(P,0,xe),Q.start(),Object.defineProperty(Q.offset,"defaultValue",{get(){return Z}});const J=t({context:c},M,Q.offset,Zt,un);return l(J,"value",ee=>()=>ee.call(J),ee=>me=>{try{ee.call(J,me)}catch(Te){if(Te.code!==9)throw Te}X(),M&&_e(me)}),J.cancelAndHoldAtTime=(ee=>M?()=>{throw s()}:(...me)=>{const Te=ee.apply(J,me);return X(),Te})(J.cancelAndHoldAtTime),J.cancelScheduledValues=(ee=>M?()=>{throw s()}:(...me)=>{const Te=ee.apply(J,me);return X(),Te})(J.cancelScheduledValues),J.exponentialRampToValueAtTime=(ee=>M?()=>{throw s()}:(...me)=>{const Te=ee.apply(J,me);return X(),Te})(J.exponentialRampToValueAtTime),J.linearRampToValueAtTime=(ee=>M?()=>{throw s()}:(...me)=>{const Te=ee.apply(J,me);return X(),Te})(J.linearRampToValueAtTime),J.setTargetAtTime=(ee=>M?()=>{throw s()}:(...me)=>{const Te=ee.apply(J,me);return X(),Te})(J.setTargetAtTime),J.setValueAtTime=(ee=>M?()=>{throw s()}:(...me)=>{const Te=ee.apply(J,me);return X(),Te})(J.setValueAtTime),J.setValueCurveAtTime=(ee=>M?()=>{throw s()}:(...me)=>{const Te=ee.apply(J,me);return X(),Te})(J.setValueCurveAtTime),J};return{forwardX:fe(0,0,H(0)),forwardY:fe(1,0,H(1)),forwardZ:fe(2,-1,H(2)),positionX:fe(6,0,se(0)),positionY:fe(7,0,se(1)),positionZ:fe(8,0,se(2)),upX:fe(3,0,H(3)),upY:fe(4,1,H(4)),upZ:fe(5,0,H(5))}},{forwardX:y,forwardY:x,forwardZ:w,positionX:C,positionY:N,positionZ:v,upX:S,upY:k,upZ:R}=m.forwardX===void 0?p():m;return{get forwardX(){return y},get forwardY(){return x},get forwardZ(){return w},get positionX(){return C},get positionY(){return N},get positionZ(){return v},get upX(){return S},get upY(){return k},get upZ(){return R}}},wu=t=>"context"in t,Ia=t=>wu(t[0]),si=(t,e,n,r)=>{for(const s of t)if(n(s)){if(r)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},Qm=(t,e,[n,r],s)=>{si(t,[e,n,r],i=>i[0]===e&&i[1]===n,s)},Ym=(t,[e,n,r],s)=>{const i=t.get(e);i===void 0?t.set(e,new Set([[n,r]])):si(i,[n,r],a=>a[0]===n,s)},ao=t=>"inputs"in t,xu=(t,e,n,r)=>{if(ao(e)){const s=e.inputs[r];return t.connect(s,n,0),[s,n,0]}return t.connect(e,n,r),[e,n,r]},Kv=(t,e,n)=>{for(const r of t)if(r[0]===e&&r[1]===n)return t.delete(r),r;return null},tk=(t,e,n)=>rc(t,r=>r[0]===e&&r[1]===n),Gv=(t,e)=>{if(!Aa(t).delete(e))throw new Error("Missing the expected event listener.")},Hv=(t,e,n)=>{const r=Xn(t,e),s=rc(r,i=>i[0]===n);return r.size===0&&t.delete(e),s},ku=(t,e,n,r)=>{ao(e)?t.disconnect(e.inputs[r],n,0):t.disconnect(e,n,r)},lt=t=>Xn(xf,t),ca=t=>Xn(kf,t),Ks=t=>md.has(t),ql=t=>!Yi.has(t),Zm=(t,e)=>new Promise(n=>{if(e!==null)n(!0);else{const r=t.createScriptProcessor(256,1,1),s=t.createGain(),i=t.createBuffer(1,2,44100),a=i.getChannelData(0);a[0]=1,a[1]=1;const l=t.createBufferSource();l.buffer=i,l.loop=!0,l.connect(r).connect(t.destination),l.connect(s),l.disconnect(s),r.onaudioprocess=c=>{const h=c.inputBuffer.getChannelData(0);Array.prototype.some.call(h,m=>m===1)?n(!0):n(!1),l.stop(),r.onaudioprocess=null,l.disconnect(r),r.disconnect(t.destination)},l.start()}}),gh=(t,e)=>{const n=new Map;for(const r of t)for(const s of r){const i=n.get(s);n.set(s,i===void 0?1:i+1)}n.forEach((r,s)=>e(s,r))},Su=t=>"context"in t,nk=t=>{const e=new Map;t.connect=(n=>(r,s=0,i=0)=>{const a=Su(r)?n(r,s,i):n(r,s),l=e.get(r);return l===void 0?e.set(r,[{input:i,output:s}]):l.every(c=>c.input!==i||c.output!==s)&&l.push({input:i,output:s}),a})(t.connect.bind(t)),t.disconnect=(n=>(r,s,i)=>{if(n.apply(t),r===void 0)e.clear();else if(typeof r=="number")for(const[a,l]of e){const c=l.filter(h=>h.output!==r);c.length===0?e.delete(a):e.set(a,c)}else if(e.has(r))if(s===void 0)e.delete(r);else{const a=e.get(r);if(a!==void 0){const l=a.filter(c=>c.output!==s&&(c.input!==i||i===void 0));l.length===0?e.delete(r):e.set(r,l)}}for(const[a,l]of e)l.forEach(c=>{Su(a)?t.connect(a,c.output,c.input):t.connect(a,c.output)})})(t.disconnect)},rk=(t,e,n,r)=>{const{activeInputs:s,passiveInputs:i}=Oa(e),{outputs:a}=en(t),l=Aa(t),c=h=>{const m=lt(t),p=ca(e);if(h){const y=Hv(i,t,n);Qm(s,t,y,!1),!r&&!Ks(t)&&m.connect(p,n)}else{const y=tk(s,t,n);Ym(i,y,!1),!r&&!Ks(t)&&m.disconnect(p,n)}};return si(a,[e,n],h=>h[0]===e&&h[1]===n,!0)?(l.add(c),Tr(t)?Qm(s,t,[n,c],!0):Ym(i,[t,n,c],!0),!0):!1},sk=(t,e,n,r)=>{const{activeInputs:s,passiveInputs:i}=en(e),a=Kv(s[r],t,n);return a===null?[zv(i,t,n,r)[2],!1]:[a[2],!0]},ik=(t,e,n)=>{const{activeInputs:r,passiveInputs:s}=Oa(e),i=Kv(r,t,n);return i===null?[Hv(s,t,n)[1],!1]:[i[2],!0]},Tf=(t,e,n,r,s)=>{const[i,a]=sk(t,n,r,s);if(i!==null&&(Gv(t,i),a&&!e&&!Ks(t)&&ku(lt(t),lt(n),r,s)),Tr(n)){const{activeInputs:l}=en(n);vd(n,l)}},Cf=(t,e,n,r)=>{const[s,i]=ik(t,n,r);s!==null&&(Gv(t,s),i&&!e&&!Ks(t)&&lt(t).disconnect(ca(n),r))},ok=(t,e)=>{const n=en(t),r=[];for(const s of n.outputs)Ia(s)?Tf(t,e,...s):Cf(t,e,...s),r.push(s[0]);return n.outputs.clear(),r},ak=(t,e,n)=>{const r=en(t),s=[];for(const i of r.outputs)i[1]===n&&(Ia(i)?Tf(t,e,...i):Cf(t,e,...i),s.push(i[0]),r.outputs.delete(i));return s},lk=(t,e,n,r,s)=>{const i=en(t);return Array.from(i.outputs).filter(a=>a[0]===n&&(r===void 0||a[1]===r)&&(s===void 0||a[2]===s)).map(a=>(Ia(a)?Tf(t,e,...a):Cf(t,e,...a),i.outputs.delete(a),a[0]))},uk=(t,e,n,r,s,i,a,l,c,h,m,p,y,x,w,C)=>class extends h{constructor(v,S,k,R){super(k),this._context=v,this._nativeAudioNode=k;const E=m(v);p(E)&&n(Zm,()=>Zm(E,C))!==!0&&nk(k),xf.set(this,k),Bv.set(this,new Set),v.state!=="closed"&&S&&Zi(this),t(this,R,k)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(v){this._nativeAudioNode.channelCount=v}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(v){this._nativeAudioNode.channelCountMode=v}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(v){this._nativeAudioNode.channelInterpretation=v}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(v,S=0,k=0){if(S<0||S>=this._nativeAudioNode.numberOfOutputs)throw s();const R=m(this._context),E=w(R);if(y(v)||x(v))throw i();if(wu(v)){const O=lt(v);try{const $=xu(this._nativeAudioNode,O,S,k),X=ql(this);(E||X)&&this._nativeAudioNode.disconnect(...$),this.context.state!=="closed"&&!X&&ql(v)&&Zi(v)}catch($){throw $.code===12?i():$}if(e(this,v,S,k,E)){const $=c([this],v);gh($,r(E))}return v}const P=ca(v);if(P.name==="playbackRate"&&P.maxValue===1024)throw a();try{this._nativeAudioNode.connect(P,S),(E||ql(this))&&this._nativeAudioNode.disconnect(P,S)}catch(O){throw O.code===12?i():O}if(rk(this,v,S,E)){const O=c([this],v);gh(O,r(E))}}disconnect(v,S,k){let R;const E=m(this._context),P=w(E);if(v===void 0)R=ok(this,P);else if(typeof v=="number"){if(v<0||v>=this.numberOfOutputs)throw s();R=ak(this,P,v)}else{if(S!==void 0&&(S<0||S>=this.numberOfOutputs)||wu(v)&&k!==void 0&&(k<0||k>=v.numberOfInputs))throw s();if(R=lk(this,P,v,S,k),R.length===0)throw i()}for(const M of R){const O=c([this],M);gh(O,l)}}},ck=(t,e,n,r,s,i,a,l,c,h,m,p,y)=>(x,w,C,N=null,v=null)=>{const S=C.value,k=new wx(S),R=w?r(k):null,E={get defaultValue(){return S},get maxValue(){return N===null?C.maxValue:N},get minValue(){return v===null?C.minValue:v},get value(){return C.value},set value(P){C.value=P,E.setValueAtTime(P,x.context.currentTime)},cancelAndHoldAtTime(P){if(typeof C.cancelAndHoldAtTime=="function")R===null&&k.flush(x.context.currentTime),k.add(s(P)),C.cancelAndHoldAtTime(P);else{const M=Array.from(k).pop();R===null&&k.flush(x.context.currentTime),k.add(s(P));const O=Array.from(k).pop();C.cancelScheduledValues(P),M!==O&&O!==void 0&&(O.type==="exponentialRampToValue"?C.exponentialRampToValueAtTime(O.value,O.endTime):O.type==="linearRampToValue"?C.linearRampToValueAtTime(O.value,O.endTime):O.type==="setValue"?C.setValueAtTime(O.value,O.startTime):O.type==="setValueCurve"&&C.setValueCurveAtTime(O.values,O.startTime,O.duration))}return E},cancelScheduledValues(P){return R===null&&k.flush(x.context.currentTime),k.add(i(P)),C.cancelScheduledValues(P),E},exponentialRampToValueAtTime(P,M){if(P===0)throw new RangeError;if(!Number.isFinite(M)||M<0)throw new RangeError;const O=x.context.currentTime;return R===null&&k.flush(O),Array.from(k).length===0&&(k.add(h(S,O)),C.setValueAtTime(S,O)),k.add(a(P,M)),C.exponentialRampToValueAtTime(P,M),E},linearRampToValueAtTime(P,M){const O=x.context.currentTime;return R===null&&k.flush(O),Array.from(k).length===0&&(k.add(h(S,O)),C.setValueAtTime(S,O)),k.add(l(P,M)),C.linearRampToValueAtTime(P,M),E},setTargetAtTime(P,M,O){return R===null&&k.flush(x.context.currentTime),k.add(c(P,M,O)),C.setTargetAtTime(P,M,O),E},setValueAtTime(P,M){return R===null&&k.flush(x.context.currentTime),k.add(h(P,M)),C.setValueAtTime(P,M),E},setValueCurveAtTime(P,M,O){const G=P instanceof Float32Array?P:new Float32Array(P);if(p!==null&&p.name==="webkitAudioContext"){const $=M+O,X=x.context.sampleRate,H=Math.ceil(M*X),se=Math.floor($*X),fe=se-H,xe=new Float32Array(fe);for(let _e=0;_e<fe;_e+=1){const Q=(G.length-1)/O*((H+_e)/X-M),J=Math.floor(Q),ee=Math.ceil(Q);xe[_e]=J===ee?G[J]:(1-(Q-J))*G[J]+(1-(ee-Q))*G[ee]}R===null&&k.flush(x.context.currentTime),k.add(m(xe,M,O)),C.setValueCurveAtTime(xe,M,O);const Z=se/X;Z<$&&y(E,xe[xe.length-1],Z),y(E,G[G.length-1],$)}else R===null&&k.flush(x.context.currentTime),k.add(m(G,M,O)),C.setValueCurveAtTime(G,M,O);return E}};return n.set(E,C),e.set(E,x),t(E,R),E},hk=t=>({replay(e){for(const n of t)if(n.type==="exponentialRampToValue"){const{endTime:r,value:s}=n;e.exponentialRampToValueAtTime(s,r)}else if(n.type==="linearRampToValue"){const{endTime:r,value:s}=n;e.linearRampToValueAtTime(s,r)}else if(n.type==="setTarget"){const{startTime:r,target:s,timeConstant:i}=n;e.setTargetAtTime(s,r,i)}else if(n.type==="setValue"){const{startTime:r,value:s}=n;e.setValueAtTime(s,r)}else if(n.type==="setValueCurve"){const{duration:r,startTime:s,values:i}=n;e.setValueCurveAtTime(i,s,r)}else throw new Error("Can't apply an unknown automation.")}});class Xv{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((r,s)=>e.call(n,r,s,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const dk={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},fk=(t,e,n,r,s,i,a,l,c,h,m,p,y,x)=>class extends e{constructor(C,N,v){var S;const k=l(C),R=c(k),E=m({...dk,...v});y(E);const P=gd.get(k),M=P==null?void 0:P.get(N),O=R||k.state!=="closed"?k:(S=a(k))!==null&&S!==void 0?S:k,G=s(O,R?null:C.baseLatency,h,N,M,E),$=R?r(N,E,M):null;super(C,!0,G,$);const X=[];G.parameters.forEach((se,fe)=>{const xe=n(this,R,se);X.push([fe,xe])}),this._nativeAudioWorkletNode=G,this._onprocessorerror=null,this._parameters=new Xv(X),R&&t(k,this);const{activeInputs:H}=i(this);p(G,H)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(C){const N=typeof C=="function"?x(this,C):null;this._nativeAudioWorkletNode.onprocessorerror=N;const v=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=v!==null&&v===N?C:v}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Tu(t,e,n,r,s){if(typeof t.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],r,s);else{const i=t.getChannelData(r);if(e[n].byteLength===0)e[n]=i.slice(s,s+128);else{const a=new Float32Array(i.buffer,s*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(a)}}}const Qv=(t,e,n,r,s)=>{typeof t.copyToChannel=="function"?e[n].byteLength!==0&&t.copyToChannel(e[n],r,s):e[n].byteLength!==0&&t.getChannelData(r).set(e[n],s)},Cu=(t,e)=>{const n=[];for(let r=0;r<t;r+=1){const s=[],i=typeof e=="number"?e:e[r];for(let a=0;a<i;a+=1)s.push(new Float32Array(128));n.push(s)}return n},pk=(t,e)=>{const n=Xn(yd,t),r=lt(e);return Xn(n,r)},mk=async(t,e,n,r,s,i,a)=>{const l=e===null?Math.ceil(t.context.length/128)*128:e.length,c=r.channelCount*r.numberOfInputs,h=s.reduce((N,v)=>N+v,0),m=h===0?null:n.createBuffer(h,l,n.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const p=en(t),y=await pk(n,t),x=Cu(r.numberOfInputs,r.channelCount),w=Cu(r.numberOfOutputs,s),C=Array.from(t.parameters.keys()).reduce((N,v)=>({...N,[v]:new Float32Array(128)}),{});for(let N=0;N<l;N+=128){if(r.numberOfInputs>0&&e!==null)for(let v=0;v<r.numberOfInputs;v+=1)for(let S=0;S<r.channelCount;S+=1)Tu(e,x[v],S,S,N);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:v},S)=>{Tu(e,C,v,c+S,N)});for(let v=0;v<r.numberOfInputs;v+=1)for(let S=0;S<s[v];S+=1)w[v][S].byteLength===0&&(w[v][S]=new Float32Array(128));try{const v=x.map((k,R)=>p.activeInputs[R].size===0?[]:k),S=a(N/n.sampleRate,n.sampleRate,()=>y.process(v,w,C));if(m!==null)for(let k=0,R=0;k<r.numberOfOutputs;k+=1){for(let E=0;E<s[k];E+=1)Qv(m,w[k],E,R+E,N);R+=s[k]}if(!S)break}catch(v){t.dispatchEvent(new ErrorEvent("processorerror",{colno:v.colno,filename:v.filename,lineno:v.lineno,message:v.message}));break}}return m},gk=(t,e,n,r,s,i,a,l,c,h,m,p,y,x,w,C)=>(N,v,S)=>{const k=new WeakMap;let R=null;const E=async(P,M)=>{let O=m(P),G=null;const $=Xt(O,M),X=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(p===null){const H=X.reduce((Z,_e)=>Z+_e,0),se=s(M,{channelCount:Math.max(1,H),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,H)}),fe=[];for(let Z=0;Z<P.numberOfOutputs;Z+=1)fe.push(r(M,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:X[Z]}));const xe=a(M,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1});xe.connect=e.bind(null,fe),xe.disconnect=c.bind(null,fe),G=[se,fe,xe]}else $||(O=new p(M,N));if(k.set(M,G===null?O:G[2]),G!==null){if(R===null){if(S===void 0)throw new Error("Missing the processor constructor.");if(y===null)throw new Error("Missing the native OfflineAudioContext constructor.");const _e=P.channelCount*P.numberOfInputs,Q=S.parameterDescriptors===void 0?0:S.parameterDescriptors.length,J=_e+Q;R=mk(P,J===0?null:await(async()=>{const me=new y(J,Math.ceil(P.context.length/128)*128,M.sampleRate),Te=[],Ye=[];for(let ye=0;ye<v.numberOfInputs;ye+=1)Te.push(a(me,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),Ye.push(s(me,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));const Je=await Promise.all(Array.from(P.parameters.values()).map(async ye=>{const Ae=i(me,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ye.value});return await x(me,ye,Ae.offset),Ae})),Ee=r(me,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,_e+Q)});for(let ye=0;ye<v.numberOfInputs;ye+=1){Te[ye].connect(Ye[ye]);for(let Ae=0;Ae<v.channelCount;Ae+=1)Ye[ye].connect(Ee,Ae,ye*v.channelCount+Ae)}for(const[ye,Ae]of Je.entries())Ae.connect(Ee,0,_e+ye),Ae.start(0);return Ee.connect(me.destination),await Promise.all(Te.map(ye=>w(P,me,ye))),C(me)})(),M,v,X,S,h)}const H=await R,se=n(M,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[fe,xe,Z]=G;H!==null&&(se.buffer=H,se.start(0)),se.connect(fe);for(let _e=0,Q=0;_e<P.numberOfOutputs;_e+=1){const J=xe[_e];for(let ee=0;ee<X[_e];ee+=1)fe.connect(J,Q+ee,ee);Q+=X[_e]}return Z}if($)for(const[H,se]of P.parameters.entries())await t(M,se,O.parameters.get(H));else for(const[H,se]of P.parameters.entries())await x(M,se,O.parameters.get(H));return await w(P,M,O),O};return{render(P,M){l(M,P);const O=k.get(M);return O!==void 0?Promise.resolve(O):E(P,M)}}},yk=(t,e,n,r,s,i,a,l,c,h,m,p,y,x,w,C,N,v,S,k)=>class extends w{constructor(E,P){super(E,P),this._nativeContext=E,this._audioWorklet=t===void 0?void 0:{addModule:(M,O)=>t(this,M,O)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new s(this)}createBuffer(E,P,M){return new n({length:P,numberOfChannels:E,sampleRate:M})}createBufferSource(){return new r(this)}createChannelMerger(E=6){return new i(this,{numberOfInputs:E})}createChannelSplitter(E=6){return new a(this,{numberOfOutputs:E})}createConstantSource(){return new l(this)}createConvolver(){return new c(this)}createDelay(E=1){return new m(this,{maxDelayTime:E})}createDynamicsCompressor(){return new p(this)}createGain(){return new y(this)}createIIRFilter(E,P){return new x(this,{feedback:P,feedforward:E})}createOscillator(){return new C(this)}createPanner(){return new N(this)}createPeriodicWave(E,P,M={disableNormalization:!1}){return new v(this,{...M,imag:P,real:E})}createStereoPanner(){return new S(this)}createWaveShaper(){return new k(this)}decodeAudioData(E,P,M){return h(this._nativeContext,E).then(O=>(typeof P=="function"&&P(O),O),O=>{throw typeof M=="function"&&M(O),O})}},vk={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},_k=(t,e,n,r,s,i,a,l)=>class extends t{constructor(h,m){const p=i(h),y={...vk,...m},x=s(p,y),w=a(p),C=w?n():null;super(h,!1,x,C),this._Q=e(this,w,x.Q,Zt,un),this._detune=e(this,w,x.detune,1200*Math.log2(Zt),-1200*Math.log2(Zt)),this._frequency=e(this,w,x.frequency,h.sampleRate/2,0),this._gain=e(this,w,x.gain,40*Math.log10(Zt),un),this._nativeBiquadFilterNode=x,l(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(h){this._nativeBiquadFilterNode.type=h}getFrequencyResponse(h,m,p){try{this._nativeBiquadFilterNode.getFrequencyResponse(h,m,p)}catch(y){throw y.code===11?r():y}if(h.length!==m.length||m.length!==p.length)throw r()}},wk=(t,e,n,r,s)=>()=>{const i=new WeakMap,a=async(l,c)=>{let h=n(l);const m=Xt(h,c);if(!m){const p={Q:h.Q.value,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,gain:h.gain.value,type:h.type};h=e(c,p)}return i.set(c,h),m?(await t(c,l.Q,h.Q),await t(c,l.detune,h.detune),await t(c,l.frequency,h.frequency),await t(c,l.gain,h.gain)):(await r(c,l.Q,h.Q),await r(c,l.detune,h.detune),await r(c,l.frequency,h.frequency),await r(c,l.gain,h.gain)),await s(l,c,h),h};return{render(l,c){const h=i.get(c);return h!==void 0?Promise.resolve(h):a(l,c)}}},xk=(t,e)=>(n,r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t.get(n);if(i!==void 0)return i;try{const a=r();return a instanceof Promise?(t.set(n,a),a.catch(()=>!1).then(l=>(t.delete(n),e.set(n,l),l))):(e.set(n,a),a)}catch{return e.set(n,!1),!1}},kk={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Sk=(t,e,n,r,s)=>class extends t{constructor(a,l){const c=r(a),h={...kk,...l},m=n(c,h),p=s(c)?e():null;super(a,!1,m,p)}},Tk=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,a)=>{let l=e(i);if(!Xt(l,a)){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,numberOfInputs:l.numberOfInputs};l=t(a,h)}return r.set(a,l),await n(i,a,l),l};return{render(i,a){const l=r.get(a);return l!==void 0?Promise.resolve(l):s(i,a)}}},Ck={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},bk=(t,e,n,r,s,i)=>class extends t{constructor(l,c){const h=r(l),m=i({...Ck,...c}),p=n(h,m),y=s(h)?e():null;super(l,!1,p,y)}},Ek=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,a)=>{let l=e(i);if(!Xt(l,a)){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,numberOfOutputs:l.numberOfOutputs};l=t(a,h)}return r.set(a,l),await n(i,a,l),l};return{render(i,a){const l=r.get(a);return l!==void 0?Promise.resolve(l):s(i,a)}}},Ak=t=>(e,n,r)=>t(n,e,r),Nk=t=>(e,n,r=0,s=0)=>{const i=e[r];if(i===void 0)throw t();return Su(n)?i.connect(n,0,s):i.connect(n,0)},Ok=t=>(e,n)=>{const r=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),s=e.createBuffer(1,2,44100);return r.buffer=s,r.loop=!0,r.connect(n),r.start(),()=>{r.stop(),r.disconnect(n)}},Ik={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Pk=(t,e,n,r,s,i,a)=>class extends t{constructor(c,h){const m=s(c),p={...Ik,...h},y=r(m,p),x=i(m),w=x?n():null;super(c,!1,y,w),this._constantSourceNodeRenderer=w,this._nativeConstantSourceNode=y,this._offset=e(this,x,y.offset,Zt,un),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const h=typeof c=="function"?a(this,c):null;this._nativeConstantSourceNode.onended=h;const m=this._nativeConstantSourceNode.onended;this._onended=m!==null&&m===h?c:m}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){Zi(this);const h=()=>{this._nativeConstantSourceNode.removeEventListener("ended",h),Tr(this)&&Na(this)};this._nativeConstantSourceNode.addEventListener("ended",h)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}},Mk=(t,e,n,r,s)=>()=>{const i=new WeakMap;let a=null,l=null;const c=async(h,m)=>{let p=n(h);const y=Xt(p,m);if(!y){const x={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,offset:p.offset.value};p=e(m,x),a!==null&&p.start(a),l!==null&&p.stop(l)}return i.set(m,p),y?await t(m,h.offset,p.offset):await r(m,h.offset,p.offset),await s(h,m,p),p};return{set start(h){a=h},set stop(h){l=h},render(h,m){const p=i.get(m);return p!==void 0?Promise.resolve(p):c(h,m)}}},Dk=t=>e=>(t[0]=e,t[0]),Rk={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},jk=(t,e,n,r,s,i)=>class extends t{constructor(l,c){const h=r(l),m={...Rk,...c},p=n(h,m),x=s(h)?e():null;super(l,!1,p,x),this._isBufferNullified=!1,this._nativeConvolverNode=p,m.buffer!==null&&i(this,m.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(l){if(this._nativeConvolverNode.buffer=l,l===null&&this._nativeConvolverNode.buffer!==null){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(l){this._nativeConvolverNode.normalize=l}},Fk=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,a)=>{let l=e(i);if(!Xt(l,a)){const h={buffer:l.buffer,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,disableNormalization:!l.normalize};l=t(a,h)}return r.set(a,l),ao(l)?await n(i,a,l.inputs[0]):await n(i,a,l),l};return{render(i,a){const l=r.get(a);return l!==void 0?Promise.resolve(l):s(i,a)}}},Lk=(t,e)=>(n,r,s)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,r,s)}catch(i){throw i.name==="SyntaxError"?t():i}},Vk=()=>new DOMException("","DataCloneError"),Jm=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(r=>{const s=()=>{n.onmessage=null,e.close(),n.close(),r()};n.onmessage=()=>s();try{e.postMessage(t,[t])}catch{}finally{s()}})},Bk=(t,e,n,r,s,i,a,l,c,h,m)=>(p,y)=>{const x=a(p)?p:i(p);if(s.has(y)){const w=n();return Promise.reject(w)}try{s.add(y)}catch{}return e(c,()=>c(x))?x.decodeAudioData(y).then(w=>(Jm(y).catch(()=>{}),e(l,()=>l(w))||m(w),t.add(w),w)):new Promise((w,C)=>{const N=async()=>{try{await Jm(y)}catch{}},v=S=>{C(S),N()};try{x.decodeAudioData(y,S=>{typeof S.copyFromChannel!="function"&&(h(S),Sf(S)),t.add(S),N().then(()=>w(S))},S=>{v(S===null?r():S)})}catch(S){v(S)}})},Wk=(t,e,n,r,s,i,a,l)=>(c,h)=>{const m=e.get(c);if(m===void 0)throw new Error("Missing the expected cycle count.");const p=i(c.context),y=l(p);if(m===h){if(e.delete(c),!y&&a(c)){const x=r(c),{outputs:w}=n(c);for(const C of w)if(Ia(C)){const N=r(C[0]);t(x,N,C[1],C[2])}else{const N=s(C[0]);x.connect(N,C[1])}}}else e.set(c,m-h)},zk={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Uk=(t,e,n,r,s,i,a)=>class extends t{constructor(c,h){const m=s(c),p={...zk,...h},y=r(m,p),x=i(m),w=x?n(p.maxDelayTime):null;super(c,!1,y,w),this._delayTime=e(this,x,y.delayTime),a(this,p.maxDelayTime)}get delayTime(){return this._delayTime}},qk=(t,e,n,r,s)=>i=>{const a=new WeakMap,l=async(c,h)=>{let m=n(c);const p=Xt(m,h);if(!p){const y={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,delayTime:m.delayTime.value,maxDelayTime:i};m=e(h,y)}return a.set(h,m),p?await t(h,c.delayTime,m.delayTime):await r(h,c.delayTime,m.delayTime),await s(c,h,m),m};return{render(c,h){const m=a.get(h);return m!==void 0?Promise.resolve(m):l(c,h)}}},$k=t=>(e,n,r,s)=>t(e[s],i=>i[0]===n&&i[1]===r),Kk=t=>(e,n)=>{t(e).delete(n)},Gk=t=>"delayTime"in t,Hk=(t,e,n)=>function r(s,i){const a=wu(i)?i:n(t,i);if(Gk(a))return[];if(s[0]===a)return[s];if(s.includes(a))return[];const{outputs:l}=e(a);return Array.from(l).map(c=>r([...s,a],c[0])).reduce((c,h)=>c.concat(h),[])},El=(t,e,n)=>{const r=e[n];if(r===void 0)throw t();return r},Xk=t=>(e,n=void 0,r=void 0,s=0)=>n===void 0?e.forEach(i=>i.disconnect()):typeof n=="number"?El(t,e,n).disconnect():Su(n)?r===void 0?e.forEach(i=>i.disconnect(n)):s===void 0?El(t,e,r).disconnect(n,0):El(t,e,r).disconnect(n,0,s):r===void 0?e.forEach(i=>i.disconnect(n)):El(t,e,r).disconnect(n,0),Qk={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Yk=(t,e,n,r,s,i,a,l)=>class extends t{constructor(h,m){const p=i(h),y={...Qk,...m},x=r(p,y),w=a(p),C=w?n():null;super(h,!1,x,C),this._attack=e(this,w,x.attack),this._knee=e(this,w,x.knee),this._nativeDynamicsCompressorNode=x,this._ratio=e(this,w,x.ratio),this._release=e(this,w,x.release),this._threshold=e(this,w,x.threshold),l(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(h){const m=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=h,h>2)throw this._nativeDynamicsCompressorNode.channelCount=m,s()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(h){const m=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=h,h==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=m,s()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},Zk=(t,e,n,r,s)=>()=>{const i=new WeakMap,a=async(l,c)=>{let h=n(l);const m=Xt(h,c);if(!m){const p={attack:h.attack.value,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,knee:h.knee.value,ratio:h.ratio.value,release:h.release.value,threshold:h.threshold.value};h=e(c,p)}return i.set(c,h),m?(await t(c,l.attack,h.attack),await t(c,l.knee,h.knee),await t(c,l.ratio,h.ratio),await t(c,l.release,h.release),await t(c,l.threshold,h.threshold)):(await r(c,l.attack,h.attack),await r(c,l.knee,h.knee),await r(c,l.ratio,h.ratio),await r(c,l.release,h.release),await r(c,l.threshold,h.threshold)),await s(l,c,h),h};return{render(l,c){const h=i.get(c);return h!==void 0?Promise.resolve(h):a(l,c)}}},Jk=()=>new DOMException("","EncodingError"),eS=t=>e=>new Promise((n,r)=>{if(t===null){r(new SyntaxError);return}const s=t.document.head;if(s===null)r(new SyntaxError);else{const i=t.document.createElement("script"),a=new Blob([e],{type:"application/javascript"}),l=URL.createObjectURL(a),c=t.onerror,h=()=>{t.onerror=c,URL.revokeObjectURL(l)};t.onerror=(m,p,y,x,w)=>{if(p===l||p===t.location.href&&y===1&&x===1)return h(),r(w),!1;if(c!==null)return c(m,p,y,x,w)},i.onerror=()=>{h(),r(new SyntaxError)},i.onload=()=>{h(),n()},i.src=l,i.type="module",s.appendChild(i)}}),tS=t=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,r,s){if(r!==null){let i=this._listeners.get(r);i===void 0&&(i=t(this,r),typeof r=="function"&&this._listeners.set(r,i)),this._nativeEventTarget.addEventListener(n,i,s)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,r,s){const i=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(n,i===void 0?null:i,s)}},nS=t=>(e,n,r)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}},rS=t=>async e=>{try{const n=await fetch(e);if(n.ok)return[await n.text(),n.url]}catch{}throw t()},sS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},iS=(t,e,n,r,s,i)=>class extends t{constructor(l,c){const h=s(l),m={...sS,...c},p=r(h,m),y=i(h),x=y?n():null;super(l,!1,p,x),this._gain=e(this,y,p.gain,Zt,un)}get gain(){return this._gain}},oS=(t,e,n,r,s)=>()=>{const i=new WeakMap,a=async(l,c)=>{let h=n(l);const m=Xt(h,c);if(!m){const p={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,gain:h.gain.value};h=e(c,p)}return i.set(c,h),m?await t(c,l.gain,h.gain):await r(c,l.gain,h.gain),await s(l,c,h),h};return{render(l,c){const h=i.get(c);return h!==void 0?Promise.resolve(h):a(l,c)}}},aS=(t,e)=>n=>e(t,n),lS=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},uS=t=>e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:0},cS=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},hS=t=>e=>t.get(e),jt=()=>new DOMException("","InvalidStateError"),dS=t=>e=>{const n=t.get(e);if(n===void 0)throw jt();return n},fS=(t,e)=>n=>{let r=t.get(n);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),t.set(n,r),r},pS=t=>e=>{const n=t.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},sc=()=>new DOMException("","InvalidAccessError"),mS=t=>{t.getFrequencyResponse=(e=>(n,r,s)=>{if(n.length!==r.length||r.length!==s.length)throw sc();return e.call(t,n,r,s)})(t.getFrequencyResponse)},gS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},yS=(t,e,n,r,s,i)=>class extends t{constructor(l,c){const h=r(l),m=s(h),p={...gS,...c},y=e(h,m?null:l.baseLatency,p),x=m?n(p.feedback,p.feedforward):null;super(l,!1,y,x),mS(y),this._nativeIIRFilterNode=y,i(this,1)}getFrequencyResponse(l,c,h){return this._nativeIIRFilterNode.getFrequencyResponse(l,c,h)}},Yv=(t,e,n,r,s,i,a,l,c,h,m)=>{const p=h.length;let y=l;for(let x=0;x<p;x+=1){let w=n[0]*h[x];for(let C=1;C<s;C+=1){const N=y-C&c-1;w+=n[C]*i[N],w-=t[C]*a[N]}for(let C=s;C<r;C+=1)w+=n[C]*i[y-C&c-1];for(let C=s;C<e;C+=1)w-=t[C]*a[y-C&c-1];i[y]=h[x],a[y]=w,y=y+1&c-1,m[x]=w}return y},vS=(t,e,n,r)=>{const s=n instanceof Float64Array?n:new Float64Array(n),i=r instanceof Float64Array?r:new Float64Array(r),a=s.length,l=i.length,c=Math.min(a,l);if(s[0]!==1){for(let w=0;w<a;w+=1)i[w]/=s[0];for(let w=1;w<l;w+=1)s[w]/=s[0]}const h=32,m=new Float32Array(h),p=new Float32Array(h),y=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),x=t.numberOfChannels;for(let w=0;w<x;w+=1){const C=t.getChannelData(w),N=y.getChannelData(w);m.fill(0),p.fill(0),Yv(s,a,i,l,c,m,p,0,h,C,N)}return y},_S=(t,e,n,r,s)=>(i,a)=>{const l=new WeakMap;let c=null;const h=async(m,p)=>{let y=null,x=e(m);const w=Xt(x,p);if(p.createIIRFilter===void 0?y=t(p,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):w||(x=p.createIIRFilter(a,i)),l.set(p,y===null?x:y),y!==null){if(c===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const N=new n(m.context.destination.channelCount,m.context.length,p.sampleRate);c=(async()=>{await r(m,N,N.destination);const v=await s(N);return vS(v,p,i,a)})()}const C=await c;return y.buffer=C,y.start(0),y}return await r(m,p,x),x};return{render(m,p){const y=l.get(p);return y!==void 0?Promise.resolve(y):h(m,p)}}},wS=(t,e,n,r,s,i)=>a=>(l,c)=>{const h=t.get(l);if(h===void 0){if(!a&&i(l)){const m=r(l),{outputs:p}=n(l);for(const y of p)if(Ia(y)){const x=r(y[0]);e(m,x,y[1],y[2])}else{const x=s(y[0]);m.disconnect(x,y[1])}}t.set(l,c)}else t.set(l,h+c)},xS=(t,e)=>n=>{const r=t.get(n);return e(r)||e(n)},kS=(t,e)=>n=>t.has(n)||e(n),SS=(t,e)=>n=>t.has(n)||e(n),TS=(t,e)=>n=>{const r=t.get(n);return e(r)||e(n)},CS=t=>e=>t!==null&&e instanceof t,bS=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode,ES=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam,AS=(t,e)=>n=>t(n)||e(n),NS=t=>e=>t!==null&&e instanceof t,OS=t=>t!==null&&t.isSecureContext,IS=(t,e,n,r)=>class extends t{constructor(i,a){const l=n(i),c=e(l,a);if(r(l))throw TypeError();super(i,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},PS={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},MS=(t,e,n,r)=>class extends t{constructor(i,a){const l=n(i);if(r(l))throw new TypeError;const c={...PS,...a},h=e(l,c);super(i,!1,h,null),this._nativeMediaStreamAudioDestinationNode=h}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},DS=(t,e,n,r)=>class extends t{constructor(i,a){const l=n(i),c=e(l,a);if(r(l))throw new TypeError;super(i,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},RS=(t,e,n)=>class extends t{constructor(s,i){const a=n(s),l=e(a,i);super(s,!0,l,null)}},jS=(t,e,n,r,s,i)=>class extends n{constructor(l,c){super(l),this._nativeContext=l,nc.set(this,l),r(l)&&s.set(l,new Set),this._destination=new t(this,c),this._listener=e(this,l),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(l){const c=typeof l=="function"?i(this,l):null;this._nativeContext.onstatechange=c;const h=this._nativeContext.onstatechange;this._onstatechange=h!==null&&h===c?l:h}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},ha=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},FS=(t,e)=>(n,r,s)=>{const i=new Set;return n.connect=(a=>(l,c=0,h=0)=>{const m=i.size===0;if(e(l))return a.call(n,l,c,h),t(i,[l,c,h],p=>p[0]===l&&p[1]===c&&p[2]===h,!0),m&&r(),l;a.call(n,l,c),t(i,[l,c],p=>p[0]===l&&p[1]===c,!0),m&&r()})(n.connect),n.disconnect=(a=>(l,c,h)=>{const m=i.size>0;if(l===void 0)a.apply(n),i.clear();else if(typeof l=="number"){a.call(n,l);for(const y of i)y[1]===l&&i.delete(y)}else{e(l)?a.call(n,l,c,h):a.call(n,l,c);for(const y of i)y[0]===l&&(c===void 0||y[1]===c)&&(h===void 0||y[2]===h)&&i.delete(y)}const p=i.size===0;m&&p&&s()})(n.disconnect),n},ht=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n]&&(t[n]=r)},It=(t,e)=>{ht(t,e,"channelCount"),ht(t,e,"channelCountMode"),ht(t,e,"channelInterpretation")},eg=t=>typeof t.getFloatTimeDomainData=="function",LS=t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const r=Math.max(n.length,t.fftSize);for(let s=0;s<r;s+=1)e[s]=(n[s]-128)*.0078125;return e}},VS=(t,e)=>(n,r)=>{const s=n.createAnalyser();if(It(s,r),!(r.maxDecibels>r.minDecibels))throw e();return ht(s,r,"fftSize"),ht(s,r,"maxDecibels"),ht(s,r,"minDecibels"),ht(s,r,"smoothingTimeConstant"),t(eg,()=>eg(s))||LS(s),s},BS=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null,vt=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n].value&&(t[n].value=r)},WS=t=>{t.start=(e=>{let n=!1;return(r=0,s=0,i)=>{if(n)throw jt();e.call(t,r,s,i),n=!0}})(t.start)},bf=t=>{t.start=(e=>(n=0,r=0,s)=>{if(typeof s=="number"&&s<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,r,s)})(t.start)},Ef=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)},zS=(t,e,n,r,s,i,a,l,c,h,m)=>(p,y)=>{const x=p.createBufferSource();return It(x,y),vt(x,y,"playbackRate"),ht(x,y,"buffer"),ht(x,y,"loop"),ht(x,y,"loopEnd"),ht(x,y,"loopStart"),e(n,()=>n(p))||WS(x),e(r,()=>r(p))||c(x),e(s,()=>s(p))||h(x,p),e(i,()=>i(p))||bf(x),e(a,()=>a(p))||m(x,p),e(l,()=>l(p))||Ef(x),t(p,x),x},US=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null,qS=(t,e)=>(n,r,s)=>{const i=n.destination;if(i.channelCount!==r)try{i.channelCount=r}catch{}s&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:r});const a=t(n,{channelCount:r,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(a,"channelCount",l=>()=>l.call(a),l=>c=>{l.call(a,c);try{i.channelCount=c}catch(h){if(c>i.maxChannelCount)throw h}}),e(a,"channelCountMode",l=>()=>l.call(a),l=>c=>{l.call(a,c),i.channelCountMode=c}),e(a,"channelInterpretation",l=>()=>l.call(a),l=>c=>{l.call(a,c),i.channelInterpretation=c}),Object.defineProperty(a,"maxChannelCount",{get:()=>i.maxChannelCount}),a.connect(i),a},$S=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null,KS=t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},GS=(t,e,n,r,s)=>(i,a,l,c,h,m)=>{if(l!==null)try{const p=new l(i,c,m),y=new Map;let x=null;if(Object.defineProperties(p,{channelCount:{get:()=>m.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>x,set:w=>{typeof x=="function"&&p.removeEventListener("processorerror",x),x=typeof w=="function"?w:null,typeof x=="function"&&p.addEventListener("processorerror",x)}}}),p.addEventListener=(w=>(...C)=>{if(C[0]==="processorerror"){const N=typeof C[1]=="function"?C[1]:typeof C[1]=="object"&&C[1]!==null&&typeof C[1].handleEvent=="function"?C[1].handleEvent:null;if(N!==null){const v=y.get(C[1]);v!==void 0?C[1]=v:(C[1]=S=>{S.type==="error"?(Object.defineProperties(S,{type:{value:"processorerror"}}),N(S)):N(new ErrorEvent(C[0],{...S}))},y.set(N,C[1]))}}return w.call(p,"error",C[1],C[2]),w.call(p,...C)})(p.addEventListener),p.removeEventListener=(w=>(...C)=>{if(C[0]==="processorerror"){const N=y.get(C[1]);N!==void 0&&(y.delete(C[1]),C[1]=N)}return w.call(p,"error",C[1],C[2]),w.call(p,C[0],C[1],C[2])})(p.removeEventListener),m.numberOfOutputs!==0){const w=n(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return p.connect(w).connect(i.destination),s(p,()=>w.disconnect(),()=>w.connect(i.destination))}return p}catch(p){throw p.code===11?r():p}if(h===void 0)throw r();return KS(m),e(i,a,h,m)},Zv=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),HS=t=>new Promise((e,n)=>{const{port1:r,port2:s}=new MessageChannel;r.onmessage=({data:i})=>{r.close(),s.close(),e(i)},r.onmessageerror=({data:i})=>{r.close(),s.close(),n(i)},s.postMessage(t)}),XS=async(t,e)=>{const n=await HS(e);return new t(n)},QS=(t,e,n,r)=>{let s=yd.get(t);s===void 0&&(s=new WeakMap,yd.set(t,s));const i=XS(n,r);return s.set(e,i),i},YS=(t,e,n,r,s,i,a,l,c,h,m,p,y)=>(x,w,C,N)=>{if(N.numberOfInputs===0&&N.numberOfOutputs===0)throw c();const v=Array.isArray(N.outputChannelCount)?N.outputChannelCount:Array.from(N.outputChannelCount);if(v.some(ce=>ce<1))throw c();if(v.length!==N.numberOfOutputs)throw e();if(N.channelCountMode!=="explicit")throw c();const S=N.channelCount*N.numberOfInputs,k=v.reduce((ce,Ce)=>ce+Ce,0),R=C.parameterDescriptors===void 0?0:C.parameterDescriptors.length;if(S+R>6||k>6)throw c();const E=new MessageChannel,P=[],M=[];for(let ce=0;ce<N.numberOfInputs;ce+=1)P.push(a(x,{channelCount:N.channelCount,channelCountMode:N.channelCountMode,channelInterpretation:N.channelInterpretation,gain:1})),M.push(s(x,{channelCount:N.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:N.channelCount}));const O=[];if(C.parameterDescriptors!==void 0)for(const{defaultValue:ce,maxValue:Ce,minValue:it,name:He}of C.parameterDescriptors){const Se=i(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:N.parameterData[He]!==void 0?N.parameterData[He]:ce===void 0?0:ce});Object.defineProperties(Se.offset,{defaultValue:{get:()=>ce===void 0?0:ce},maxValue:{get:()=>Ce===void 0?Zt:Ce},minValue:{get:()=>it===void 0?un:it}}),O.push(Se)}const G=r(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,S+R)}),$=Zv(w,x.sampleRate),X=l(x,$,S+R,Math.max(1,k)),H=s(x,{channelCount:Math.max(1,k),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,k)}),se=[];for(let ce=0;ce<N.numberOfOutputs;ce+=1)se.push(r(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:v[ce]}));for(let ce=0;ce<N.numberOfInputs;ce+=1){P[ce].connect(M[ce]);for(let Ce=0;Ce<N.channelCount;Ce+=1)M[ce].connect(G,Ce,ce*N.channelCount+Ce)}const fe=new Xv(C.parameterDescriptors===void 0?[]:C.parameterDescriptors.map(({name:ce},Ce)=>{const it=O[Ce];return it.connect(G,0,S+Ce),it.start(0),[ce,it.offset]}));G.connect(X);let xe=N.channelInterpretation,Z=null;const _e=N.numberOfOutputs===0?[X]:se,Q={get bufferSize(){return $},get channelCount(){return N.channelCount},set channelCount(ce){throw n()},get channelCountMode(){return N.channelCountMode},set channelCountMode(ce){throw n()},get channelInterpretation(){return xe},set channelInterpretation(ce){for(const Ce of P)Ce.channelInterpretation=ce;xe=ce},get context(){return X.context},get inputs(){return P},get numberOfInputs(){return N.numberOfInputs},get numberOfOutputs(){return N.numberOfOutputs},get onprocessorerror(){return Z},set onprocessorerror(ce){typeof Z=="function"&&Q.removeEventListener("processorerror",Z),Z=typeof ce=="function"?ce:null,typeof Z=="function"&&Q.addEventListener("processorerror",Z)},get parameters(){return fe},get port(){return E.port2},addEventListener(...ce){return X.addEventListener(ce[0],ce[1],ce[2])},connect:t.bind(null,_e),disconnect:h.bind(null,_e),dispatchEvent(...ce){return X.dispatchEvent(ce[0])},removeEventListener(...ce){return X.removeEventListener(ce[0],ce[1],ce[2])}},J=new Map;E.port1.addEventListener=(ce=>(...Ce)=>{if(Ce[0]==="message"){const it=typeof Ce[1]=="function"?Ce[1]:typeof Ce[1]=="object"&&Ce[1]!==null&&typeof Ce[1].handleEvent=="function"?Ce[1].handleEvent:null;if(it!==null){const He=J.get(Ce[1]);He!==void 0?Ce[1]=He:(Ce[1]=Se=>{m(x.currentTime,x.sampleRate,()=>it(Se))},J.set(it,Ce[1]))}}return ce.call(E.port1,Ce[0],Ce[1],Ce[2])})(E.port1.addEventListener),E.port1.removeEventListener=(ce=>(...Ce)=>{if(Ce[0]==="message"){const it=J.get(Ce[1]);it!==void 0&&(J.delete(Ce[1]),Ce[1]=it)}return ce.call(E.port1,Ce[0],Ce[1],Ce[2])})(E.port1.removeEventListener);let ee=null;Object.defineProperty(E.port1,"onmessage",{get:()=>ee,set:ce=>{typeof ee=="function"&&E.port1.removeEventListener("message",ee),ee=typeof ce=="function"?ce:null,typeof ee=="function"&&(E.port1.addEventListener("message",ee),E.port1.start())}}),C.prototype.port=E.port1;let me=null;QS(x,Q,C,N).then(ce=>me=ce);const Ye=Cu(N.numberOfInputs,N.channelCount),Je=Cu(N.numberOfOutputs,v),Ee=C.parameterDescriptors===void 0?[]:C.parameterDescriptors.reduce((ce,{name:Ce})=>({...ce,[Ce]:new Float32Array(128)}),{});let ye=!0;const Ae=()=>{N.numberOfOutputs>0&&X.disconnect(H);for(let ce=0,Ce=0;ce<N.numberOfOutputs;ce+=1){const it=se[ce];for(let He=0;He<v[ce];He+=1)H.disconnect(it,Ce+He,He);Ce+=v[ce]}},le=new Map;X.onaudioprocess=({inputBuffer:ce,outputBuffer:Ce})=>{if(me!==null){const it=p(Q);for(let He=0;He<$;He+=128){for(let Se=0;Se<N.numberOfInputs;Se+=1)for(let Xe=0;Xe<N.channelCount;Xe+=1)Tu(ce,Ye[Se],Xe,Xe,He);C.parameterDescriptors!==void 0&&C.parameterDescriptors.forEach(({name:Se},Xe)=>{Tu(ce,Ee,Se,S+Xe,He)});for(let Se=0;Se<N.numberOfInputs;Se+=1)for(let Xe=0;Xe<v[Se];Xe+=1)Je[Se][Xe].byteLength===0&&(Je[Se][Xe]=new Float32Array(128));try{const Se=Ye.map((et,yn)=>{if(it[yn].size>0)return le.set(yn,$/128),et;const Rr=le.get(yn);return Rr===void 0?[]:(et.every(Jn=>Jn.every(An=>An===0))&&(Rr===1?le.delete(yn):le.set(yn,Rr-1)),et)});ye=m(x.currentTime+He/x.sampleRate,x.sampleRate,()=>me.process(Se,Je,Ee));for(let et=0,yn=0;et<N.numberOfOutputs;et+=1){for(let vn=0;vn<v[et];vn+=1)Qv(Ce,Je[et],vn,yn+vn,He);yn+=v[et]}}catch(Se){ye=!1,Q.dispatchEvent(new ErrorEvent("processorerror",{colno:Se.colno,filename:Se.filename,lineno:Se.lineno,message:Se.message}))}if(!ye){for(let Se=0;Se<N.numberOfInputs;Se+=1){P[Se].disconnect(M[Se]);for(let Xe=0;Xe<N.channelCount;Xe+=1)M[He].disconnect(G,Xe,Se*N.channelCount+Xe)}if(C.parameterDescriptors!==void 0){const Se=C.parameterDescriptors.length;for(let Xe=0;Xe<Se;Xe+=1){const et=O[Xe];et.disconnect(G,0,S+Xe),et.stop()}}G.disconnect(X),X.onaudioprocess=null,de?Ae():Fe();break}}}};let de=!1;const En=a(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Ft=()=>X.connect(En).connect(x.destination),Fe=()=>{X.disconnect(En),En.disconnect()},fr=()=>{if(ye){Fe(),N.numberOfOutputs>0&&X.connect(H);for(let ce=0,Ce=0;ce<N.numberOfOutputs;ce+=1){const it=se[ce];for(let He=0;He<v[ce];He+=1)H.connect(it,Ce+He,He);Ce+=v[ce]}}de=!0},fo=()=>{ye&&(Ft(),Ae()),de=!1};return Ft(),y(Q,fr,fo)},Jv=(t,e)=>{const n=t.createBiquadFilter();return It(n,e),vt(n,e,"Q"),vt(n,e,"detune"),vt(n,e,"frequency"),vt(n,e,"gain"),ht(n,e,"type"),n},ZS=(t,e)=>(n,r)=>{const s=n.createChannelMerger(r.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(n,s),It(s,r),s},JS=t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw jt()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw jt()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw jt()}})},Pa=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return It(n,e),JS(n),n},eT=(t,e,n,r,s)=>(i,a)=>{if(i.createConstantSource===void 0)return n(i,a);const l=i.createConstantSource();return It(l,a),vt(l,a,"offset"),e(r,()=>r(i))||bf(l),e(s,()=>s(i))||Ef(l),t(i,l),l},lo=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),tT=(t,e,n,r)=>(s,{offset:i,...a})=>{const l=s.createBuffer(1,2,44100),c=e(s,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),h=n(s,{...a,gain:i}),m=l.getChannelData(0);m[0]=1,m[1]=1,c.buffer=l,c.loop=!0;const p={get bufferSize(){},get channelCount(){return h.channelCount},set channelCount(w){h.channelCount=w},get channelCountMode(){return h.channelCountMode},set channelCountMode(w){h.channelCountMode=w},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(w){h.channelInterpretation=w},get context(){return h.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get offset(){return h.gain},get onended(){return c.onended},set onended(w){c.onended=w},addEventListener(...w){return c.addEventListener(w[0],w[1],w[2])},dispatchEvent(...w){return c.dispatchEvent(w[0])},removeEventListener(...w){return c.removeEventListener(w[0],w[1],w[2])},start(w=0){c.start.call(c,w)},stop(w=0){c.stop.call(c,w)}},y=()=>c.connect(h),x=()=>c.disconnect(h);return t(s,c),r(lo(p,h),y,x)},nT=(t,e)=>(n,r)=>{const s=n.createConvolver();if(It(s,r),r.disableNormalization===s.normalize&&(s.normalize=!r.disableNormalization),ht(s,r,"buffer"),r.channelCount>2||(e(s,"channelCount",i=>()=>i.call(s),i=>a=>{if(a>2)throw t();return i.call(s,a)}),r.channelCountMode==="max"))throw t();return e(s,"channelCountMode",i=>()=>i.call(s),i=>a=>{if(a==="max")throw t();return i.call(s,a)}),s},e_=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return It(n,e),vt(n,e,"delayTime"),n},rT=t=>(e,n)=>{const r=e.createDynamicsCompressor();if(It(r,n),n.channelCount>2||n.channelCountMode==="max")throw t();return vt(r,n,"attack"),vt(r,n,"knee"),vt(r,n,"ratio"),vt(r,n,"release"),vt(r,n,"threshold"),r},gn=(t,e)=>{const n=t.createGain();return It(n,e),vt(n,e,"gain"),n},sT=t=>(e,n,r)=>{if(e.createIIRFilter===void 0)return t(e,n,r);const s=e.createIIRFilter(r.feedforward,r.feedback);return It(s,r),s};function iT(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function oT(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function tg(t,e){let n=[0,0];for(let r=t.length-1;r>=0;r-=1)n=oT(n,e),n[0]+=t[r];return n}const aT=(t,e,n,r)=>(s,i,{channelCount:a,channelCountMode:l,channelInterpretation:c,feedback:h,feedforward:m})=>{const p=Zv(i,s.sampleRate),y=h instanceof Float64Array?h:new Float64Array(h),x=m instanceof Float64Array?m:new Float64Array(m),w=y.length,C=x.length,N=Math.min(w,C);if(w===0||w>20)throw r();if(y[0]===0)throw e();if(C===0||C>20)throw r();if(x[0]===0)throw e();if(y[0]!==1){for(let O=0;O<C;O+=1)x[O]/=y[0];for(let O=1;O<w;O+=1)y[O]/=y[0]}const v=n(s,p,a,a);v.channelCount=a,v.channelCountMode=l,v.channelInterpretation=c;const S=32,k=[],R=[],E=[];for(let O=0;O<a;O+=1){k.push(0);const G=new Float32Array(S),$=new Float32Array(S);G.fill(0),$.fill(0),R.push(G),E.push($)}v.onaudioprocess=O=>{const G=O.inputBuffer,$=O.outputBuffer,X=G.numberOfChannels;for(let H=0;H<X;H+=1){const se=G.getChannelData(H),fe=$.getChannelData(H);k[H]=Yv(y,w,x,C,N,R[H],E[H],k[H],S,se,fe)}};const P=s.sampleRate/2;return lo({get bufferSize(){return p},get channelCount(){return v.channelCount},set channelCount(O){v.channelCount=O},get channelCountMode(){return v.channelCountMode},set channelCountMode(O){v.channelCountMode=O},get channelInterpretation(){return v.channelInterpretation},set channelInterpretation(O){v.channelInterpretation=O},get context(){return v.context},get inputs(){return[v]},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},addEventListener(...O){return v.addEventListener(O[0],O[1],O[2])},dispatchEvent(...O){return v.dispatchEvent(O[0])},getFrequencyResponse(O,G,$){if(O.length!==G.length||G.length!==$.length)throw t();const X=O.length;for(let H=0;H<X;H+=1){const se=-Math.PI*(O[H]/P),fe=[Math.cos(se),Math.sin(se)],xe=tg(x,fe),Z=tg(y,fe),_e=iT(xe,Z);G[H]=Math.sqrt(_e[0]*_e[0]+_e[1]*_e[1]),$[H]=Math.atan2(_e[1],_e[0])}},removeEventListener(...O){return v.removeEventListener(O[0],O[1],O[2])}},v)},lT=(t,e)=>t.createMediaElementSource(e.mediaElement),uT=(t,e)=>{const n=t.createMediaStreamDestination();return It(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},cT=(t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((i,a)=>i.id<a.id?-1:i.id>a.id?1:0);const r=n.slice(0,1),s=t.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(s,"mediaStream",{value:e}),s},hT=(t,e)=>(n,{mediaStreamTrack:r})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(r);const s=new MediaStream([r]),i=n.createMediaStreamSource(s);if(r.kind!=="audio")throw t();if(e(n))throw new TypeError;return i},dT=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null,fT=(t,e,n,r,s,i)=>(a,l)=>{const c=a.createOscillator();return It(c,l),vt(c,l,"detune"),vt(c,l,"frequency"),l.periodicWave!==void 0?c.setPeriodicWave(l.periodicWave):ht(c,l,"type"),e(n,()=>n(a))||bf(c),e(r,()=>r(a))||i(c,a),e(s,()=>s(a))||Ef(c),t(a,c),c},pT=t=>(e,n)=>{const r=e.createPanner();return r.orientationX===void 0?t(e,n):(It(r,n),vt(r,n,"orientationX"),vt(r,n,"orientationY"),vt(r,n,"orientationZ"),vt(r,n,"positionX"),vt(r,n,"positionY"),vt(r,n,"positionZ"),ht(r,n,"coneInnerAngle"),ht(r,n,"coneOuterAngle"),ht(r,n,"coneOuterGain"),ht(r,n,"distanceModel"),ht(r,n,"maxDistance"),ht(r,n,"panningModel"),ht(r,n,"refDistance"),ht(r,n,"rolloffFactor"),r)},mT=(t,e,n,r,s,i,a,l,c,h)=>(m,{coneInnerAngle:p,coneOuterAngle:y,coneOuterGain:x,distanceModel:w,maxDistance:C,orientationX:N,orientationY:v,orientationZ:S,panningModel:k,positionX:R,positionY:E,positionZ:P,refDistance:M,rolloffFactor:O,...G})=>{const $=m.createPanner();if(G.channelCount>2||G.channelCountMode==="max")throw a();It($,G);const X={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},H=n(m,{...X,channelInterpretation:"speakers",numberOfInputs:6}),se=r(m,{...G,gain:1}),fe=r(m,{...X,gain:1}),xe=r(m,{...X,gain:0}),Z=r(m,{...X,gain:0}),_e=r(m,{...X,gain:0}),Q=r(m,{...X,gain:0}),J=r(m,{...X,gain:0}),ee=s(m,256,6,1),me=i(m,{...X,curve:new Float32Array([1,1]),oversample:"none"});let Te=[N,v,S],Ye=[R,E,P];const Je=new Float32Array(1);ee.onaudioprocess=({inputBuffer:le})=>{const de=[c(le,Je,0),c(le,Je,1),c(le,Je,2)];de.some((Ft,Fe)=>Ft!==Te[Fe])&&($.setOrientation(...de),Te=de);const En=[c(le,Je,3),c(le,Je,4),c(le,Je,5)];En.some((Ft,Fe)=>Ft!==Ye[Fe])&&($.setPosition(...En),Ye=En)},Object.defineProperty(xe.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(_e.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Q.gain,"defaultValue",{get:()=>0}),Object.defineProperty(J.gain,"defaultValue",{get:()=>0});const Ee={get bufferSize(){},get channelCount(){return $.channelCount},set channelCount(le){if(le>2)throw a();se.channelCount=le,$.channelCount=le},get channelCountMode(){return $.channelCountMode},set channelCountMode(le){if(le==="max")throw a();se.channelCountMode=le,$.channelCountMode=le},get channelInterpretation(){return $.channelInterpretation},set channelInterpretation(le){se.channelInterpretation=le,$.channelInterpretation=le},get coneInnerAngle(){return $.coneInnerAngle},set coneInnerAngle(le){$.coneInnerAngle=le},get coneOuterAngle(){return $.coneOuterAngle},set coneOuterAngle(le){$.coneOuterAngle=le},get coneOuterGain(){return $.coneOuterGain},set coneOuterGain(le){if(le<0||le>1)throw e();$.coneOuterGain=le},get context(){return $.context},get distanceModel(){return $.distanceModel},set distanceModel(le){$.distanceModel=le},get inputs(){return[se]},get maxDistance(){return $.maxDistance},set maxDistance(le){if(le<0)throw new RangeError;$.maxDistance=le},get numberOfInputs(){return $.numberOfInputs},get numberOfOutputs(){return $.numberOfOutputs},get orientationX(){return fe.gain},get orientationY(){return xe.gain},get orientationZ(){return Z.gain},get panningModel(){return $.panningModel},set panningModel(le){$.panningModel=le},get positionX(){return _e.gain},get positionY(){return Q.gain},get positionZ(){return J.gain},get refDistance(){return $.refDistance},set refDistance(le){if(le<0)throw new RangeError;$.refDistance=le},get rolloffFactor(){return $.rolloffFactor},set rolloffFactor(le){if(le<0)throw new RangeError;$.rolloffFactor=le},addEventListener(...le){return se.addEventListener(le[0],le[1],le[2])},dispatchEvent(...le){return se.dispatchEvent(le[0])},removeEventListener(...le){return se.removeEventListener(le[0],le[1],le[2])}};p!==Ee.coneInnerAngle&&(Ee.coneInnerAngle=p),y!==Ee.coneOuterAngle&&(Ee.coneOuterAngle=y),x!==Ee.coneOuterGain&&(Ee.coneOuterGain=x),w!==Ee.distanceModel&&(Ee.distanceModel=w),C!==Ee.maxDistance&&(Ee.maxDistance=C),N!==Ee.orientationX.value&&(Ee.orientationX.value=N),v!==Ee.orientationY.value&&(Ee.orientationY.value=v),S!==Ee.orientationZ.value&&(Ee.orientationZ.value=S),k!==Ee.panningModel&&(Ee.panningModel=k),R!==Ee.positionX.value&&(Ee.positionX.value=R),E!==Ee.positionY.value&&(Ee.positionY.value=E),P!==Ee.positionZ.value&&(Ee.positionZ.value=P),M!==Ee.refDistance&&(Ee.refDistance=M),O!==Ee.rolloffFactor&&(Ee.rolloffFactor=O),(Te[0]!==1||Te[1]!==0||Te[2]!==0)&&$.setOrientation(...Te),(Ye[0]!==0||Ye[1]!==0||Ye[2]!==0)&&$.setPosition(...Ye);const ye=()=>{se.connect($),t(se,me,0,0),me.connect(fe).connect(H,0,0),me.connect(xe).connect(H,0,1),me.connect(Z).connect(H,0,2),me.connect(_e).connect(H,0,3),me.connect(Q).connect(H,0,4),me.connect(J).connect(H,0,5),H.connect(ee).connect(m.destination)},Ae=()=>{se.disconnect($),l(se,me,0,0),me.disconnect(fe),fe.disconnect(H),me.disconnect(xe),xe.disconnect(H),me.disconnect(Z),Z.disconnect(H),me.disconnect(_e),_e.disconnect(H),me.disconnect(Q),Q.disconnect(H),me.disconnect(J),J.disconnect(H),H.disconnect(ee),ee.disconnect(m.destination)};return h(lo(Ee,$),ye,Ae)},gT=t=>(e,{disableNormalization:n,imag:r,real:s})=>{const i=r instanceof Float32Array?r:new Float32Array(r),a=s instanceof Float32Array?s:new Float32Array(s),l=e.createPeriodicWave(a,i,{disableNormalization:n});if(Array.from(r).length<2)throw t();return l},Ma=(t,e,n,r)=>t.createScriptProcessor(e,n,r),yT=(t,e)=>(n,r)=>{const s=r.channelCountMode;if(s==="clamped-max")throw e();if(n.createStereoPanner===void 0)return t(n,r);const i=n.createStereoPanner();return It(i,r),vt(i,r,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>s,set:a=>{if(a!==s)throw e()}}),i},vT=(t,e,n,r,s,i)=>{const l=new Float32Array([1,1]),c=Math.PI/2,h={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},m={...h,oversample:"none"},p=(w,C,N,v)=>{const S=new Float32Array(16385),k=new Float32Array(16385);for(let G=0;G<16385;G+=1){const $=G/16384*c;S[G]=Math.cos($),k[G]=Math.sin($)}const R=n(w,{...h,gain:0}),E=r(w,{...m,curve:S}),P=r(w,{...m,curve:l}),M=n(w,{...h,gain:0}),O=r(w,{...m,curve:k});return{connectGraph(){C.connect(R),C.connect(P.inputs===void 0?P:P.inputs[0]),C.connect(M),P.connect(N),N.connect(E.inputs===void 0?E:E.inputs[0]),N.connect(O.inputs===void 0?O:O.inputs[0]),E.connect(R.gain),O.connect(M.gain),R.connect(v,0,0),M.connect(v,0,1)},disconnectGraph(){C.disconnect(R),C.disconnect(P.inputs===void 0?P:P.inputs[0]),C.disconnect(M),P.disconnect(N),N.disconnect(E.inputs===void 0?E:E.inputs[0]),N.disconnect(O.inputs===void 0?O:O.inputs[0]),E.disconnect(R.gain),O.disconnect(M.gain),R.disconnect(v,0,0),M.disconnect(v,0,1)}}},y=(w,C,N,v)=>{const S=new Float32Array(16385),k=new Float32Array(16385),R=new Float32Array(16385),E=new Float32Array(16385),P=Math.floor(16385/2);for(let _e=0;_e<16385;_e+=1)if(_e>P){const Q=(_e-P)/(16384-P)*c;S[_e]=Math.cos(Q),k[_e]=Math.sin(Q),R[_e]=0,E[_e]=1}else{const Q=_e/(16384-P)*c;S[_e]=1,k[_e]=0,R[_e]=Math.cos(Q),E[_e]=Math.sin(Q)}const M=e(w,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),O=n(w,{...h,gain:0}),G=r(w,{...m,curve:S}),$=n(w,{...h,gain:0}),X=r(w,{...m,curve:k}),H=r(w,{...m,curve:l}),se=n(w,{...h,gain:0}),fe=r(w,{...m,curve:R}),xe=n(w,{...h,gain:0}),Z=r(w,{...m,curve:E});return{connectGraph(){C.connect(M),C.connect(H.inputs===void 0?H:H.inputs[0]),M.connect(O,0),M.connect($,0),M.connect(se,1),M.connect(xe,1),H.connect(N),N.connect(G.inputs===void 0?G:G.inputs[0]),N.connect(X.inputs===void 0?X:X.inputs[0]),N.connect(fe.inputs===void 0?fe:fe.inputs[0]),N.connect(Z.inputs===void 0?Z:Z.inputs[0]),G.connect(O.gain),X.connect($.gain),fe.connect(se.gain),Z.connect(xe.gain),O.connect(v,0,0),se.connect(v,0,0),$.connect(v,0,1),xe.connect(v,0,1)},disconnectGraph(){C.disconnect(M),C.disconnect(H.inputs===void 0?H:H.inputs[0]),M.disconnect(O,0),M.disconnect($,0),M.disconnect(se,1),M.disconnect(xe,1),H.disconnect(N),N.disconnect(G.inputs===void 0?G:G.inputs[0]),N.disconnect(X.inputs===void 0?X:X.inputs[0]),N.disconnect(fe.inputs===void 0?fe:fe.inputs[0]),N.disconnect(Z.inputs===void 0?Z:Z.inputs[0]),G.disconnect(O.gain),X.disconnect($.gain),fe.disconnect(se.gain),Z.disconnect(xe.gain),O.disconnect(v,0,0),se.disconnect(v,0,0),$.disconnect(v,0,1),xe.disconnect(v,0,1)}}},x=(w,C,N,v,S)=>{if(C===1)return p(w,N,v,S);if(C===2)return y(w,N,v,S);throw s()};return(w,{channelCount:C,channelCountMode:N,pan:v,...S})=>{if(N==="max")throw s();const k=t(w,{...S,channelCount:1,channelCountMode:N,numberOfInputs:2}),R=n(w,{...S,channelCount:C,channelCountMode:N,gain:1}),E=n(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:v});let{connectGraph:P,disconnectGraph:M}=x(w,C,R,E,k);Object.defineProperty(E.gain,"defaultValue",{get:()=>0}),Object.defineProperty(E.gain,"maxValue",{get:()=>1}),Object.defineProperty(E.gain,"minValue",{get:()=>-1});const O={get bufferSize(){},get channelCount(){return R.channelCount},set channelCount(H){R.channelCount!==H&&(G&&M(),{connectGraph:P,disconnectGraph:M}=x(w,H,R,E,k),G&&P()),R.channelCount=H},get channelCountMode(){return R.channelCountMode},set channelCountMode(H){if(H==="clamped-max"||H==="max")throw s();R.channelCountMode=H},get channelInterpretation(){return R.channelInterpretation},set channelInterpretation(H){R.channelInterpretation=H},get context(){return R.context},get inputs(){return[R]},get numberOfInputs(){return R.numberOfInputs},get numberOfOutputs(){return R.numberOfOutputs},get pan(){return E.gain},addEventListener(...H){return R.addEventListener(H[0],H[1],H[2])},dispatchEvent(...H){return R.dispatchEvent(H[0])},removeEventListener(...H){return R.removeEventListener(H[0],H[1],H[2])}};let G=!1;const $=()=>{P(),G=!0},X=()=>{M(),G=!1};return i(lo(O,k),$,X)}},_T=(t,e,n,r,s,i,a)=>(l,c)=>{const h=l.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&l.createGain().gain.automationRate===void 0)return n(l,c);It(h,c);const m=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(m!==null&&m.length<2)throw e();ht(h,{curve:m},"curve"),ht(h,c,"oversample");let p=null,y=!1;return a(h,"curve",C=>()=>C.call(h),C=>N=>(C.call(h,N),y&&(r(N)&&p===null?p=t(l,h):!r(N)&&p!==null&&(p(),p=null)),N)),s(h,()=>{y=!0,r(h.curve)&&(p=t(l,h))},()=>{y=!1,p!==null&&(p(),p=null)})},wT=(t,e,n,r,s)=>(i,{curve:a,oversample:l,...c})=>{const h=i.createWaveShaper(),m=i.createWaveShaper();It(h,c),It(m,c);const p=n(i,{...c,gain:1}),y=n(i,{...c,gain:-1}),x=n(i,{...c,gain:1}),w=n(i,{...c,gain:-1});let C=null,N=!1,v=null;const S={get bufferSize(){},get channelCount(){return h.channelCount},set channelCount(E){p.channelCount=E,y.channelCount=E,h.channelCount=E,x.channelCount=E,m.channelCount=E,w.channelCount=E},get channelCountMode(){return h.channelCountMode},set channelCountMode(E){p.channelCountMode=E,y.channelCountMode=E,h.channelCountMode=E,x.channelCountMode=E,m.channelCountMode=E,w.channelCountMode=E},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(E){p.channelInterpretation=E,y.channelInterpretation=E,h.channelInterpretation=E,x.channelInterpretation=E,m.channelInterpretation=E,w.channelInterpretation=E},get context(){return h.context},get curve(){return v},set curve(E){if(E!==null&&E.length<2)throw e();if(E===null)h.curve=E,m.curve=E;else{const P=E.length,M=new Float32Array(P+2-P%2),O=new Float32Array(P+2-P%2);M[0]=E[0],O[0]=-E[P-1];const G=Math.ceil((P+1)/2),$=(P+1)/2-1;for(let X=1;X<G;X+=1){const H=X/G*$,se=Math.floor(H),fe=Math.ceil(H);M[X]=se===fe?E[se]:(1-(H-se))*E[se]+(1-(fe-H))*E[fe],O[X]=se===fe?-E[P-1-se]:-((1-(H-se))*E[P-1-se])-(1-(fe-H))*E[P-1-fe]}M[G]=P%2===1?E[G-1]:(E[G-2]+E[G-1])/2,h.curve=M,m.curve=O}v=E,N&&(r(v)&&C===null?C=t(i,p):C!==null&&(C(),C=null))},get inputs(){return[p]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get oversample(){return h.oversample},set oversample(E){h.oversample=E,m.oversample=E},addEventListener(...E){return p.addEventListener(E[0],E[1],E[2])},dispatchEvent(...E){return p.dispatchEvent(E[0])},removeEventListener(...E){return p.removeEventListener(E[0],E[1],E[2])}};a!==null&&(S.curve=a instanceof Float32Array?a:new Float32Array(a)),l!==S.oversample&&(S.oversample=l);const k=()=>{p.connect(h).connect(x),p.connect(y).connect(m).connect(w).connect(x),N=!0,r(v)&&(C=t(i,p))},R=()=>{p.disconnect(h),h.disconnect(x),p.disconnect(y),y.disconnect(m),m.disconnect(w),w.disconnect(x),N=!1,C!==null&&(C(),C=null)};return s(lo(S,x),k,R)},an=()=>new DOMException("","NotSupportedError"),xT={numberOfChannels:1},kT=(t,e,n,r,s)=>class extends t{constructor(a,l,c){let h;if(typeof a=="number"&&l!==void 0&&c!==void 0)h={length:l,numberOfChannels:a,sampleRate:c};else if(typeof a=="object")h=a;else throw new Error("The given parameters are not valid.");const{length:m,numberOfChannels:p,sampleRate:y}={...xT,...h},x=r(p,m,y);e(ha,()=>ha(x))||x.addEventListener("statechange",(()=>{let w=0;const C=N=>{this._state==="running"&&(w>0?(x.removeEventListener("statechange",C),N.stopImmediatePropagation(),this._waitForThePromiseToSettle(N)):w+=1)};return C})()),super(x,p),this._length=m,this._nativeOfflineAudioContext=x,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",s(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,$v(this)}))}_waitForThePromiseToSettle(a){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(a):setTimeout(()=>this._waitForThePromiseToSettle(a))}},ST={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},TT=(t,e,n,r,s,i,a)=>class extends t{constructor(c,h){const m=s(c),p={...ST,...h},y=n(m,p),x=i(m),w=x?r():null,C=c.sampleRate/2;super(c,!1,y,w),this._detune=e(this,x,y.detune,153600,-153600),this._frequency=e(this,x,y.frequency,C,-C),this._nativeOscillatorNode=y,this._onended=null,this._oscillatorNodeRenderer=w,this._oscillatorNodeRenderer!==null&&p.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=p.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const h=typeof c=="function"?a(this,c):null;this._nativeOscillatorNode.onended=h;const m=this._nativeOscillatorNode.onended;this._onended=m!==null&&m===h?c:m}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){Zi(this);const h=()=>{this._nativeOscillatorNode.removeEventListener("ended",h),Tr(this)&&Na(this)};this._nativeOscillatorNode.addEventListener("ended",h)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}},CT=(t,e,n,r,s)=>()=>{const i=new WeakMap;let a=null,l=null,c=null;const h=async(m,p)=>{let y=n(m);const x=Xt(y,p);if(!x){const w={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,detune:y.detune.value,frequency:y.frequency.value,periodicWave:a===null?void 0:a,type:y.type};y=e(p,w),l!==null&&y.start(l),c!==null&&y.stop(c)}return i.set(p,y),x?(await t(p,m.detune,y.detune),await t(p,m.frequency,y.frequency)):(await r(p,m.detune,y.detune),await r(p,m.frequency,y.frequency)),await s(m,p,y),y};return{set periodicWave(m){a=m},set start(m){l=m},set stop(m){c=m},render(m,p){const y=i.get(p);return y!==void 0?Promise.resolve(y):h(m,p)}}},bT={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},ET=(t,e,n,r,s,i,a)=>class extends t{constructor(c,h){const m=s(c),p={...bT,...h},y=n(m,p),x=i(m),w=x?r():null;super(c,!1,y,w),this._nativePannerNode=y,this._orientationX=e(this,x,y.orientationX,Zt,un),this._orientationY=e(this,x,y.orientationY,Zt,un),this._orientationZ=e(this,x,y.orientationZ,Zt,un),this._positionX=e(this,x,y.positionX,Zt,un),this._positionY=e(this,x,y.positionY,Zt,un),this._positionZ=e(this,x,y.positionZ,Zt,un),a(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}},AT=(t,e,n,r,s,i,a,l,c,h)=>()=>{const m=new WeakMap;let p=null;const y=async(x,w)=>{let C=null,N=i(x);const v={channelCount:N.channelCount,channelCountMode:N.channelCountMode,channelInterpretation:N.channelInterpretation},S={...v,coneInnerAngle:N.coneInnerAngle,coneOuterAngle:N.coneOuterAngle,coneOuterGain:N.coneOuterGain,distanceModel:N.distanceModel,maxDistance:N.maxDistance,panningModel:N.panningModel,refDistance:N.refDistance,rolloffFactor:N.rolloffFactor},k=Xt(N,w);if("bufferSize"in N)C=r(w,{...v,gain:1});else if(!k){const R={...S,orientationX:N.orientationX.value,orientationY:N.orientationY.value,orientationZ:N.orientationZ.value,positionX:N.positionX.value,positionY:N.positionY.value,positionZ:N.positionZ.value};N=s(w,R)}if(m.set(w,C===null?N:C),C!==null){if(p===null){if(a===null)throw new Error("Missing the native OfflineAudioContext constructor.");const X=new a(6,x.context.length,w.sampleRate),H=e(X,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});H.connect(X.destination),p=(async()=>{const se=await Promise.all([x.orientationX,x.orientationY,x.orientationZ,x.positionX,x.positionY,x.positionZ].map(async(fe,xe)=>{const Z=n(X,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:xe===0?1:0});return await l(X,fe,Z.offset),Z}));for(let fe=0;fe<6;fe+=1)se[fe].connect(H,0,fe),se[fe].start(0);return h(X)})()}const R=await p,E=r(w,{...v,gain:1});await c(x,w,E);const P=[];for(let X=0;X<R.numberOfChannels;X+=1)P.push(R.getChannelData(X));let M=[P[0][0],P[1][0],P[2][0]],O=[P[3][0],P[4][0],P[5][0]],G=r(w,{...v,gain:1}),$=s(w,{...S,orientationX:M[0],orientationY:M[1],orientationZ:M[2],positionX:O[0],positionY:O[1],positionZ:O[2]});E.connect(G).connect($.inputs[0]),$.connect(C);for(let X=128;X<R.length;X+=128){const H=[P[0][X],P[1][X],P[2][X]],se=[P[3][X],P[4][X],P[5][X]];if(H.some((fe,xe)=>fe!==M[xe])||se.some((fe,xe)=>fe!==O[xe])){M=H,O=se;const fe=X/w.sampleRate;G.gain.setValueAtTime(0,fe),G=r(w,{...v,gain:0}),$=s(w,{...S,orientationX:M[0],orientationY:M[1],orientationZ:M[2],positionX:O[0],positionY:O[1],positionZ:O[2]}),G.gain.setValueAtTime(1,fe),E.connect(G).connect($.inputs[0]),$.connect(C)}}return C}return k?(await t(w,x.orientationX,N.orientationX),await t(w,x.orientationY,N.orientationY),await t(w,x.orientationZ,N.orientationZ),await t(w,x.positionX,N.positionX),await t(w,x.positionY,N.positionY),await t(w,x.positionZ,N.positionZ)):(await l(w,x.orientationX,N.orientationX),await l(w,x.orientationY,N.orientationY),await l(w,x.orientationZ,N.orientationZ),await l(w,x.positionX,N.positionX),await l(w,x.positionY,N.positionY),await l(w,x.positionZ,N.positionZ)),ao(N)?await c(x,w,N.inputs[0]):await c(x,w,N),N};return{render(x,w){const C=m.get(w);return C!==void 0?Promise.resolve(C):y(x,w)}}},NT={disableNormalization:!1},OT=(t,e,n,r)=>class t_{constructor(i,a){const l=e(i),c=r({...NT,...a}),h=t(l,c);return n.add(h),h}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===t_.prototype||n.has(i)}},IT=(t,e)=>(n,r,s)=>(t(r).replay(s),e(r,n,s)),PT=(t,e,n)=>async(r,s,i)=>{const a=t(r);await Promise.all(a.activeInputs.map((l,c)=>Array.from(l).map(async([h,m])=>{const y=await e(h).render(h,s),x=r.context.destination;!n(h)&&(r!==x||!n(r))&&y.connect(i,m,c)})).reduce((l,c)=>[...l,...c],[]))},MT=(t,e,n)=>async(r,s,i)=>{const a=e(r);await Promise.all(Array.from(a.activeInputs).map(async([l,c])=>{const m=await t(l).render(l,s);n(l)||m.connect(i,c)}))},DT=(t,e,n,r)=>s=>t(ha,()=>ha(s))?Promise.resolve(t(r,r)).then(i=>{if(!i){const a=n(s,512,0,1);s.oncomplete=()=>{a.onaudioprocess=null,a.disconnect()},a.onaudioprocess=()=>s.currentTime,a.connect(s.destination)}return s.startRendering()}):new Promise(i=>{const a=e(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});s.oncomplete=l=>{a.disconnect(),i(l.renderedBuffer)},a.connect(s.destination),s.startRendering()}),RT=t=>(e,n)=>{t.set(e,n)},jT=t=>(e,n)=>t.set(e,n),FT=(t,e,n,r,s,i,a,l)=>(c,h)=>n(c).render(c,h).then(()=>Promise.all(Array.from(r(h)).map(m=>n(m).render(m,h)))).then(()=>s(h)).then(m=>(typeof m.copyFromChannel!="function"?(a(m),Sf(m)):e(i,()=>i(m))||l(m),t.add(m),m)),LT={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},VT=(t,e,n,r,s,i)=>class extends t{constructor(l,c){const h=s(l),m={...LT,...c},p=n(h,m),y=i(h),x=y?r():null;super(l,!1,p,x),this._pan=e(this,y,p.pan)}get pan(){return this._pan}},BT=(t,e,n,r,s)=>()=>{const i=new WeakMap,a=async(l,c)=>{let h=n(l);const m=Xt(h,c);if(!m){const p={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,pan:h.pan.value};h=e(c,p)}return i.set(c,h),m?await t(c,l.pan,h.pan):await r(c,l.pan,h.pan),ao(h)?await s(l,c,h.inputs[0]):await s(l,c,h),h};return{render(l,c){const h=i.get(c);return h!==void 0?Promise.resolve(h):a(l,c)}}},WT=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0},zT=(t,e)=>async()=>{if(t===null)return!0;if(e===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),s=URL.createObjectURL(n);let i=!1,a=!1;try{await r.audioWorklet.addModule(s);const l=new t(r,"a",{numberOfOutputs:0}),c=r.createOscillator();l.port.onmessage=()=>i=!0,l.onprocessorerror=()=>a=!0,c.connect(l),c.start(0),await r.startRendering(),await new Promise(h=>setTimeout(h))}catch{}finally{URL.revokeObjectURL(s)}return i&&!a},UT=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);const n=new e(1,1,44100),r=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(s=>{n.oncomplete=()=>{r.disconnect(),s(n.currentTime!==0)},n.startRendering()})},qT=()=>new DOMException("","UnknownError"),$T={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},KT=(t,e,n,r,s,i,a)=>class extends t{constructor(c,h){const m=s(c),p={...$T,...h},y=n(m,p),w=i(m)?r():null;super(c,!0,y,w),this._isCurveNullified=!1,this._nativeWaveShaperNode=y,a(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}},GT=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,a)=>{let l=e(i);if(!Xt(l,a)){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,curve:l.curve,oversample:l.oversample};l=t(a,h)}return r.set(a,l),ao(l)?await n(i,a,l.inputs[0]):await n(i,a,l),l};return{render(i,a){const l=r.get(a);return l!==void 0?Promise.resolve(l):s(i,a)}}},HT=()=>typeof window>"u"?null:window,XT=(t,e)=>n=>{n.copyFromChannel=(r,s,i=0)=>{const a=t(i),l=t(s);if(l>=n.numberOfChannels)throw e();const c=n.length,h=n.getChannelData(l),m=r.length;for(let p=a<0?-a:0;p+a<c&&p<m;p+=1)r[p]=h[p+a]},n.copyToChannel=(r,s,i=0)=>{const a=t(i),l=t(s);if(l>=n.numberOfChannels)throw e();const c=n.length,h=n.getChannelData(l),m=r.length;for(let p=a<0?-a:0;p+a<c&&p<m;p+=1)h[p+a]=r[p]}},QT=t=>e=>{e.copyFromChannel=(n=>(r,s,i=0)=>{const a=t(i),l=t(s);if(a<e.length)return n.call(e,r,l,a)})(e.copyFromChannel),e.copyToChannel=(n=>(r,s,i=0)=>{const a=t(i),l=t(s);if(a<e.length)return n.call(e,r,l,a)})(e.copyToChannel)},YT=t=>(e,n)=>{const r=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),t(e,"buffer",s=>()=>{const i=s.call(e);return i===r?null:i},s=>i=>s.call(e,i===null?r:i))},ZT=(t,e)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const s=n.createBufferSource();e(r,()=>{const l=r.numberOfInputs;for(let c=0;c<l;c+=1)s.connect(r,0,c)},()=>s.disconnect(r))},n_=(t,e,n)=>t.copyFromChannel===void 0?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),r_=t=>{if(t===null)return!1;const e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0},Da=(t,e,n,r)=>{let s=t;for(;!s.hasOwnProperty(e);)s=Object.getPrototypeOf(s);const{get:i,set:a}=Object.getOwnPropertyDescriptor(s,e);Object.defineProperty(t,e,{get:n(i),set:r(a)})},JT=t=>({...t,outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),eC=t=>({...t,channelCount:t.numberOfOutputs}),tC=t=>{const{imag:e,real:n}=t;return e===void 0?n===void 0?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:n===void 0?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}},s_=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(r){if(r.code!==9)throw r;s_(t,e,n+1e-7)}},nC=t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},rC=t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},sC=t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Af=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},i_=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},Nf=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},iC=t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},oC=t=>{t.start=(e=>(n=0,r=0,s)=>{const i=t.buffer,a=i===null?r:Math.min(i.duration,r);i!==null&&a>i.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,a,s)})(t.start)},o_=(t,e)=>{const n=e.createGain();t.connect(n);const r=(s=>()=>{s.call(t,n),t.removeEventListener("ended",r)})(t.disconnect);t.addEventListener("ended",r),lo(t,n),t.stop=(s=>{let i=!1;return(a=0)=>{if(i)try{s.call(t,a)}catch{n.gain.setValueAtTime(0,a)}else s.call(t,a),i=!0}})(t.stop)},uo=(t,e)=>n=>{const r={value:t};return Object.defineProperties(n,{currentTarget:r,target:r}),typeof e=="function"?e.call(t,n):e.handleEvent.call(t,n)},aC=Ex(si),lC=Mx(si),uC=$k(rc),a_=new WeakMap,cC=uS(a_),Qn=xk(new Map,new WeakMap),lr=HT(),l_=VS(Qn,cr),Of=lS(en),Wt=PT(en,Of,Ks),hC=Lx(l_,lt,Wt),st=dS(nc),Pr=dT(lr),Qe=NS(Pr),u_=new WeakMap,c_=tS(uo),Ra=US(lr),If=CS(Ra),Pf=bS(lr),h_=ES(lr),da=$S(lr),Ct=uk(Ax(Lv),Px(aC,lC,xu,uC,ku,en,cC,Aa,lt,si,Tr,Ks,ql),Qn,wS(md,ku,en,lt,ca,Tr),cr,sc,an,Wk(xu,md,en,lt,ca,st,Tr,Qe),Hk(u_,en,Xn),c_,st,If,Pf,h_,Qe,da),dC=Fx(Ct,hC,cr,l_,st,Qe),Mf=new WeakSet,ng=BS(lr),d_=Dk(new Uint32Array(1)),Df=XT(d_,cr),Rf=QT(d_),f_=Bx(Mf,Qn,an,ng,Pr,WT(ng),Df,Rf),ic=Dx(gn),p_=MT(Of,Oa,Ks),hr=Ak(p_),co=zS(ic,Qn,nC,rC,sC,Af,i_,Nf,oC,YT(Da),o_),dr=IT(cS(Oa),p_),fC=Ux(hr,co,lt,dr,Wt),Yn=ck(Nx(Vv),u_,kf,hk,xx,kx,Sx,Tx,Cx,dd,jv,Ra,s_),pC=zx(Ct,fC,Yn,jt,co,st,Qe,uo),mC=Zx(Ct,Jx,cr,jt,qS(gn,Da),st,Qe,Wt),gC=wk(hr,Jv,lt,dr,Wt),ii=jT(a_),yC=_k(Ct,Yn,gC,sc,Jv,st,Qe,ii),ys=FS(si,Pf),vC=ZT(jt,ys),vs=ZS(Ra,vC),_C=Tk(vs,lt,Wt),wC=Sk(Ct,_C,vs,st,Qe),xC=Ek(Pa,lt,Wt),kC=bk(Ct,xC,Pa,st,Qe,eC),SC=tT(ic,co,gn,ys),ho=eT(ic,Qn,SC,Af,Nf),TC=Mk(hr,ho,lt,dr,Wt),CC=Pk(Ct,Yn,TC,ho,st,Qe,uo),m_=nT(an,Da),bC=Fk(m_,lt,Wt),EC=jk(Ct,bC,m_,st,Qe,ii),AC=qk(hr,e_,lt,dr,Wt),NC=Uk(Ct,Yn,AC,e_,st,Qe,ii),g_=rT(an),OC=Zk(hr,g_,lt,dr,Wt),IC=Yk(Ct,Yn,OC,g_,an,st,Qe,ii),PC=oS(hr,gn,lt,dr,Wt),MC=iS(Ct,Yn,PC,gn,st,Qe),DC=aT(sc,jt,Ma,an),oc=DT(Qn,gn,Ma,UT(gn,Pr)),RC=_S(co,lt,Pr,Wt,oc),jC=sT(DC),FC=yS(Ct,jC,RC,st,Qe,ii),LC=ek(Yn,vs,ho,Ma,an,n_,Qe,Da),y_=new WeakMap,VC=jS(mC,LC,c_,Qe,y_,uo),v_=fT(ic,Qn,Af,i_,Nf,o_),BC=CT(hr,v_,lt,dr,Wt),WC=TT(Ct,Yn,v_,BC,st,Qe,uo),__=Ok(co),zC=wT(__,jt,gn,r_,ys),ac=_T(__,jt,zC,r_,ys,Ra,Da),UC=mT(xu,jt,vs,gn,Ma,ac,an,ku,n_,ys),w_=pT(UC),qC=AT(hr,vs,ho,gn,w_,lt,Pr,dr,Wt,oc),$C=ET(Ct,Yn,w_,qC,st,Qe,ii),KC=gT(cr),GC=OT(KC,st,new WeakSet,tC),HC=vT(vs,Pa,gn,ac,an,ys),x_=yT(HC,an),XC=BT(hr,x_,lt,dr,Wt),QC=VT(Ct,Yn,x_,XC,st,Qe),YC=GT(ac,lt,Wt),ZC=KT(Ct,jt,ac,YC,st,Qe,ii),k_=OS(lr),jf=nS(lr),S_=new WeakMap,JC=fS(S_,Pr),eb=k_?Ix(Qn,an,eS(lr),jf,rS(bx),st,JC,Qe,da,new WeakMap,new WeakMap,zT(da,Pr),lr):void 0,tb=AS(If,Qe),nb=Bk(Mf,Qn,Vk,Jk,new WeakSet,st,tb,_u,ha,Df,Rf),T_=yk(eb,dC,f_,pC,yC,wC,kC,CC,EC,nb,NC,IC,MC,FC,VC,WC,$C,GC,QC,ZC),rb=IS(Ct,lT,st,Qe),sb=MS(Ct,uT,st,Qe),ib=DS(Ct,cT,st,Qe),ob=hT(jt,Qe),ab=RS(Ct,ob,st),lb=Yx(T_,jt,an,qT,rb,sb,ib,ab,Ra),Ff=pS(y_),ub=Rx(Ff),C_=Nk(cr),cb=Kk(Ff),b_=Xk(cr),E_=new WeakMap,hb=aS(E_,Xn),db=YS(C_,cr,jt,vs,Pa,ho,gn,Ma,an,b_,jf,hb,ys),fb=GS(jt,db,gn,an,ys),pb=gk(hr,C_,co,vs,Pa,ho,gn,cb,b_,jf,lt,da,Pr,dr,Wt,oc),mb=hS(S_),gb=RT(E_),rg=k_?fk(ub,Ct,Yn,pb,fb,en,mb,st,Qe,da,JT,gb,iC,uo):void 0,yb=Lk(an,Pr),vb=FT(Mf,Qn,Of,Ff,oc,_u,Df,Rf),_b=kT(T_,Qn,jt,yb,vb),wb=xS(nc,If),xb=kS(xf,Pf),kb=SS(kf,h_),Sb=TS(nc,Qe);function jn(t){return t===void 0}function Ve(t){return t!==void 0}function Tb(t){return typeof t=="function"}function Gs(t){return typeof t=="number"}function Vs(t){return Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object}function Cb(t){return typeof t=="boolean"}function Gn(t){return Array.isArray(t)}function Nr(t){return typeof t=="string"}function Al(t){return Nr(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function Me(t,e){if(!t)throw new Error(e)}function ur(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function A_(t){!t.isOffline&&t.state!=="running"&&Lf('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let N_=!1,sg=!1;function ig(t){N_=t}function bb(t){jn(t)&&N_&&!sg&&(sg=!0,Lf("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let O_=console;function Eb(...t){O_.log(...t)}function Lf(...t){O_.warn(...t)}function Ab(t){return new lb(t)}function Nb(t,e,n){return new _b(t,e,n)}const Bs=typeof self=="object"?self:null,Ob=Bs&&(Bs.hasOwnProperty("AudioContext")||Bs.hasOwnProperty("webkitAudioContext"));function Ib(t,e,n){return Me(Ve(rg),"This node only works in a secure context (https or localhost)"),new rg(t,e,n)}function Zn(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(i=(s<3?a(i):s>3?a(e,n,i):a(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function Tt(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(m){try{h(r.next(m))}catch(p){a(p)}}function c(m){try{h(r.throw(m))}catch(p){a(p)}}function h(m){m.done?i(m.value):s(m.value).then(l,c)}h((r=r.apply(t,e||[])).next())})}class Pb{constructor(e,n,r,s){this._callback=e,this._type=n,this._minimumUpdateInterval=Math.max(128/(s||44100),.001),this.updateInterval=r,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(e),r=new Worker(n);r.onmessage=this._callback.bind(this),this._worker=r}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var n;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((n=this._worker)===null||n===void 0||n.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Hs(t){return kb(t)}function us(t){return xb(t)}function $l(t){return Sb(t)}function _i(t){return wb(t)}function Mb(t){return t instanceof f_}function Db(t,e){return t==="value"||Hs(e)||us(e)||Mb(e)}function Wi(t,...e){if(!e.length)return t;const n=e.shift();if(Vs(t)&&Vs(n))for(const r in n)Db(r,n[r])?t[r]=n[r]:Vs(n[r])?(t[r]||Object.assign(t,{[r]:{}}),Wi(t[r],n[r])):Object.assign(t,{[r]:n[r]});return Wi(t,...e)}function Rb(t,e){return t.length===e.length&&t.every((n,r)=>e[r]===n)}function oe(t,e,n=[],r){const s={},i=Array.from(e);if(Vs(i[0])&&r&&!Reflect.has(i[0],r)&&(Object.keys(i[0]).some(l=>Reflect.has(t,l))||(Wi(s,{[r]:i[0]}),n.splice(n.indexOf(r),1),i.shift())),i.length===1&&Vs(i[0]))Wi(s,i[0]);else for(let a=0;a<n.length;a++)Ve(i[a])&&(s[n[a]]=i[a]);return Wi(t,s)}function jb(t){return t.constructor.getDefaults()}function zi(t,e){return jn(t)?e:t}function og(t,e){return e.forEach(n=>{Reflect.has(t,n)&&delete t[n]}),t}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class Mr{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||Bs&&this.toString()===Bs.TONE_DEBUG_CLASS)&&Eb(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Mr.version=Rv;const Vf=1e-6;function Ji(t,e){return t>e+Vf}function wd(t,e){return Ji(t,e)||qn(t,e)}function bu(t,e){return t+Vf<e}function qn(t,e){return Math.abs(t-e)<Vf}function Fb(t,e,n){return Math.max(Math.min(t,n),e)}class Fn extends Mr{constructor(){super(),this.name="Timeline",this._timeline=[];const e=oe(Fn.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(Me(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const n=this._timeline[this.length-1];Me(wd(e.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const n=this._search(e.time);this._timeline.splice(n+1,0,e)}if(this.length>this.memory){const n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(e){const n=this._timeline.indexOf(e);return n!==-1&&this._timeline.splice(n,1),this}get(e,n="time"){const r=this._search(e,n);return r!==-1?this._timeline[r]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,n="time"){const r=this._search(e,n);return r+1<this._timeline.length?this._timeline[r+1]:null}getBefore(e){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<e)return this._timeline[n-1];const r=this._search(e);return r-1>=0?this._timeline[r-1]:null}cancel(e){if(this._timeline.length>1){let n=this._search(e);if(n>=0)if(qn(this._timeline[n].time,e)){for(let r=n;r>=0&&qn(this._timeline[r].time,e);r--)n=r;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&wd(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const n=this._search(e);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(e){const n=this._timeline.indexOf(e);return n>0?this._timeline[n-1]:null}_search(e,n="time"){if(this._timeline.length===0)return-1;let r=0;const s=this._timeline.length;let i=s;if(s>0&&this._timeline[s-1][n]<=e)return s-1;for(;r<i;){let a=Math.floor(r+(i-r)/2);const l=this._timeline[a],c=this._timeline[a+1];if(qn(l[n],e)){for(let h=a;h<this._timeline.length;h++){const m=this._timeline[h];if(qn(m[n],e))a=h;else break}return a}else{if(bu(l[n],e)&&Ji(c[n],e))return a;Ji(l[n],e)?i=a:r=a+1}}return-1}_iterate(e,n=0,r=this._timeline.length-1){this._timeline.slice(n,r+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,n){const r=this._search(e);return r!==-1&&this._iterate(n,0,r),this}forEachAfter(e,n){const r=this._search(e);return this._iterate(n,r+1),this}forEachBetween(e,n,r){let s=this._search(e),i=this._search(n);return s!==-1&&i!==-1?(this._timeline[s].time!==e&&(s+=1),this._timeline[i].time===n&&(i-=1),this._iterate(r,s,i)):s===-1&&this._iterate(r,0,i),this}forEachFrom(e,n){let r=this._search(e);for(;r>=0&&this._timeline[r].time>=e;)r--;return this._iterate(n,r+1),this}forEachAtTime(e,n){const r=this._search(e);if(r!==-1&&qn(this._timeline[r].time,e)){let s=r;for(let i=r;i>=0&&qn(this._timeline[i].time,e);i--)s=i;this._iterate(i=>{n(i)},s,r)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const I_=[];function lc(t){I_.push(t)}function Lb(t){I_.forEach(e=>e(t))}const P_=[];function uc(t){P_.push(t)}function Vb(t){P_.forEach(e=>e(t))}class ja extends Mr{constructor(){super(...arguments),this.name="Emitter"}on(e,n){return e.split(/\W+/).forEach(s=>{jn(this._events)&&(this._events={}),this._events.hasOwnProperty(s)||(this._events[s]=[]),this._events[s].push(n)}),this}once(e,n){const r=(...s)=>{n(...s),this.off(e,r)};return this.on(e,r),this}off(e,n){return e.split(/\W+/).forEach(s=>{if(jn(this._events)&&(this._events={}),this._events.hasOwnProperty(s))if(jn(n))this._events[s]=[];else{const i=this._events[s];for(let a=i.length-1;a>=0;a--)i[a]===n&&i.splice(a,1)}}),this}emit(e,...n){if(this._events&&this._events.hasOwnProperty(e)){const r=this._events[e].slice(0);for(let s=0,i=r.length;s<i;s++)r[s].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(n=>{const r=Object.getOwnPropertyDescriptor(ja.prototype,n);Object.defineProperty(e.prototype,n,r)})}dispose(){return super.dispose(),this._events=void 0,this}}class M_ extends ja{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Fa extends M_{constructor(){var e,n;super(),this.name="Context",this._constants=new Map,this._timeouts=new Fn,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const r=oe(Fa.getDefaults(),arguments,["context"]);r.context?(this._context=r.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=Ab({latencyHint:r.latencyHint}),this._latencyHint=r.latencyHint),this._ticker=new Pb(this.emit.bind(this,"tick"),r.clockSource,r.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((n=arguments[0])===null||n===void 0)&&n.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=r.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(Lb(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,n,r){return this._context.createBuffer(e,n,r)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,n){return this._context.createIIRFilter(e,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,n,r){return this._context.createPeriodicWave(e,n,r)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return Me(_i(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return Me(_i(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return Me(_i(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){Me(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){Me(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){Me(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){Me(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,n){return Ib(this.rawContext,e,n)}addAudioWorkletModule(e){return Tt(this,void 0,void 0,function*(){Me(Ve(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return Tt(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return _i(this._context)?this._context.resume():Promise.resolve()}close(){return Tt(this,void 0,void 0,function*(){_i(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&Vb(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const n=this._context.createBuffer(1,128,this._context.sampleRate),r=n.getChannelData(0);for(let i=0;i<r.length;i++)r[i]=e;const s=this._context.createBufferSource();return s.channelCount=1,s.channelCountMode="explicit",s.buffer=n,s.loop=!0,s.start(0),this._constants.set(e,s),s}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();let n=this._timeouts.peek();for(;this._timeouts.length&&n&&n.time<=e;)n.callback(),this._timeouts.shift(),n=this._timeouts.peek()}setTimeout(e,n){this._timeoutIds++;const r=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:r+n}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(n=>{n.id===e&&this._timeouts.remove(n)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,n){const r=++this._timeoutIds,s=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),s()},id:r,time:i+n})};return s(),r}}class Bb extends M_{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,n,r){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,n){return{}}createPanner(){return{}}createPeriodicWave(e,n,r){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,n){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return Tt(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,n){return 0}clearTimeout(e){return this}setInterval(e,n){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function ft(t,e){Gn(e)?e.forEach(n=>ft(t,n)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function D_(t,e){Gn(e)?e.forEach(n=>D_(t,n)):Object.defineProperty(t,e,{writable:!0})}const Ke=()=>{};class $e extends Mr{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Ke;const e=oe($e.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,Nr(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:Ke,onload:Ke,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:hn().sampleRate}set(e){return e instanceof $e?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return Tt(this,void 0,void 0,function*(){const n=$e.load(e).then(r=>{this.set(r),this.onload(this)});$e.downloads.push(n);try{yield n}finally{const r=$e.downloads.indexOf(n);$e.downloads.splice(r,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const n=Gn(e)&&e[0].length>0,r=n?e.length:1,s=n?e[0].length:e.length,i=hn(),a=i.createBuffer(r,s,i.sampleRate),l=!n&&r===1?[e]:e;for(let c=0;c<r;c++)a.copyToChannel(l[c],c);return this._buffer=a,this}toMono(e){if(Gs(e))this.fromArray(this.toArray(e));else{let n=new Float32Array(this.length);const r=this.numberOfChannels;for(let s=0;s<r;s++){const i=this.toArray(s);for(let a=0;a<i.length;a++)n[a]+=i[a]}n=n.map(s=>s/r),this.fromArray(n)}return this}toArray(e){if(Gs(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const n=[];for(let r=0;r<this.numberOfChannels;r++)n[r]=this.getChannelData(r);return n}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,n=this.duration){Me(this.loaded,"Buffer is not loaded");const r=Math.floor(e*this.sampleRate),s=Math.floor(n*this.sampleRate);Me(r<s,"The start time must be less than the end time");const i=s-r,a=hn().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let l=0;l<this.numberOfChannels;l++)a.copyToChannel(this.getChannelData(l).subarray(r,s),l);return new $e(a)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new $e().fromArray(e)}static fromUrl(e){return Tt(this,void 0,void 0,function*(){return yield new $e().load(e)})}static load(e){return Tt(this,void 0,void 0,function*(){const n=e.match(/\[([^\]\[]+\|.+)\]$/);if(n){const c=n[1].split("|");let h=c[0];for(const m of c)if($e.supportsType(m)){h=m;break}e=e.replace(n[0],h)}const r=$e.baseUrl===""||$e.baseUrl.endsWith("/")?$e.baseUrl:$e.baseUrl+"/",s=document.createElement("a");s.href=r+e,s.pathname=(s.pathname+s.hash).split("/").map(encodeURIComponent).join("/");const i=yield fetch(s.href);if(!i.ok)throw new Error(`could not load url: ${e}`);const a=yield i.arrayBuffer();return yield hn().decodeAudioData(a)})}static supportsType(e){const n=e.split("."),r=n[n.length-1];return document.createElement("audio").canPlayType("audio/"+r)!==""}static loaded(){return Tt(this,void 0,void 0,function*(){for(yield Promise.resolve();$e.downloads.length;)yield $e.downloads[0]})}}$e.baseUrl="";$e.downloads=[];class cc extends Fa{constructor(){super({clockSource:"offline",context:$l(arguments[0])?arguments[0]:Nb(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:$l(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=$l(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return Tt(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const r=Math.floor(this.sampleRate/128);e&&n%r===0&&(yield new Promise(s=>setTimeout(s,1)))}})}render(e=!0){return Tt(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);const n=yield this._context.startRendering();return new $e(n)})}close(){return Promise.resolve()}}const R_=new Bb;let Rs=R_;function hn(){return Rs===R_&&Ob&&Wb(new Fa),Rs}function Wb(t,e=!1){e&&Rs.dispose(),_i(t)?Rs=new Fa(t):$l(t)?Rs=new cc(t):Rs=t}function zb(){return Rs.resume()}if(Bs&&!Bs.TONE_SILENCE_LOGGING){const e=` * Tone.js v${Rv} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function Ub(t){return Math.pow(10,t/20)}function qb(t){return 20*(Math.log(t)/Math.LN10)}function j_(t){return Math.pow(2,t/12)}let hc=440;function $b(){return hc}function Kb(t){hc=t}function xd(t){return Math.round(F_(t))}function F_(t){return 69+12*Math.log2(t/hc)}function Gb(t){return hc*Math.pow(2,(t-69)/12)}class Bf extends Mr{constructor(e,n,r){super(),this.defaultUnits="s",this._val=n,this._units=r,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,n)=>{const r=parseInt(e,10),s=n==="."?1.5:1;return r===1?this._beatsToUnits(this._getTimeSignature())*s:this._beatsToUnits(4/r)*s},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const n=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,n,r)=>{let s=0;return e&&e!=="0"&&(s+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(s+=this._beatsToUnits(parseFloat(n))),r&&r!=="0"&&(s+=this._beatsToUnits(parseFloat(r)/4)),s},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Bf&&this.fromType(this._val),jn(this._val))return this._noArg();if(Nr(this._val)&&jn(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(Vs(this._val)){let e=0;for(const n in this._val)if(Ve(this._val[n])){const r=this._val[n],s=new this.constructor(this.context,n).valueOf()*r;e+=s}return e}if(Ve(this._units)){const e=this._expressions[this._units],n=this._val.toString().trim().match(e.regexp);return n?e.method.apply(this,n.slice(1)):e.method.call(this,this._val)}else return Nr(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Mn extends Bf{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const n=new Mn(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(e,n=1){const r=new this.constructor(this.context,e).valueOf(),s=this.valueOf(),l=Math.round(s/r)*r-s;return s+l*n}toNotation(){const e=this.toSeconds(),n=["1m"];for(let i=1;i<9;i++){const a=Math.pow(2,i);n.push(a+"n."),n.push(a+"n"),n.push(a+"t")}n.push("0");let r=n[0],s=new Mn(this.context,n[0]).toSeconds();return n.forEach(i=>{const a=new Mn(this.context,i).toSeconds();Math.abs(a-e)<Math.abs(s-e)&&(r=i,s=a)}),r}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let n=this.valueOf()/e;n=parseFloat(n.toFixed(4));const r=Math.floor(n/this._getTimeSignature());let s=n%1*4;n=Math.floor(n)%this._getTimeSignature();const i=s.toString();return i.length>3&&(s=parseFloat(parseFloat(i).toFixed(3))),[r,n,s].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return xd(this.toFrequency())}_now(){return this.context.now()}}function Hb(t,e){return new Mn(hn(),t,e)}class Dn extends Mn{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return $b()}static set A4(e){Kb(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:Dn.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,n){const s=Xb[e.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?s:Dn.mtof(s)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,n,r){let s=1;return e&&e!=="0"&&(s*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(s*=this._beatsToUnits(parseFloat(n))),r&&r!=="0"&&(s*=this._beatsToUnits(parseFloat(r)/4)),s}}})}transpose(e){return new Dn(this.context,this.valueOf()*j_(e))}harmonize(e){return e.map(n=>this.transpose(n))}toMidi(){return xd(this.valueOf())}toNote(){const e=this.toFrequency(),n=Math.log2(e/Dn.A4);let r=Math.round(12*n)+57;const s=Math.floor(r/12);return s<0&&(r+=-12*s),Qb[r%12]+s.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return Gb(e)}static ftom(e){return xd(e)}}const Xb={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},Qb=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Ko extends Mn{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class mn extends Mr{constructor(){super();const e=oe(mn.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:hn()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return bb(e),new Mn(this.context,e).toSeconds()}toFrequency(e){return new Dn(this.context,e).toFrequency()}toTicks(e){return new Ko(this.context,e).toTicks()}_getPartialProperties(e){const n=this.get();return Object.keys(n).forEach(r=>{jn(e[r])&&delete n[r]}),n}get(){const e=jb(this);return Object.keys(e).forEach(n=>{if(Reflect.has(this,n)){const r=this[n];Ve(r)&&Ve(r.value)&&Ve(r.setValueAtTime)?e[n]=r.value:r instanceof mn?e[n]=r._getPartialProperties(e[n]):Gn(r)||Gs(r)||Nr(r)||Cb(r)?e[n]=r:delete e[n]}}),e}set(e){return Object.keys(e).forEach(n=>{Reflect.has(this,n)&&Ve(this[n])&&(this[n]&&Ve(this[n].value)&&Ve(this[n].setValueAtTime)?this[n].value!==e[n]&&(this[n].value=e[n]):this[n]instanceof mn?this[n].set(e[n]):this[n]=e[n])}),this}}class Wf extends Fn{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const n=this.get(e);return n!==null?n.state:this._initial}setStateAtTime(e,n,r){return ur(n,0),this.add(Object.assign({},r,{state:e,time:n})),this}getLastState(e,n){const r=this._search(n);for(let s=r;s>=0;s--){const i=this._timeline[s];if(i.state===e)return i}}getNextState(e,n){const r=this._search(n);if(r!==-1)for(let s=r;s<this._timeline.length;s++){const i=this._timeline[s];if(i.state===e)return i}}}class ct extends mn{constructor(){super(oe(ct.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const e=oe(ct.getDefaults(),arguments,["param","units","convert"]);for(Me(Ve(e.param)&&(Hs(e.param)||e.param instanceof ct),"param must be an AudioParam");!Hs(e.param);)e.param=e.param._param;this._swappable=Ve(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Fn(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Ve(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(mn.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Ve(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Ve(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,n){return this.units===n}_assertRange(e){return Ve(this.maxValue)&&Ve(this.minValue)&&ur(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?Ub(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?qb(e):e}setValueAtTime(e,n){const r=this.toSeconds(n),s=this._fromType(e);return Me(isFinite(s)&&isFinite(r),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(s),this.log(this.units,"setValueAtTime",e,r),this._events.add({time:r,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,r),this}getValueAtTime(e){const n=Math.max(this.toSeconds(e),0),r=this._events.getAfter(n),s=this._events.get(n);let i=this._initialValue;if(s===null)i=this._initialValue;else if(s.type==="setTargetAtTime"&&(r===null||r.type==="setValueAtTime")){const a=this._events.getBefore(s.time);let l;a===null?l=this._initialValue:l=a.value,s.type==="setTargetAtTime"&&(i=this._exponentialApproach(s.time,l,s.value,s.constant,n))}else if(r===null)i=s.value;else if(r.type==="linearRampToValueAtTime"||r.type==="exponentialRampToValueAtTime"){let a=s.value;if(s.type==="setTargetAtTime"){const l=this._events.getBefore(s.time);l===null?a=this._initialValue:a=l.value}r.type==="linearRampToValueAtTime"?i=this._linearInterpolate(s.time,a,r.time,r.value,n):i=this._exponentialInterpolate(s.time,a,r.time,r.value,n)}else i=s.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let n=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,e),this}linearRampToValueAtTime(e,n){const r=this._fromType(e),s=this.toSeconds(n);return Me(isFinite(r)&&isFinite(s),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(r),this._events.add({time:s,type:"linearRampToValueAtTime",value:r}),this.log(this.units,"linearRampToValueAtTime",e,s),this._param.linearRampToValueAtTime(r,s),this}exponentialRampToValueAtTime(e,n){let r=this._fromType(e);r=qn(r,0)?this._minOutput:r,this._assertRange(r);const s=this.toSeconds(n);return Me(isFinite(r)&&isFinite(s),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({time:s,type:"exponentialRampToValueAtTime",value:r}),this.log(this.units,"exponentialRampToValueAtTime",e,s),this._param.exponentialRampToValueAtTime(r,s),this}exponentialRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialRampToValueAtTime(e,r+this.toSeconds(n)),this}linearRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.linearRampToValueAtTime(e,r+this.toSeconds(n)),this}targetRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialApproachValueAtTime(e,r,n),this}exponentialApproachValueAtTime(e,n,r){n=this.toSeconds(n),r=this.toSeconds(r);const s=Math.log(r+1)/Math.log(200);return this.setTargetAtTime(e,n,s),this.cancelAndHoldAtTime(n+r*.9),this.linearRampToValueAtTime(e,n+r),this}setTargetAtTime(e,n,r){const s=this._fromType(e);Me(isFinite(r)&&r>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(n);return this._assertRange(s),Me(isFinite(s)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({constant:r,time:i,type:"setTargetAtTime",value:s}),this.log(this.units,"setTargetAtTime",e,i,r),this._param.setTargetAtTime(s,i,r),this}setValueCurveAtTime(e,n,r,s=1){r=this.toSeconds(r),n=this.toSeconds(n);const i=this._fromType(e[0])*s;this.setValueAtTime(this._toType(i),n);const a=r/(e.length-1);for(let l=1;l<e.length;l++){const c=this._fromType(e[l])*s;this.linearRampToValueAtTime(this._toType(c),n+l*a)}return this}cancelScheduledValues(e){const n=this.toSeconds(e);return Me(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(e){const n=this.toSeconds(e),r=this._fromType(this.getValueAtTime(n));Me(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+r);const s=this._events.get(n),i=this._events.getAfter(n);return s&&qn(s.time,n)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(r),n):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(r),n)),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}rampTo(e,n=.1,r){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,n,r):this.linearRampTo(e,n,r),this}apply(e){const n=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(n),n);const r=this._events.get(n);if(r&&r.type==="setTargetAtTime"){const s=this._events.getAfter(r.time),i=s?s.time:n+2,a=(i-n)/10;for(let l=n;l<i;l+=a)e.linearRampToValueAtTime(this.getValueAtTime(l),l)}return this._events.forEachAfter(this.context.currentTime,s=>{s.type==="cancelScheduledValues"?e.cancelScheduledValues(s.time):s.type==="setTargetAtTime"?e.setTargetAtTime(s.value,s.time,s.constant):e[s.type](s.value,s.time)}),this}setParam(e){Me(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(e),this._param=e,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,n,r,s,i){return r+(n-r)*Math.exp(-(i-e)/s)}_linearInterpolate(e,n,r,s,i){return n+(s-n)*((i-e)/(r-e))}_exponentialInterpolate(e,n,r,s,i){return n*Math.pow(s/n,(i-e)/(r-e))}}class Ie extends mn{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Ve(this.input)?Hs(this.input)||this.input instanceof ct?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Ve(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Ve(e)&&(e instanceof Ie||us(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(r=>{r.channelCount=e.channelCount,r.channelCountMode=e.channelCountMode,r.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();Me(e.length>0,"ToneAudioNode does not have any internal nodes");const n=e[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:e}))}connect(e,n=0,r=0){return ds(this,e,n,r),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Lf("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,n=0,r=0){return Yb(this,e,n,r),this}chain(...e){return kd(this,...e),this}fan(...e){return e.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),Ve(this.input)&&(this.input instanceof Ie?this.input.dispose():us(this.input)&&this.input.disconnect()),Ve(this.output)&&(this.output instanceof Ie?this.output.dispose():us(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function kd(...t){const e=t.shift();t.reduce((n,r)=>(n instanceof Ie?n.connect(r):us(n)&&ds(n,r),r),e)}function ds(t,e,n=0,r=0){for(Me(Ve(t),"Cannot connect from undefined node"),Me(Ve(e),"Cannot connect to undefined node"),(e instanceof Ie||us(e))&&Me(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Me(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof Ie||e instanceof ct;)Ve(e.input)&&(e=e.input);for(;t instanceof Ie;)Ve(t.output)&&(t=t.output);Hs(e)?t.connect(e,n):t.connect(e,n,r)}function Yb(t,e,n=0,r=0){if(Ve(e))for(;e instanceof Ie;)e=e.input;for(;!us(t);)Ve(t.output)&&(t=t.output);Hs(e)?t.disconnect(e,n):us(e)?t.disconnect(e,n,r):t.disconnect()}class rt extends Ie{constructor(){super(oe(rt.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const e=oe(rt.getDefaults(),arguments,["gain","units"]);this.gain=new ct({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),ft(this,"gain")}static getDefaults(){return Object.assign(Ie.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class eo extends Ie{constructor(e){super(e),this.onended=Ke,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new rt({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const r=this.toSeconds(n);return this._startTime!==-1&&r>=this._startTime&&(this._stopTime===-1||r<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(Ie.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Ke})}_startGain(e,n=1){Me(this._startTime===-1,"Source cannot be started more than once");const r=this.toSeconds(this._fadeIn);return this._startTime=e+r,this._startTime=Math.max(this._startTime,this.context.currentTime),r>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,e+r):this._gainNode.gain.exponentialApproachValueAtTime(n,e,r)):this._gainNode.gain.setValueAtTime(n,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){Me(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+n,this._stopTime=Math.max(this._stopTime,this.now()),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,e):this._gainNode.gain.targetRampTo(0,n,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const r=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+r),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Ke&&(this.onended(this),this.onended=Ke,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Me(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=Ke,this}}class Eu extends eo{constructor(){super(oe(Eu.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const e=oe(Eu.getDefaults(),arguments,["offset"]);ds(this._source,this._gainNode),this.offset=new ct({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(eo.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class At extends Ie{constructor(){super(oe(At.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const e=oe(At.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Eu({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(Ie.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,n=0,r=0){return zf(this,e,n,r),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,n){return this._param.setValueAtTime(e,n),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,n){return this._param.linearRampToValueAtTime(e,n),this}exponentialRampToValueAtTime(e,n){return this._param.exponentialRampToValueAtTime(e,n),this}exponentialRampTo(e,n,r){return this._param.exponentialRampTo(e,n,r),this}linearRampTo(e,n,r){return this._param.linearRampTo(e,n,r),this}targetRampTo(e,n,r){return this._param.targetRampTo(e,n,r),this}exponentialApproachValueAtTime(e,n,r){return this._param.exponentialApproachValueAtTime(e,n,r),this}setTargetAtTime(e,n,r){return this._param.setTargetAtTime(e,n,r),this}setValueCurveAtTime(e,n,r,s){return this._param.setValueCurveAtTime(e,n,r,s),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,n,r){return this._param.rampTo(e,n,r),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function zf(t,e,n,r){(e instanceof ct||Hs(e)||e instanceof At&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof At&&(e.overridden=!0)),ds(t,e,n,r)}class Au extends ct{constructor(){super(oe(Au.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Fn(1/0),this._multiplier=1;const e=oe(Au.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ct.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,n,r){n=this.toSeconds(n),this.setRampPoint(n);const s=this._fromType(e),i=this._events.get(n),a=Math.round(Math.max(1/r,1));for(let l=0;l<=a;l++){const c=r*l+n,h=this._exponentialApproach(i.time,i.value,s,r,c);this.linearRampToValueAtTime(this._toType(h),c)}return this}setValueAtTime(e,n){const r=this.toSeconds(n);super.setValueAtTime(e,n);const s=this._events.get(r),i=this._events.previousEvent(s),a=this._getTicksUntilEvent(i,r);return s.ticks=Math.max(a,0),this}linearRampToValueAtTime(e,n){const r=this.toSeconds(n);super.linearRampToValueAtTime(e,n);const s=this._events.get(r),i=this._events.previousEvent(s),a=this._getTicksUntilEvent(i,r);return s.ticks=Math.max(a,0),this}exponentialRampToValueAtTime(e,n){n=this.toSeconds(n);const r=this._fromType(e),s=this._events.get(n),i=Math.round(Math.max((n-s.time)*10,1)),a=(n-s.time)/i;for(let l=0;l<=i;l++){const c=a*l+s.time,h=this._exponentialInterpolate(s.time,s.value,n,r,c);this.linearRampToValueAtTime(this._toType(h),c)}return this}_getTicksUntilEvent(e,n){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(jn(e.ticks)){const a=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(a,e.time)}const r=this._fromType(this.getValueAtTime(e.time));let s=this._fromType(this.getValueAtTime(n));const i=this._events.get(n);return i&&i.time===n&&i.type==="setValueAtTime"&&(s=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-e.time)*(r+s)+e.ticks}getTicksAtTime(e){const n=this.toSeconds(e),r=this._events.get(n);return Math.max(this._getTicksUntilEvent(r,n),0)}getDurationOfTicks(e,n){const r=this.toSeconds(n),s=this.getTicksAtTime(n);return this.getTimeOfTick(s+e)-r}getTimeOfTick(e){const n=this._events.get(e,"ticks"),r=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&r&&r.type==="linearRampToValueAtTime"&&n.value!==r.value){const s=this._fromType(this.getValueAtTime(n.time)),a=(this._fromType(this.getValueAtTime(r.time))-s)/(r.time-n.time),l=Math.sqrt(Math.pow(s,2)-2*a*(n.ticks-e)),c=(-s+l)/a,h=(-s-l)/a;return(c>0?c:h)+n.time}else return n?n.value===0?1/0:n.time+(e-n.ticks)/n.value:e/this._initialValue}ticksToTime(e,n){return this.getDurationOfTicks(e,n)}timeToTicks(e,n){const r=this.toSeconds(n),s=this.toSeconds(e),i=this.getTicksAtTime(r);return this.getTicksAtTime(r+s)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const n=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class Nu extends At{constructor(){super(oe(Nu.getDefaults(),arguments,["value"])),this.name="TickSignal";const e=oe(Nu.getDefaults(),arguments,["value"]);this.input=this._param=new Au({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(At.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,n){return this._param.ticksToTime(e,n)}timeToTicks(e,n){return this._param.timeToTicks(e,n)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,n){return this._param.getDurationOfTicks(e,n)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class Ou extends mn{constructor(){super(oe(Ou.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new Wf,this._tickOffset=new Fn,this._ticksAtTime=new Fn,this._secondsAtTime=new Fn;const e=oe(Ou.getDefaults(),arguments,["frequency"]);this.frequency=new Nu({context:this.context,units:e.units,value:e.frequency}),ft(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},mn.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,n){const r=this.toSeconds(e);return this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),Ve(n)&&this.setTicksAtTime(n,r),this._ticksAtTime.cancel(r),this._secondsAtTime.cancel(r)),this}stop(e){const n=this.toSeconds(e);if(this._state.getValueAtTime(n)==="stopped"){const r=this._state.get(n);r&&r.time>0&&(this._tickOffset.cancel(r.time),this._state.cancel(r.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const n=this.toSeconds(e),r=this._state.getLastState("stopped",n),s=this._ticksAtTime.get(n),i={state:"paused",time:n};this._state.add(i);let a=s||r,l=s?s.ticks:0,c=null;return this._state.forEachBetween(a.time,n+this.sampleTime,h=>{let m=a.time;const p=this._tickOffset.get(h.time);p&&p.time>=a.time&&(l=p.ticks,m=p.time),a.state==="started"&&h.state!=="started"&&(l+=this.frequency.getTicksAtTime(h.time)-this.frequency.getTicksAtTime(m),h.time!==i.time&&(c={state:h.state,time:h.time,ticks:l})),a=h}),this._state.remove(i),c&&this._ticksAtTime.add(c),l}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const n=this.now(),r=this.frequency.timeToTicks(e,n);this.setTicksAtTime(r,n)}getSecondsAtTime(e){e=this.toSeconds(e);const n=this._state.getLastState("stopped",e),r={state:"paused",time:e};this._state.add(r);const s=this._secondsAtTime.get(e);let i=s||n,a=s?s.seconds:0,l=null;return this._state.forEachBetween(i.time,e+this.sampleTime,c=>{let h=i.time;const m=this._tickOffset.get(c.time);m&&m.time>=i.time&&(a=m.seconds,h=m.time),i.state==="started"&&c.state!=="started"&&(a+=c.time-h,c.time!==r.time&&(l={state:c.state,time:c.time,seconds:a})),i=c}),this._state.remove(r),l&&this._secondsAtTime.add(l),a}setTicksAtTime(e,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,n),ticks:e,time:n}),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,n=this.now()){const r=this._tickOffset.get(n),s=this._state.get(n),i=Math.max(r.time,s.time),a=this.frequency.getTicksAtTime(i)+e-r.ticks;return this.frequency.getTimeOfTick(a)}forEachTickBetween(e,n,r){let s=this._state.get(e);this._state.forEachBetween(e,n,a=>{s&&s.state==="started"&&a.state!=="started"&&this.forEachTickBetween(Math.max(s.time,e),a.time-this.sampleTime,r),s=a});let i=null;if(s&&s.state==="started"){const a=Math.max(s.time,e),l=this.frequency.getTicksAtTime(a),c=this.frequency.getTicksAtTime(s.time),h=l-c;let m=Math.ceil(h)-h;m=qn(m,1)?0:m;let p=this.frequency.getTimeOfTick(l+m);for(;p<n;){try{r(p,Math.round(this.getTicksAtTime(p)))}catch(y){i=y;break}p+=this.frequency.getDurationOfTicks(1,p)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class fa extends mn{constructor(){super(oe(fa.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=Ke,this._lastUpdate=0,this._state=new Wf("stopped"),this._boundLoop=this._loop.bind(this);const e=oe(fa.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new Ou({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,ft(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(mn.getDefaults(),{callback:Ke,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,n){A_(this.context);const r=this.toSeconds(e);return this.log("start",r),this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),this._tickSource.start(r,n),r<this._lastUpdate&&this.emit("start",r,n)),this}stop(e){const n=this.toSeconds(e);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,n){return this._tickSource.setTicksAtTime(e,n),this}getTimeOfTick(e,n=this.now()){return this._tickSource.getTimeOfTick(e,n)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,n){const r=this.toSeconds(n),s=this.getTicksAtTime(r);return this._tickSource.getTimeOfTick(s+e,r)}_loop(){const e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,r=>{switch(r.state){case"started":const s=this._tickSource.getTicksAtTime(r.time);this.emit("start",r.time,s);break;case"stopped":r.time!==0&&this.emit("stop",r.time);break;case"paused":this.emit("pause",r.time);break}}),this._tickSource.forEachTickBetween(e,n,(r,s)=>{this.callback(r,s)}))}getStateAtTime(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}ja.mixin(fa);class Uf extends Mr{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=oe(Uf.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(n=>{this._loadingCount++;const r=e.urls[n];this.add(n,r,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Ke,onload:Ke,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return Me(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,n])=>n.loaded)}add(e,n,r=Ke,s=Ke){return Nr(n)?(this.baseUrl&&n.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new $e(this.baseUrl+n,r,s))):this._buffers.set(e.toString(),new $e(n,r,s)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class Di extends Ko{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class Zb extends mn{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Fn,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,n){return this._events.add({callback:e,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const n=this._events.shift();n&&e-n.time<=this.expiration&&n.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}lc(t=>{t.draw=new Zb({context:t})});uc(t=>{t.draw.dispose()});class Jb extends Mr{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){Me(Ve(e.time),"Events must have a time property"),Me(Ve(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let n=new eE(e.time,e.time+e.duration,e);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(e){if(this._root!==null){const n=[];this._root.search(e.time,n);for(const r of n)if(r.event===e){this._removeNode(r),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,n=>this.remove(n)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,n){e.parent!==null?(e.isLeftChild()?e.parent.left=n:e.parent.right=n,this._rebalance(e.parent)):this._setRoot(n)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const n=e.getBalance();let r,s=null;if(n>0)if(e.left.right===null)r=e.left,r.right=e.right,s=r;else{for(r=e.left.right;r.right!==null;)r=r.right;r.parent&&(r.parent.right=r.left,s=r.parent,r.left=e.left,r.right=e.right)}else if(e.right.left===null)r=e.right,r.left=e.left,s=r;else{for(r=e.right.left;r.left!==null;)r=r.left;r.parent&&(r.parent.left=r.right,s=r.parent,r.left=e.left,r.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=r:e.parent.right=r:this._setRoot(r),s&&this._rebalance(s)}e.dispose()}_rotateLeft(e){const n=e.parent,r=e.isLeftChild(),s=e.right;s&&(e.right=s.left,s.left=e),n!==null?r?n.left=s:n.right=s:this._setRoot(s)}_rotateRight(e){const n=e.parent,r=e.isLeftChild(),s=e.left;s&&(e.left=s.right,s.right=e),n!==null?r?n.left=s:n.right=s:this._setRoot(s)}_rebalance(e){const n=e.getBalance();n>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):n<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const n=[];if(this._root.search(e,n),n.length>0){let r=n[0];for(let s=1;s<n.length;s++)n[s].low>r.low&&(r=n[s]);return r.event}}return null}forEach(e){if(this._root!==null){const n=[];this._root.traverse(r=>n.push(r)),n.forEach(r=>{r.event&&e(r.event)})}return this}forEachAtTime(e,n){if(this._root!==null){const r=[];this._root.search(e,r),r.forEach(s=>{s.event&&n(s.event)})}return this}forEachFrom(e,n){if(this._root!==null){const r=[];this._root.searchAfter(e,r),r.forEach(s=>{s.event&&n(s.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class eE{constructor(e,n,r){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=r,this.low=e,this.high=n,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,n){e>this.max||(this.left!==null&&this.left.search(e,n),this.low<=e&&this.high>e&&n.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,n))}searchAfter(e,n){this.low>=e&&(n.push(this),this.left!==null&&this.left.searchAfter(e,n)),this.right!==null&&this.right.searchAfter(e,n)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Xs extends Ie{constructor(){super(oe(Xs.getDefaults(),arguments,["volume"])),this.name="Volume";const e=oe(Xs.getDefaults(),arguments,["volume"]);this.input=this.output=new rt({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,ft(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(Ie.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Iu extends Ie{constructor(){super(oe(Iu.getDefaults(),arguments)),this.name="Destination",this.input=new Xs({context:this.context}),this.output=new rt({context:this.context}),this.volume=this.input.volume;const e=oe(Iu.getDefaults(),arguments);kd(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(Ie.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),kd(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}lc(t=>{t.destination=new Iu({context:t})});uc(t=>{t.destination.dispose()});class tE extends Mr{constructor(e){super(),this.name="TimelineValue",this._timeline=new Fn({memory:10}),this._initialValue=e}set(e,n){return this._timeline.add({value:e,time:n}),this}get(e){const n=this._timeline.get(e);return n?n.value:this._initialValue}}class Qs extends Ie{constructor(){super(Object.assign(oe(Qs.getDefaults(),arguments,["context"])))}connect(e,n=0,r=0){return zf(this,e,n,r),this}}class Ys extends Qs{constructor(){super(Object.assign(oe(Ys.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const e=oe(Ys.getDefaults(),arguments,["mapping","length"]);Gn(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):Tb(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(At.getDefaults(),{length:1024})}setMap(e,n=1024){const r=new Float32Array(n);for(let s=0,i=n;s<i;s++){const a=s/(i-1)*2-1;r[s]=e(a,s)}return this.curve=r,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const n=["none","2x","4x"].some(r=>r.includes(e));Me(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Pu extends Qs{constructor(){super(Object.assign(oe(Pu.getDefaults(),arguments,["value"]))),this.name="Pow";const e=oe(Pu.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new Ys({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Qs.getDefaults(),{value:1})}_expFunc(e){return n=>Math.pow(Math.abs(n),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class fs{constructor(e,n){this.id=fs._eventId++,this._remainderTime=0;const r=Object.assign(fs.getDefaults(),n);this.transport=e,this.callback=r.callback,this._once=r.once,this.time=Math.floor(r.time),this._remainderTime=r.time-this.time}static getDefaults(){return{callback:Ke,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const n=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*n),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}fs._eventId=0;class qf extends fs{constructor(e,n){super(e,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const r=Object.assign(qf.getDefaults(),n);this.duration=r.duration,this._interval=r.interval,this._nextTick=r.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},fs.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return bu(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Di(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){bu(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Di(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const n=this.transport.getTicksAtTime(e);Ji(n,this.time)&&(this._nextTick=this.floatTime+Math.ceil((n-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class pa extends mn{constructor(){super(oe(pa.getDefaults(),arguments)),this.name="Transport",this._loop=new tE(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Fn,this._repeatedEvents=new Jb,this._syncedSignals=[],this._swingAmount=0;const e=oe(pa.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new fa({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),ft(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(mn.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,n){if(this._loop.get(e)&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),n=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){const r=n%(this._swingTicks*2)/(this._swingTicks*2),s=Math.sin(r*Math.PI)*this._swingAmount;e+=new Di(this.context,this._swingTicks*2/3).toSeconds()*s}ig(!0),this._timeline.forEachAtTime(n,r=>r.invoke(e)),ig(!1)}schedule(e,n){const r=new fs(this,{callback:e,time:new Ko(this.context,n).toTicks()});return this._addEvent(r,this._timeline)}scheduleRepeat(e,n,r,s=1/0){const i=new qf(this,{callback:e,duration:new Mn(this.context,s).toTicks(),interval:new Mn(this.context,n).toTicks(),time:new Ko(this.context,r).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,n){const r=new fs(this,{callback:e,once:!0,time:new Ko(this.context,n).toTicks()});return this._addEvent(r,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const n=this._scheduledEvents[e.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,n){return this._scheduledEvents[e.id.toString()]={event:e,timeline:n},n.add(e),e.id}cancel(e=0){const n=this.toTicks(e);return this._timeline.forEachFrom(n,r=>this.clear(r.id)),this._repeatedEvents.forEachFrom(n,r=>this.clear(r.id)),this}_bindClockEvents(){this._clock.on("start",(e,n)=>{n=new Di(this.context,n).toSeconds(),this.emit("start",e,n)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,n){this.context.resume();let r;return Ve(n)&&(r=this.toTicks(n)),this._clock.start(e,r),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){Gn(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new Mn(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new Mn(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Di(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),n=this._clock.getTicksAtTime(e);return new Di(this.context,n).toBarsBeatsSixteenths()}set position(e){const n=this.toTicks(e);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(e){const n=this.now(),r=this._clock.frequency.timeToTicks(e,n);this.ticks=r}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const n=this.now();if(this.state==="started"){const r=this._clock.getTicksAtTime(n),s=this._clock.frequency.getDurationOfTicks(Math.ceil(r)-r,n),i=n+s;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this.emit("ticks",n),this._clock.setTicksAtTime(e,n)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const n=this.now(),r=this.getTicksAtTime(n),s=e-r%e;return this._clock.nextTickTime(s,n)}}syncSignal(e,n){const r=this.now();let s=this.bpm,i=1/(60/s.getValueAtTime(r)/this.PPQ),a=[];if(e.units==="time"){const c=.015625/i,h=new rt(c),m=new Pu(-1),p=new rt(c);s.chain(h,m,p),s=p,i=1/i,a=[h,m,p]}n||(e.getValueAtTime(r)!==0?n=e.getValueAtTime(r)/i:n=0);const l=new rt(n);return s.connect(l),l.connect(e._param),a.push(l),this._syncedSignals.push({initial:e.value,nodes:a,signal:e}),e.value=0,this}unsyncSignal(e){for(let n=this._syncedSignals.length-1;n>=0;n--){const r=this._syncedSignals[n];r.signal===e&&(r.nodes.forEach(s=>s.dispose()),r.signal.value=r.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),D_(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}ja.mixin(pa);lc(t=>{t.transport=new pa({context:t})});uc(t=>{t.transport.dispose()});class nn extends Ie{constructor(e){super(e),this.input=void 0,this._state=new Wf("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Ke,this._syncedStop=Ke,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Xs({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,ft(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(Ie.getDefaults(),{mute:!1,onstop:Ke,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,n,r){let s=jn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(s=this._clampToCurrentTime(s),!this._synced&&this._state.getValueAtTime(s)==="started")Me(Ji(s,this._state.get(s).time),"Start time must be strictly greater than previous start time"),this._state.cancel(s),this._state.setStateAtTime("started",s),this.log("restart",s),this.restart(s,n,r);else if(this.log("start",s),this._state.setStateAtTime("started",s),this._synced){const i=this._state.get(s);i&&(i.offset=this.toSeconds(zi(n,0)),i.duration=r?this.toSeconds(r):void 0);const a=this.context.transport.schedule(l=>{this._start(l,n,r)},s);this._scheduled.push(a),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>s&&this._syncedStart(this.now(),this.context.transport.seconds)}else A_(this.context),this._start(s,n,r);return this}stop(e){let n=jn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||Ve(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{const r=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(r)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(e,n,r){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,n,r)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,n)=>{if(Ji(n,0)){const r=this._state.get(n);if(r&&r.state==="started"&&r.time!==n){const s=n-this.toSeconds(r.time);let i;r.duration&&(i=this.toSeconds(r.duration)-s),this._start(e,this.toSeconds(r.offset)+s,i)}}},this._syncedStop=e=>{const n=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Ke,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class to extends eo{constructor(){super(oe(to.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const e=oe(to.getDefaults(),arguments,["url","onload"]);ds(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new ct({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new $e(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(eo.getDefaults(),{url:new $e,loop:!1,loopEnd:0,loopStart:0,onload:Ke,onerror:Ke,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,n,r,s=1){Me(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,s),this.loop?n=zi(n,this.loopStart):n=zi(n,0);let a=Math.max(this.toSeconds(n),0);if(this.loop){const l=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),h=l-c;wd(a,l)&&(a=(a-c)%h+c),qn(a,this.buffer.duration)&&(a=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,bu(a,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,a)),Ve(r)){let l=this.toSeconds(r);l=Math.max(l,0),this.stop(i+l)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class ma extends nn{constructor(){super(oe(ma.getDefaults(),arguments,["type"])),this.name="Noise",this._source=null;const e=oe(ma.getDefaults(),arguments,["type"]);this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(nn.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(Me(e in ag,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const n=this.now();this._stop(n),this._start(n)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const n=ag[this._type];this._source=new to({url:n,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(n.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const yi=44100*5,yh=2,yr={brown:null,pink:null,white:null},ag={get brown(){if(!yr.brown){const t=[];for(let e=0;e<yh;e++){const n=new Float32Array(yi);t[e]=n;let r=0;for(let s=0;s<yi;s++){const i=Math.random()*2-1;n[s]=(r+.02*i)/1.02,r=n[s],n[s]*=3.5}}yr.brown=new $e().fromArray(t)}return yr.brown},get pink(){if(!yr.pink){const t=[];for(let e=0;e<yh;e++){const n=new Float32Array(yi);t[e]=n;let r,s,i,a,l,c,h;r=s=i=a=l=c=h=0;for(let m=0;m<yi;m++){const p=Math.random()*2-1;r=.99886*r+p*.0555179,s=.99332*s+p*.0750759,i=.969*i+p*.153852,a=.8665*a+p*.3104856,l=.55*l+p*.5329522,c=-.7616*c-p*.016898,n[m]=r+s+i+a+l+c+h+p*.5362,n[m]*=.11,h=p*.115926}}yr.pink=new $e().fromArray(t)}return yr.pink},get white(){if(!yr.white){const t=[];for(let e=0;e<yh;e++){const n=new Float32Array(yi);t[e]=n;for(let r=0;r<yi;r++)n[r]=Math.random()*2-1}yr.white=new $e().fromArray(t)}return yr.white}};function oi(t,e){return Tt(this,void 0,void 0,function*(){const n=e/t.context.sampleRate,r=new cc(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:r})).toDestination().start(0),(yield r.render()).getChannelData(0)})}class Mu extends eo{constructor(){super(oe(Mu.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const e=oe(Mu.getDefaults(),arguments,["frequency","type"]);ds(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new ct({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new ct({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),ft(this,["frequency","detune"])}static getDefaults(){return Object.assign(eo.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class kt extends nn{constructor(){super(oe(kt.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=oe(kt.getDefaults(),arguments,["frequency","type"]);this.frequency=new At({context:this.context,units:"frequency",value:e.frequency}),ft(this,"frequency"),this.detune=new At({context:this.context,units:"cents",value:e.detune}),ft(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(nn.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const n=this.toSeconds(e),r=new Mu({context:this.context,onended:()=>this.onstop(this)});this._oscillator=r,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}_stop(e){const n=this.toSeconds(e);this._oscillator&&this._oscillator.stop(n)}_restart(e){const n=this.toSeconds(e);return this.log("restart",n),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(n),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return kt._periodicWaveCache.find(n=>n.phase===this._phase&&Rb(n.partials,this._partials));{const e=kt._periodicWaveCache.find(n=>n.type===this._type&&n.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const n=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&n)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const r=this._getCachedPeriodicWave();if(Ve(r)){const{partials:s,wave:i}=r;this._wave=i,this._partials=s,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[s,i]=this._getRealImaginary(e,this._phase),a=this.context.createPeriodicWave(s,i);this._wave=a,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),kt._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:s,type:this._type,wave:this._wave}),kt._periodicWaveCache.length>100&&kt._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){ur(e,0);let n=this._type;const r=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(r&&(n=r[1]),this._type!=="custom")e===0?this.type=n:this.type=n+e.toString();else{const s=new Float32Array(e);this._partials.forEach((i,a)=>s[a]=i),this._partials=Array.from(s),this.type=this._type}}_getRealImaginary(e,n){let s=2048;const i=new Float32Array(s),a=new Float32Array(s);let l=1;if(e==="custom"){if(l=this._partials.length+1,this._partialCount=this._partials.length,s=l,this._partials.length===0)return[i,a]}else{const c=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);c?(l=parseInt(c[2],10)+1,this._partialCount=parseInt(c[2],10),e=c[1],l=Math.max(l,2),s=l):this._partialCount=0,this._partials=[]}for(let c=1;c<s;++c){const h=2/(c*Math.PI);let m;switch(e){case"sine":m=c<=l?1:0,this._partials[c-1]=m;break;case"square":m=c&1?2*h:0,this._partials[c-1]=m;break;case"sawtooth":m=h*(c&1?1:-1),this._partials[c-1]=m;break;case"triangle":c&1?m=2*(h*h)*(c-1>>1&1?-1:1):m=0,this._partials[c-1]=m;break;case"custom":m=this._partials[c-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}m!==0?(i[c]=-m*Math.sin(n*c),a[c]=m*Math.cos(n*c)):(i[c]=0,a[c]=0)}return[i,a]}_inverseFFT(e,n,r){let s=0;const i=e.length;for(let a=0;a<i;a++)s+=e[a]*Math.cos(a*r)+n[a]*Math.sin(a*r);return s}getInitialValue(){const[e,n]=this._getRealImaginary(this._type,0);let r=0;const s=Math.PI*2,i=32;for(let a=0;a<i;a++)r=Math.max(this._inverseFFT(e,n,a/i*s),r);return Fb(-this._inverseFFT(e,n,this._phase)/r,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return Tt(this,void 0,void 0,function*(){return oi(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}kt._periodicWaveCache=[];class nE extends Qs{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Ys({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Zs extends At{constructor(){super(Object.assign(oe(Zs.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const e=oe(Zs.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new rt({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(At.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class ga extends nn{constructor(){super(oe(ga.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new nE({context:this.context}),this._modulationNode=new rt({context:this.context});const e=oe(ga.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new kt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new kt({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Zs({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),ft(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(kt.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return Tt(this,void 0,void 0,function*(){return oi(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class ya extends nn{constructor(){super(oe(ya.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new rt({context:this.context,gain:0});const e=oe(ya.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new kt({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new At({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new kt({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Zs({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Zs({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),ft(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(kt.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return Tt(this,void 0,void 0,function*(){return oi(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class no extends nn{constructor(){super(oe(no.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new rt({context:this.context,gain:0}),this._thresh=new Ys({context:this.context,mapping:n=>n<=0?-1:1});const e=oe(no.getDefaults(),arguments,["frequency","width"]);this.width=new At({context:this.context,units:"audioRange",value:e.width}),this._triangle=new kt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),ft(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(nn.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return Tt(this,void 0,void 0,function*(){return oi(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class va extends nn{constructor(){super(oe(va.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const e=oe(va.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new At({context:this.context,units:"frequency",value:e.frequency}),this.detune=new At({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,ft(this,["frequency","detune"])}static getDefaults(){return Object.assign(kt.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(n=>n.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(n=>n.stop(e))}_restart(e){this._forEach(n=>n.restart(e))}_forEach(e){for(let n=0;n<this._oscillators.length;n++)e(this._oscillators[n],n)}get type(){return this._type}set type(e){this._type=e,this._forEach(n=>n.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const n=-e/2,r=e/(this._oscillators.length-1);this._forEach((s,i)=>s.detune.value=n+r*i)}}get count(){return this._oscillators.length}set count(e){if(ur(e,1),this._oscillators.length!==e){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<e;n++){const r=new kt({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+n/e*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):Ke});this.type==="custom"&&(r.partials=this._partials),this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.detune.overridden=!1,r.connect(this.output),this._oscillators[n]=r}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((n,r)=>n.phase=this._phase+r/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(n=>n.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(n=>n.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(n=>n.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return Tt(this,void 0,void 0,function*(){return oi(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class _a extends nn{constructor(){super(oe(_a.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Zs({context:this.context,value:2});const e=oe(_a.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new no({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new kt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),ft(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(nn.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return Tt(this,void 0,void 0,function*(){return oi(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const lg={am:ga,fat:va,fm:ya,oscillator:kt,pulse:no,pwm:_a};class wa extends nn{constructor(){super(oe(wa.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const e=oe(wa.getDefaults(),arguments,["frequency","type"]);this.frequency=new At({context:this.context,units:"frequency",value:e.frequency}),this.detune=new At({context:this.context,units:"cents",value:e.detune}),ft(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(kt.getDefaults(),ya.getDefaults(),ga.getDefaults(),va.getDefaults(),no.getDefaults(),_a.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const n=lg[e],r=this.now();if(this._oscillator){const s=this._oscillator;s.stop(r),this.context.setTimeout(()=>s.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(r)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),e==="fm"?this.type="fm"+n:e==="am"?this.type="am"+n:e==="fat"?this.type="fat"+n:e==="oscillator"?this.type=n:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,n){return e instanceof lg[n]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Gs(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Gs(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Nr(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return Tt(this,void 0,void 0,function*(){return oi(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function L_(t,e=1/0){const n=new WeakMap;return function(r,s){Reflect.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){ur(i,t,e),n.set(this,i)}})}}function Dr(t,e=1/0){const n=new WeakMap;return function(r,s){Reflect.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){ur(this.toSeconds(i),t,e),n.set(this,i)}})}}class Js extends nn{constructor(){super(oe(Js.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const e=oe(Js.getDefaults(),arguments,["url","onload"]);this._buffer=new $e({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(nn.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Ke,onerror:Ke,playbackRate:1,reverse:!1})}load(e){return Tt(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=Ke){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,n,r){return super.start(e,n,r),this}_start(e,n,r){this._loop?n=zi(n,this._loopStart):n=zi(n,0);const s=this.toSeconds(n),i=r;r=zi(r,Math.max(this._buffer.duration-s,0));let a=this.toSeconds(r);a=a/this._playbackRate,e=this.toSeconds(e);const l=new to({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+a),this._state.setStateAtTime("stopped",e+a,{implicitEnd:!0})),this._activeSources.add(l),this._loop&&jn(i)?l.start(e,s):l.start(e,s,a-this.toSeconds(this.fadeOut))}_stop(e){const n=this.toSeconds(e);this._activeSources.forEach(r=>r.stop(n))}restart(e,n,r){return super.restart(e,n,r),this}_restart(e,n,r){var s;(s=[...this._activeSources].pop())===null||s===void 0||s.stop(e),this._start(e,n,r)}seek(e,n){const r=this.toSeconds(n);if(this._state.getValueAtTime(r)==="started"){const s=this.toSeconds(e);this._stop(r),this._start(r,s)}return this}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&ur(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&ur(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(n=>{n.loop=e}),e)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const n=this.now(),r=this._state.getNextState("stopped",n);r&&r.implicitEnd&&(this._state.cancel(r.time),this._activeSources.forEach(s=>s.cancelStop())),this._activeSources.forEach(s=>{s.playbackRate.setValueAtTime(e,n)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}Zn([Dr(0)],Js.prototype,"fadeIn",void 0);Zn([Dr(0)],Js.prototype,"fadeOut",void 0);class rE extends Qs{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new Ys({context:this.context,mapping:e=>Math.abs(e)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Or extends Ie{constructor(){super(oe(Or.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new At({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const e=oe(Or.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(Ie.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,n){if(Nr(e))return e;{let r;for(r in Nl)if(Nl[r][n]===e)return r;return e}}_setCurve(e,n,r){if(Nr(r)&&Reflect.has(Nl,r)){const s=Nl[r];Vs(s)?e!=="_decayCurve"&&(this[e]=s[n]):this[e]=s}else if(Gn(r)&&e!=="_decayCurve")this[e]=r;else throw new Error("Envelope: invalid curve: "+r)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,n=1){this.log("triggerAttack",e,n),e=this.toSeconds(e);let s=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),a=this.getValueAtTime(e);if(a>0){const l=1/s;s=(1-a)/l}if(s<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(n,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,s,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,s,e);else{this._sig.cancelAndHoldAtTime(e);let l=this._attackCurve;for(let c=1;c<l.length;c++)if(l[c-1]<=a&&a<=l[c]){l=this._attackCurve.slice(c),l[0]=a;break}this._sig.setValueCurveAtTime(l,e,s,n)}if(i&&this.sustain<1){const l=n*this.sustain,c=e+s;this.log("decay",c),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(l,i+c):this._sig.exponentialApproachValueAtTime(l,c,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const n=this.getValueAtTime(e);if(n>0){const r=this.toSeconds(this.release);r<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,r,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,r,e):(Me(Gn(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,r,n))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,n,r=1){return n=this.toSeconds(n),this.triggerAttack(n,r),this.triggerRelease(n+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,n=0,r=0){return zf(this,e,n,r),this}asArray(e=1024){return Tt(this,void 0,void 0,function*(){const n=e/this.context.sampleRate,r=new cc(1,n,this.context.sampleRate),s=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=s+this.toSeconds(this.release),a=i*.1,l=i+a,c=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/l,decay:n*this.toSeconds(this.decay)/l,release:n*this.toSeconds(this.release)/l,context:r}));return c._sig.toDestination(),c.triggerAttackRelease(n*(s+a)/l,0),(yield r.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}Zn([Dr(0)],Or.prototype,"attack",void 0);Zn([Dr(0)],Or.prototype,"decay",void 0);Zn([L_(0,1)],Or.prototype,"sustain",void 0);Zn([Dr(0)],Or.prototype,"release",void 0);const Nl=(()=>{let e,n;const r=[];for(e=0;e<128;e++)r[e]=Math.sin(e/127*(Math.PI/2));const s=[],i=6.4;for(e=0;e<127;e++){n=e/127;const y=Math.sin(n*(Math.PI*2)*i-Math.PI/2)+1;s[e]=y/10+n*.83}s[127]=1;const a=[],l=5;for(e=0;e<128;e++)a[e]=Math.ceil(e/127*l)/l;const c=[];for(e=0;e<128;e++)n=e/127,c[e]=.5*(1-Math.cos(Math.PI*n));const h=[];for(e=0;e<128;e++){n=e/127;const y=Math.pow(n,3)*4+.2,x=Math.cos(y*Math.PI*2*n);h[e]=Math.abs(x*(1-n))}function m(y){const x=new Array(y.length);for(let w=0;w<y.length;w++)x[w]=1-y[w];return x}function p(y){return y.slice(0).reverse()}return{bounce:{In:m(h),Out:h},cosine:{In:r,Out:p(r)},exponential:"exponential",linear:"linear",ripple:{In:s,Out:m(s)},sine:{In:c,Out:m(c)},step:{In:a,Out:m(a)}}})();class ei extends Ie{constructor(){super(oe(ei.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=n=>this._original_triggerRelease(n);const e=oe(ei.getDefaults(),arguments);this._volume=this.output=new Xs({context:this.context,volume:e.volume}),this.volume=this._volume.volume,ft(this,"volume")}static getDefaults(){return Object.assign(Ie.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,n){const r=this["_original_"+e]=this[e];this[e]=(...s)=>{const i=s[n],a=this.context.transport.schedule(l=>{s[n]=l,r.apply(this,s)},i);this._scheduledEvents.push(a)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,n,r,s){const i=this.toSeconds(r),a=this.toSeconds(n);return this.triggerAttack(e,i,s),this.triggerRelease(i+a),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class ti extends ei{constructor(){super(oe(ti.getDefaults(),arguments));const e=oe(ti.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(ei.getDefaults(),{detune:0,onsilence:Ke,portamento:0})}triggerAttack(e,n,r=1){this.log("triggerAttack",e,n,r);const s=this.toSeconds(n);return this._triggerEnvelopeAttack(s,r),this.setNote(e,s),this}triggerRelease(e){this.log("triggerRelease",e);const n=this.toSeconds(e);return this._triggerEnvelopeRelease(n),this}setNote(e,n){const r=this.toSeconds(n),s=e instanceof Dn?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(r)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(s,i,r)}else this.frequency.setValueAtTime(s,r);return this}}Zn([Dr(0)],ti.prototype,"portamento",void 0);class $f extends Or{constructor(){super(oe($f.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new rt({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class xa extends ti{constructor(){super(oe(xa.getDefaults(),arguments)),this.name="Synth";const e=oe(xa.getDefaults(),arguments);this.oscillator=new wa(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new $f(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),ft(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(ti.getDefaults(),{envelope:Object.assign(og(Or.getDefaults(),Object.keys(Ie.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(og(wa.getDefaults(),[...Object.keys(nn.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,n){if(this.envelope.triggerAttack(e,n),this.oscillator.start(e),this.envelope.sustain===0){const r=this.toSeconds(this.envelope.attack),s=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+r+s)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class ka extends xa{constructor(){super(oe(ka.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const e=oe(ka.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,ft(this,["oscillator","envelope"])}static getDefaults(){return Wi(ti.getDefaults(),xa.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,n){const r=this.toSeconds(n),s=this.toFrequency(e instanceof Dn?e.toFrequency():e),i=s*this.octaves;return this.oscillator.frequency.setValueAtTime(i,r),this.oscillator.frequency.exponentialRampToValueAtTime(s,r+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Zn([L_(0)],ka.prototype,"octaves",void 0);Zn([Dr(0)],ka.prototype,"pitchDecay",void 0);const V_=new Set;function Kf(t){V_.add(t)}function B_(t,e){const n=`registerProcessor("${t}", ${e})`;V_.add(n)}const sE=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;Kf(sE);const iE=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;Kf(iE);const oE=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;Kf(oE);const aE="feedback-comb-filter",lE=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;B_(aE,lE);class ro extends ei{constructor(){super(oe(ro.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const e=oe(ro.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),n={};Object.keys(e.urls).forEach(r=>{const s=parseInt(r,10);if(Me(Al(r)||Gs(s)&&isFinite(s),`url key is neither a note or midi pitch: ${r}`),Al(r)){const i=new Dn(this.context,r).toMidi();n[i]=e.urls[r]}else Gs(s)&&isFinite(s)&&(n[s]=e.urls[s])}),this._buffers=new Uf({urls:n,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(ei.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Ke,onerror:Ke,release:.1,urls:{}})}_findClosest(e){let r=0;for(;r<96;){if(this._buffers.has(e+r))return-r;if(this._buffers.has(e-r))return r;r++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,n,r=1){return this.log("triggerAttack",e,n,r),Array.isArray(e)||(e=[e]),e.forEach(s=>{const i=F_(new Dn(this.context,s).toFrequency()),a=Math.round(i),l=i-a,c=this._findClosest(a),h=a-c,m=this._buffers.get(h),p=j_(c+l),y=new to({url:m,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:p}).connect(this.output);y.start(n,0,m.duration/p,r),Gn(this._activeSources.get(a))||this._activeSources.set(a,[]),this._activeSources.get(a).push(y),y.onended=()=>{if(this._activeSources&&this._activeSources.has(a)){const x=this._activeSources.get(a),w=x.indexOf(y);w!==-1&&x.splice(w,1)}}}),this}triggerRelease(e,n){return this.log("triggerRelease",e,n),Array.isArray(e)||(e=[e]),e.forEach(r=>{const s=new Dn(this.context,r).toMidi();if(this._activeSources.has(s)&&this._activeSources.get(s).length){const i=this._activeSources.get(s);n=this.toSeconds(n),i.forEach(a=>{a.stop(n)}),this._activeSources.set(s,[])}}),this}releaseAll(e){const n=this.toSeconds(e);return this._activeSources.forEach(r=>{for(;r.length;)r.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,n,r,s=1){const i=this.toSeconds(r);return this.triggerAttack(e,i,s),Gn(n)?(Me(Gn(e),"notes must be an array when duration is array"),e.forEach((a,l)=>{const c=n[Math.min(l,n.length-1)];this.triggerRelease(a,i+this.toSeconds(c))})):this.triggerRelease(e,i+this.toSeconds(n)),this}add(e,n,r){if(Me(Al(e)||isFinite(e),`note must be a pitch or midi: ${e}`),Al(e)){const s=new Dn(this.context,e).toMidi();this._buffers.add(s,n,r)}else this._buffers.add(e,n,r);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(n=>n.dispose())}),this._activeSources.clear(),this}}Zn([Dr(0)],ro.prototype,"attack",void 0);Zn([Dr(0)],ro.prototype,"release",void 0);class Du extends Ie{constructor(){super(Object.assign(oe(Du.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new rE({context:this.context}),this.a=new rt({context:this.context,gain:0}),this.b=new rt({context:this.context,gain:0}),this.output=new rt({context:this.context}),this._internalChannels=[this.a,this.b];const e=oe(Du.getDefaults(),arguments,["fade"]);this.fade=new At({context:this.context,units:"normalRange",value:e.fade}),ft(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",ds(this._split,this.a.gain,0),ds(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(Ie.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class ug extends Ie{constructor(e){super(e),this.name="Effect",this._dryWet=new Du({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new rt({context:this.context}),this.effectReturn=new rt({context:this.context}),this.input=new rt({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],ft(this,"wet")}static getDefaults(){return Object.assign(Ie.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class Ru extends Ie{constructor(){super(Object.assign(oe(Ru.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const e=oe(Ru.getDefaults(),arguments,["pan"]);this.pan=new ct({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",ft(this,"pan")}static getDefaults(){return Object.assign(Ie.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const uE="bit-crusher",cE=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;B_(uE,cE);class ju extends Ie{constructor(){super(oe(ju.getDefaults(),arguments,["channels"])),this.name="Merge";const e=oe(ju.getDefaults(),arguments,["channels"]);this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(Ie.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class Fu extends ug{constructor(){super(oe(Fu.getDefaults(),arguments,["decay"])),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const e=oe(Fu.getDefaults(),arguments,["decay"]);this._decay=e.decay,this._preDelay=e.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(ug.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(e){e=this.toSeconds(e),ur(e,.001),this._decay=e,this.generate()}get preDelay(){return this._preDelay}set preDelay(e){e=this.toSeconds(e),ur(e,0),this._preDelay=e,this.generate()}generate(){return Tt(this,void 0,void 0,function*(){const e=this.ready,n=new cc(2,this._decay+this._preDelay,this.context.sampleRate),r=new ma({context:n}),s=new ma({context:n}),i=new ju({context:n});r.connect(i,0,0),s.connect(i,0,1);const a=new rt({context:n}).toDestination();i.connect(a),r.start(0),s.start(0),a.gain.setValueAtTime(0,0),a.gain.setValueAtTime(1,this._preDelay),a.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const l=n.render();return this.ready=l.then(Ke),yield e,this._convolver.buffer=(yield l).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class xt extends Ie{constructor(){super(oe(xt.getDefaults(),arguments,["solo"])),this.name="Solo";const e=oe(xt.getDefaults(),arguments,["solo"]);this.input=this.output=new rt({context:this.context}),xt._allSolos.has(this.context)||xt._allSolos.set(this.context,new Set),xt._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(Ie.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),xt._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){xt._soloed.has(this.context)||xt._soloed.set(this.context,new Set),xt._soloed.get(this.context).add(this)}_removeSolo(){xt._soloed.has(this.context)&&xt._soloed.get(this.context).delete(this)}_isSoloed(){return xt._soloed.has(this.context)&&xt._soloed.get(this.context).has(this)}_noSolos(){return!xt._soloed.has(this.context)||xt._soloed.has(this.context)&&xt._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),xt._allSolos.get(this.context).delete(this),this._removeSolo(),this}}xt._allSolos=new Map;xt._soloed=new Map;class Lu extends Ie{constructor(){super(oe(Lu.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const e=oe(Lu.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Ru({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Xs({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,ft(this,["pan","volume"])}static getDefaults(){return Object.assign(Ie.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Is extends Ie{constructor(){super(oe(Is.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const e=oe(Is.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new xt({solo:e.solo,context:this.context}),this._panVol=this.output=new Lu({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),ft(this,["pan","volume"])}static getDefaults(){return Object.assign(Ie.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return Is.buses.has(e)||Is.buses.set(e,new rt({context:this.context})),Is.buses.get(e)}send(e,n=0){const r=this._getBus(e),s=new rt({context:this.context,units:"decibels",gain:n});return this.connect(s),s.connect(r),s}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Is.buses=new Map;class hE extends Ie{constructor(){super(...arguments),this.name="Listener",this.positionX=new ct({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new ct({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new ct({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new ct({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new ct({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new ct({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new ct({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new ct({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new ct({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(Ie.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}lc(t=>{t.listener=new hE({context:t})});uc(t=>{t.listener.dispose()});const Ol=hn().transport;function cg(){return hn().transport}hn().destination;hn().destination;hn().listener;hn().draw;hn();function hg(){return $e.loaded()}const W_="https://cdn.jsdelivr.net/npm/tonejs-instrument-guitar-acoustic-mp3@1.1.2/",dE=`${W_}C4.mp3`,fE=`${W_}C5.mp3`,pE={A2:"A2.mp3",A3:"A3.mp3",A4:"A4.mp3",As2:"As2.mp3",As3:"As3.mp3",As4:"As4.mp3",B2:"B2.mp3",B3:"B3.mp3",B4:"B4.mp3",C3:"C3.mp3",C4:"C4.mp3",C5:"C5.mp3",Cs3:"Cs3.mp3",Cs4:"Cs4.mp3",Cs5:"Cs5.mp3",D2:"D2.mp3",D3:"D3.mp3",D4:"D4.mp3",D5:"D5.mp3",Ds2:"Ds2.mp3",Ds3:"Ds3.mp3",Ds4:"Ds4.mp3",E2:"E2.mp3",E3:"E3.mp3",E4:"E4.mp3",F2:"F2.mp3",F3:"F3.mp3",F4:"F4.mp3",Fs2:"Fs2.mp3",Fs3:"Fs3.mp3",Fs4:"Fs4.mp3",G2:"G2.mp3",G3:"G3.mp3",G4:"G4.mp3",Gs2:"Gs2.mp3",Gs3:"Gs3.mp3",Gs4:"Gs4.mp3"};function mE(t){return t.name==="Trumpet"?"https://cdn.jsdelivr.net/npm/tonejs-instrument-trumpet-mp3@1.1.2/":t.name==="Alto Sax"||t.name==="Tenor Sax"?"https://cdn.jsdelivr.net/npm/tonejs-instrument-saxophone-mp3@1.1.2/":"https://cdn.jsdelivr.net/npm/tonejs-instrument-trumpet-mp3@1.1.2/"}function gE(t){return t.replace("#","s")}class yE{constructor(){this.sampler=null,this.click=null,this.accent=null,this.reverb=null,this.instrumentGain=null,this.metroGain=null,this.noteEventId=null,this.metroEventId=null}async unlock(){await zb(),await hn().resume()}async loadInstrument(e){this.sampler&&(this.sampler.dispose(),this.sampler=null),this.reverb||(this.reverb=new Fu({decay:1.6,wet:.18}).toDestination()),this.instrumentGain||(this.instrumentGain=new rt(.9).connect(this.reverb)),this.sampler=new ro({urls:pE,baseUrl:mE(e),attack:.01,release:.2}).connect(this.instrumentGain),await hg()}async loadMetronome(){this.click||(this.metroGain=new rt(.6).toDestination(),this.click=new Js(dE).connect(this.metroGain),this.accent=new Js(fE).connect(this.metroGain),await hg())}setMetronomeVolume(e){this.metroGain&&(this.metroGain.gain.value=Math.max(0,Math.min(1,e/100)))}setTempo(e){cg().bpm.rampTo(e,.05)}stop(){Ol.stop(),Ol.cancel(),this.noteEventId!==null&&Ol.clear(this.noteEventId),this.metroEventId!==null&&Ol.clear(this.metroEventId),this.noteEventId=null,this.metroEventId=null}async play(e,n){await this.unlock(),await this.loadMetronome(),await this.loadInstrument(n.instrument),this.setMetronomeVolume(n.metronomeVolume);const r=cg();r.stop(),r.cancel(),r.position=0,r.bpm.value=n.tempo,r.timeSignature=n.timeSig;const s=n.timeSig[0],i=n.subdivision==="16ths"?"16n":n.subdivision==="triplets"?"8t":"8n",a=n.subdivision==="16ths"?4:n.subdivision==="triplets"?3:2,l=n.countInBars*s*a,c=[];for(const p of e){const y=Math.round(p.startBeats*a);c[y]||(c[y]=[]),c[y].push(p)}const h=Math.max(1,c.length);let m=0;if(this.noteEventId=r.scheduleRepeat(p=>{if(m>=l){const y=m-l;(c[y]??[]).forEach(w=>{if(!this.sampler)return;const C=gu(w.midi,n.instrument.transposition),N=gE(Pi(C)),v=Math.max(.55,Math.min(1,w.velocity+(Math.random()*.08-.04))),S=Hb("4n").toSeconds()*w.durationBeats;this.sampler.triggerAttackRelease(N,S,p,v)}),!n.loop&&y>=h&&r.stop(),n.loop&&y>=h&&(m=l)}m+=1},i),n.metronomeOn){let p=0;this.metroEventId=r.scheduleRepeat(y=>{if(!this.click||!this.accent)return;p%s===0?this.accent.start(y):this.click.start(y),p+=1},"4n")}r.start("+0.05")}}const As=new yE,vE=250;function dg(){return new Date().toISOString().slice(0,10)}function Sd(t=new Date){const e=new Date(t),n=e.getDay(),r=e.getDate()-n;return new Date(e.setDate(r)).toISOString().slice(0,10)}function fg(){return{id:"stats-1",xp:0,level:1,streak:0,lastSessionDate:null,shields:0,bestTempo:0,lastTempoAchieved:null}}function Po(t,e){const n=e==="log_practice"?40:e==="save_exercise"?20:10,r=t.xp+n,s=Math.max(1,Math.floor(r/vE)+1);return{...t,xp:r,level:s}}function _E(t,e){if(!t.lastSessionDate)return{...t,streak:1,lastSessionDate:e};if(t.lastSessionDate===e)return t;const n=new Date(t.lastSessionDate),r=new Date(e),s=Math.floor((r.getTime()-n.getTime())/864e5);return s===1?{...t,streak:t.streak+1,lastSessionDate:e}:s>1&&t.shields>0?{...t,shields:t.shields-1,lastSessionDate:e}:{...t,streak:1,lastSessionDate:e}}function pg(t){return[{id:`quest-${t}-1`,date:t,title:"Complete 2 practice logs",target:2,progress:0,rewardXp:60,completed:!1},{id:`quest-${t}-2`,date:t,title:"Try 2 keys",target:2,progress:0,rewardXp:40,completed:!1},{id:`quest-${t}-3`,date:t,title:"Increase tempo by +4 BPM",target:1,progress:0,rewardXp:50,completed:!1}]}function wE(t,e){let n=0;return{next:t.map(s=>{let i=s;if(s.title.startsWith("Complete 2 practice logs")&&(i={...s,progress:Math.min(s.target,e.logsToday),completed:e.logsToday>=s.target}),s.title.startsWith("Try 2 keys")&&(i={...s,progress:Math.min(s.target,e.uniqueKeysToday),completed:e.uniqueKeysToday>=s.target}),s.title.startsWith("Increase tempo")){const a=e.tempoImproved?1:0;i={...s,progress:a,completed:a>=s.target}}return!s.completed&&i.completed&&(n+=i.rewardXp),i}),bonusXp:n}}function mg(){return[{id:"ach-1",title:"First Log",description:"Log your first practice.",unlockedAt:null},{id:"ach-2",title:"Week Streak",description:"Reach a 7-day streak.",unlockedAt:null},{id:"ach-3",title:"Key Explorer",description:"Practice 5 unique keys.",unlockedAt:null}]}function xE(t){const e=[];return{next:t.achievements.map(r=>{if(r.unlockedAt)return r;let s=!1;if(r.id==="ach-1"&&t.totalLogs>=1&&(s=!0),r.id==="ach-2"&&t.streak>=7&&(s=!0),r.id==="ach-3"&&t.uniqueKeys>=5&&(s=!0),!s)return r;const i={...r,unlockedAt:new Date().toISOString()};return e.push(i),i}),unlocked:e}}function kE(t){const e=t.id==="ach-2";return{id:`reward-${t.id}-${Date.now()}`,title:e?"Rare Coach Badge":"Practice Badge",rarity:e?"rare":"common",createdAt:new Date().toISOString()}}function SE(t){return[{id:`wch-${t}-1`,weekKey:t,title:"Log 5 sessions",target:5,progress:0,rewardXp:120,completed:!1},{id:`wch-${t}-2`,weekKey:t,title:"Cover 5 keys",target:5,progress:0,rewardXp:120,completed:!1}]}function TE(t,e){let n=0;return{next:t.map(s=>{let i=s;return s.title.startsWith("Log 5 sessions")&&(i={...s,progress:Math.min(s.target,e.sessionsThisWeek),completed:e.sessionsThisWeek>=s.target}),s.title.startsWith("Cover 5 keys")&&(i={...s,progress:Math.min(s.target,e.uniqueKeysThisWeek),completed:e.uniqueKeysThisWeek>=s.target}),!s.completed&&i.completed&&(n+=i.rewardXp),i}),bonusXp:n}}function CE(t){return Number(t.replaceAll("-",""))%3!==0?null:{id:`surprise-${t}`,date:t,title:"Surprise XP Drop",rewardXp:30,claimed:!1}}function z_(t,e){return t>=10||e>=30?"Platinum":t>=7||e>=21?"Gold":t>=4||e>=14?"Silver":"Bronze"}function bE({exercise:t,onSave:e,onGenerateVariation:n,onLogPractice:r,stats:s,quests:i,lastReward:a,weekly:l,surprise:c,showNoteNames:h,showSolfa:m,showNumbers:p,showRoman:y,onToggle:x}){const[w,C]=Re.useState(!1),[N,v]=Re.useState(!0),[S,k]=Re.useState(70),[R,E]=Re.useState(1),[P,M]=Re.useState((t==null?void 0:t.tempo)??100),[O,G]=Re.useState(1),[$,X]=Re.useState(!1);Re.useEffect(()=>{t&&M(t.tempo)},[t]),Re.useEffect(()=>{$&&As.setTempo(P*O)},[$,P,O]),Re.useEffect(()=>{$&&As.setMetronomeVolume(S)},[$,S]),Re.useEffect(()=>{const Z=async()=>{await As.unlock(),X(!0)};return window.addEventListener("pointerdown",Z,{once:!0}),()=>window.removeEventListener("pointerdown",Z)},[]);const H=async()=>{t&&($||(await As.unlock(),X(!0)),await As.play(t.notes,{tempo:P*O,timeSig:t.timeSig,subdivision:t.subdivision,countInBars:R,loop:w,metronomeOn:N,metronomeVolume:S,instrument:t.instrument}))},se=()=>As.stop(),fe=s.xp%250/250*100,xe=z_(s.level,s.streak);return T.jsxs("div",{className:"stack",children:[T.jsx("div",{style:Oe.title,children:"Practice"}),T.jsx("div",{style:{color:"#A6ACB3",marginBottom:24},children:"Playback, loop, and store daily work."}),T.jsx(Jt,{children:T.jsxs("div",{className:"stack",children:[T.jsx("div",{style:Oe.sectionTitle,children:"Today"}),T.jsxs("div",{style:{display:"flex",gap:be.sm,alignItems:"center",flexWrap:"wrap"},children:[T.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["Level ",s.level]}),T.jsx(Dv,{tier:xe}),T.jsxs("div",{style:{color:"#5A5F66"},children:["XP: ",s.xp]})]}),T.jsx(gx,{value:fe}),T.jsxs("div",{className:"stack",children:[c&&!c.claimed&&T.jsx(yx,{title:c.title,detail:`Claim on log: +${c.rewardXp} XP`}),i.map(Z=>T.jsxs("div",{style:{border:`1px solid ${we.divider}`,borderRadius:12,padding:12},children:[T.jsx("div",{style:{fontWeight:600},children:Z.title}),T.jsxs("div",{style:{color:"#5A5F66",fontSize:"0.85rem"},children:[Z.progress,"/",Z.target,"  +",Z.rewardXp," XP"]})]},Z.id)),l.map(Z=>T.jsxs("div",{style:{border:`1px solid ${we.divider}`,borderRadius:12,padding:12},children:[T.jsx("div",{style:{fontWeight:600},children:Z.title}),T.jsxs("div",{style:{color:"#5A5F66",fontSize:"0.85rem"},children:[Z.progress,"/",Z.target,"  +",Z.rewardXp," XP"]})]},Z.id)),a&&T.jsxs("div",{style:{border:`1px solid ${we.divider}`,borderRadius:12,padding:12},children:[T.jsx("div",{style:{fontWeight:600},children:"Reward Unlocked"}),T.jsxs("div",{style:{color:"#5A5F66",fontSize:"0.85rem"},children:[a.title,"  ",a.rarity]})]}),T.jsxs("div",{style:{color:"#5A5F66",fontSize:"0.85rem"},children:["Streak shields: ",s.shields]})]})]})}),T.jsx(Jt,{children:T.jsxs("div",{className:"stack",children:[T.jsx("div",{style:Oe.sectionTitle,children:"Exercise Display"}),T.jsx(mx,{options:[{key:"notes",label:"Notes"},{key:"solfa",label:"Solfa"},{key:"numbers",label:"Numbers"},...t!=null&&t.metadata.romanContext?[{key:"roman",label:"Roman"}]:[]],selected:new Set([...h?["notes"]:[],...m?["solfa"]:[],...p?["numbers"]:[],...y?["roman"]:[]]),onToggle:Z=>x(Z)}),T.jsx(px,{exercise:t,showNoteNames:h,showSolfa:m,showNumbers:p,showRoman:y})]})}),T.jsx(Jt,{children:T.jsxs("div",{className:"stack",children:[T.jsx("div",{style:Oe.sectionTitle,children:"Playback Controls"}),!$&&T.jsx(Gr,{onClick:async()=>{await As.unlock(),X(!0)},children:"Tap to enable audio"}),T.jsxs("div",{className:"row",children:[T.jsx(Pv,{onClick:H,disabled:!t,children:"Play"}),T.jsx(Gr,{onClick:se,children:"Stop"})]}),T.jsxs("div",{className:"row",children:[T.jsx(Ze,{label:"Loop",children:T.jsx(Ls,{options:[{key:"off",label:"Off"},{key:"on",label:"On"}],selectedKey:w?"on":"off",variant:"neutral",onSelect:Z=>C(Z==="on")})}),T.jsx(Ze,{label:"Count-in",children:T.jsxs("select",{value:R,onChange:Z=>E(Number(Z.target.value)),style:bt,children:[T.jsx("option",{value:0,children:"0 bars"}),T.jsx("option",{value:1,children:"1 bar"}),T.jsx("option",{value:2,children:"2 bars"})]})})]}),T.jsxs("div",{className:"row",children:[T.jsx(Ze,{label:"Metronome",children:T.jsx(Ls,{options:[{key:"off",label:"Off"},{key:"on",label:"On"}],selectedKey:N?"on":"off",variant:"neutral",onSelect:Z=>v(Z==="on")})}),T.jsx(Qi,{label:"Metronome Volume",value:S,min:0,max:100,onChange:k})]}),!N&&T.jsx("div",{style:{color:"#5A5F66"},children:"Metronome is off."})]})}),T.jsx(Jt,{children:T.jsxs("div",{className:"stack",children:[T.jsx("div",{style:Oe.sectionTitle,children:"Tempo Controls"}),T.jsx(Qi,{label:"BPM",value:P,min:40,max:220,onChange:M}),T.jsxs("div",{style:{display:"flex",gap:be.sm},children:[T.jsx(Gr,{onClick:()=>M(Z=>Math.max(40,Z-1)),children:"-"}),T.jsx(Gr,{onClick:()=>M(Z=>Math.min(220,Z+1)),children:"+"}),T.jsxs("div",{style:{alignSelf:"center",color:we.textOnLight},children:["Current: ",P," BPM"]})]}),T.jsx(Ze,{label:"Slow Practice",children:T.jsxs("select",{value:O,onChange:Z=>G(Number(Z.target.value)),style:bt,children:[T.jsx("option",{value:.5,children:"50%"}),T.jsx("option",{value:.6,children:"60%"}),T.jsx("option",{value:.7,children:"70%"}),T.jsx("option",{value:.8,children:"80%"}),T.jsx("option",{value:.9,children:"90%"}),T.jsx("option",{value:1,children:"100%"})]})}),T.jsx(Ze,{label:"Tempo ladder presets",children:T.jsx(Ls,{options:[{key:"80",label:"80"},{key:"84",label:"84"},{key:"88",label:"88"},{key:"92",label:"92"},{key:"96",label:"96"},{key:"100",label:"100"}],selectedKey:String(P),variant:"neutral",onSelect:Z=>M(Number(Z))})})]})}),T.jsxs("div",{style:{display:"flex",gap:be.sm,flexWrap:"wrap"},children:[T.jsx(Gr,{onClick:n,children:"Generate Variation"}),T.jsx(Gr,{onClick:e,disabled:!t,children:"Save to Library"}),T.jsx(Gr,{onClick:r,disabled:!t,children:"Log Practice"})]})]})}function EE({value:t,size:e=180,stroke:n=14,label:r}){const s=Math.max(0,Math.min(100,t)),i=(e-n)/2,a=2*Math.PI*i,l=a-s/100*a;return T.jsxs("div",{style:{position:"relative",width:e,height:e},children:[T.jsxs("svg",{width:e,height:e,children:[T.jsx("circle",{cx:e/2,cy:e/2,r:i,stroke:we.surfaceSecondary,strokeWidth:n,fill:"none"}),T.jsx("circle",{cx:e/2,cy:e/2,r:i,stroke:we.accent,strokeWidth:n,fill:"none",strokeLinecap:"round",strokeDasharray:a,strokeDashoffset:l,transform:`rotate(-90 ${e/2} ${e/2})`})]}),T.jsxs("div",{style:{position:"absolute",inset:0,display:"grid",placeItems:"center",textAlign:"center",gap:be.xs},children:[r&&T.jsx("div",{style:{...Oe.label,color:"#666"},children:r}),T.jsxs("div",{style:{fontSize:"2rem",fontWeight:700,color:we.textOnLight},children:[s,"%"]})]})]})}function vi({label:t,value:e,accent:n}){return T.jsxs("div",{style:{padding:`${be.sm}px ${be.md}px`,borderRadius:on.cardRadius,border:`1px solid ${we.divider}`,background:we.surfacePrimary},children:[T.jsx("div",{style:Oe.label,children:t}),T.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700,color:n?we.accent:we.textOnLight},children:e})]})}function Il({title:t,value:e,subtitle:n}){return T.jsxs("div",{style:{borderRadius:on.cardRadius,background:we.surfacePrimary,border:`1px solid ${we.divider}`,padding:be.md,display:"grid",gap:be.xs},children:[T.jsx("div",{style:Oe.label,children:t}),T.jsx("div",{style:{fontSize:"1.2rem",fontWeight:700},children:e}),n&&T.jsx("div",{style:{color:"#5A5F66",fontSize:"0.85rem"},children:n})]})}function AE({date:t,tempo:e,notes:n}){return T.jsxs("div",{style:{borderRadius:on.cardRadius,border:`1px solid ${we.divider}`,padding:be.md,display:"grid",gap:be.xs},children:[T.jsx("div",{style:{fontWeight:600},children:t}),T.jsxs("div",{style:{color:"#5A5F66",fontSize:"0.9rem"},children:["Tempo achieved: ",e," BPM"]}),T.jsx("div",{style:{color:"#5A5F66",fontSize:"0.9rem"},children:n})]})}function NE({exercises:t,logs:e,stats:n,quests:r,achievements:s,rewards:i,weekly:a}){const l=n.streak,c=new Set(t.map(v=>v.keyTonic));e.length&&e[e.length-1].date;const h=Math.min(100,Math.round(e.length/7*100)),m=r.filter(v=>v.completed).length,p=z_(n.level,n.streak),y=Sd(),x=e.filter(v=>v.date>=y),w=x.map(v=>v.exerciseId),C=t.filter(v=>w.includes(v.id)),N=new Set(C.map(v=>v.keyTonic)).size;return T.jsxs("div",{className:"stack",children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[T.jsxs("div",{children:[T.jsx("div",{style:Oe.title,children:"Progress"}),T.jsx("div",{style:{color:"#A6ACB3"},children:"Your practice dashboard"})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:be.sm},children:[T.jsx(Dv,{tier:p}),T.jsx("div",{style:{width:36,height:36,borderRadius:"50%",background:we.surfacePrimary,border:`1px solid ${we.divider}`}})]})]}),T.jsx(Jt,{children:T.jsxs("div",{className:"stack",style:{alignItems:"center",textAlign:"center"},children:[T.jsx("div",{style:Oe.label,children:"TODAY"}),T.jsxs("div",{style:{fontSize:"2rem",fontWeight:700,color:we.textOnLight},children:[l," day streak"]}),T.jsx(EE,{value:h,label:"Weekly goal"})]})}),T.jsxs("div",{className:"row",children:[T.jsx(vi,{label:"Tempo Best",value:"128 BPM"}),T.jsx(vi,{label:"Keys This Week",value:`${c.size}`}),T.jsx(vi,{label:"Quests",value:`${m}/${r.length}`,accent:!0})]}),T.jsxs("div",{children:[T.jsx("div",{style:Oe.sectionTitle,children:"My Practice"}),T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:be.sm,marginTop:be.sm},children:[T.jsx(Il,{title:"Key Coverage",value:`${c.size} keys`,subtitle:"This week"}),T.jsx(Il,{title:"Level",value:`Lvl ${n.level}`,subtitle:`${n.xp} XP total`}),T.jsx(Il,{title:"Tempo Ladder",value:"80120",subtitle:"Active range"}),T.jsx(Il,{title:"Consistency",value:`${l} days`,subtitle:`Shields: ${n.shields}`})]})]}),T.jsx(Jt,{children:T.jsxs("div",{className:"stack",children:[T.jsx("div",{style:Oe.sectionTitle,children:"Weekly Summary"}),T.jsxs("div",{style:{display:"flex",gap:be.sm,flexWrap:"wrap"},children:[T.jsx(vi,{label:"Sessions",value:`${x.length}`}),T.jsx(vi,{label:"Keys",value:`${N}`}),T.jsx(vi,{label:"Quests",value:`${a.filter(v=>v.completed).length}/${a.length}`,accent:!0})]})]})}),T.jsx(Jt,{children:T.jsxs("div",{className:"stack",children:[T.jsx("div",{style:Oe.sectionTitle,children:"Weekly Challenges"}),T.jsx("div",{className:"stack",children:a.map(v=>T.jsxs("div",{style:{border:`1px solid ${we.divider}`,borderRadius:12,padding:12},children:[T.jsx("div",{style:{fontWeight:600},children:v.title}),T.jsxs("div",{style:{color:"#5A5F66",fontSize:"0.85rem"},children:[v.progress,"/",v.target,"  +",v.rewardXp," XP"]})]},v.id))})]})}),T.jsx(Jt,{children:T.jsxs("div",{className:"stack",children:[T.jsx("div",{style:Oe.sectionTitle,children:"Achievements"}),T.jsx("div",{style:{display:"grid",gap:be.xs},children:s.map(v=>T.jsxs("div",{style:{border:`1px solid ${we.divider}`,borderRadius:12,padding:12,opacity:v.unlockedAt?1:.5},children:[T.jsx("div",{style:{fontWeight:600},children:v.title}),T.jsx("div",{style:{color:"#5A5F66",fontSize:"0.85rem"},children:v.description})]},v.id))}),i.length>0&&T.jsxs("div",{style:{color:"#5A5F66",fontSize:"0.85rem"},children:["Rewards unlocked: ",i.length]})]})}),T.jsx(Jt,{children:T.jsxs("div",{className:"stack",children:[T.jsx("div",{style:Oe.sectionTitle,children:"Recent Logs"}),T.jsxs("div",{className:"stack",children:[e.slice().reverse().slice(0,6).map(v=>T.jsx(AE,{date:v.date,tempo:v.tempoAchieved,notes:v.notes},v.id)),e.length===0&&T.jsx(Mv,{title:"No practice logs",message:"Save an exercise after practice to see stats here."})]})]})})]})}var U_={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(bp,function(){var n=function(o,u){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&(d[g]=f[g])})(o,u)},r=function(){return(r=Object.assign||function(o){for(var u,d=1,f=arguments.length;d<f;d++)for(var g in u=arguments[d])Object.prototype.hasOwnProperty.call(u,g)&&(o[g]=u[g]);return o}).apply(this,arguments)};function s(o,u,d){for(var f,g=0,_=u.length;g<_;g++)!f&&g in u||((f=f||Array.prototype.slice.call(u,0,g))[g]=u[g]);return o.concat(f||Array.prototype.slice.call(u))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:bp,a=Object.keys,l=Array.isArray;function c(o,u){return typeof u!="object"||a(u).forEach(function(d){o[d]=u[d]}),o}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var h=Object.getPrototypeOf,m={}.hasOwnProperty;function p(o,u){return m.call(o,u)}function y(o,u){typeof u=="function"&&(u=u(h(o))),(typeof Reflect>"u"?a:Reflect.ownKeys)(u).forEach(function(d){w(o,d,u[d])})}var x=Object.defineProperty;function w(o,u,d,f){x(o,u,c(d&&p(d,"get")&&typeof d.get=="function"?{get:d.get,set:d.set,configurable:!0}:{value:d,configurable:!0,writable:!0},f))}function C(o){return{from:function(u){return o.prototype=Object.create(u.prototype),w(o.prototype,"constructor",o),{extend:y.bind(null,o.prototype)}}}}var N=Object.getOwnPropertyDescriptor,v=[].slice;function S(o,u,d){return v.call(o,u,d)}function k(o,u){return u(o)}function R(o){if(!o)throw new Error("Assertion Failed")}function E(o){i.setImmediate?setImmediate(o):setTimeout(o,0)}function P(o,u){if(typeof u=="string"&&p(o,u))return o[u];if(!u)return o;if(typeof u!="string"){for(var d=[],f=0,g=u.length;f<g;++f){var _=P(o,u[f]);d.push(_)}return d}var b=u.indexOf(".");if(b!==-1){var A=o[u.substr(0,b)];return A==null?void 0:P(A,u.substr(b+1))}}function M(o,u,d){if(o&&u!==void 0&&!("isFrozen"in Object&&Object.isFrozen(o)))if(typeof u!="string"&&"length"in u){R(typeof d!="string"&&"length"in d);for(var f=0,g=u.length;f<g;++f)M(o,u[f],d[f])}else{var _,b,A=u.indexOf(".");A!==-1?(_=u.substr(0,A),(b=u.substr(A+1))===""?d===void 0?l(o)&&!isNaN(parseInt(_))?o.splice(_,1):delete o[_]:o[_]=d:M(A=!(A=o[_])||!p(o,_)?o[_]={}:A,b,d)):d===void 0?l(o)&&!isNaN(parseInt(u))?o.splice(u,1):delete o[u]:o[u]=d}}function O(o){var u,d={};for(u in o)p(o,u)&&(d[u]=o[u]);return d}var G=[].concat;function $(o){return G.apply([],o)}var An="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat($([8,16,32,64].map(function(o){return["Int","Uint","Float"].map(function(u){return u+o+"Array"})}))).filter(function(o){return i[o]}),X=new Set(An.map(function(o){return i[o]})),H=null;function se(o){return H=new WeakMap,o=function u(d){if(!d||typeof d!="object")return d;var f=H.get(d);if(f)return f;if(l(d)){f=[],H.set(d,f);for(var g=0,_=d.length;g<_;++g)f.push(u(d[g]))}else if(X.has(d.constructor))f=d;else{var b,A=h(d);for(b in f=A===Object.prototype?{}:Object.create(A),H.set(d,f),d)p(d,b)&&(f[b]=u(d[b]))}return f}(o),H=null,o}var fe={}.toString;function xe(o){return fe.call(o).slice(8,-1)}var Z=typeof Symbol<"u"?Symbol.iterator:"@@iterator",_e=typeof Z=="symbol"?function(o){var u;return o!=null&&(u=o[Z])&&u.apply(o)}:function(){return null};function Q(o,u){return u=o.indexOf(u),0<=u&&o.splice(u,1),0<=u}var J={};function ee(o){var u,d,f,g;if(arguments.length===1){if(l(o))return o.slice();if(this===J&&typeof o=="string")return[o];if(g=_e(o)){for(d=[];!(f=g.next()).done;)d.push(f.value);return d}if(o==null)return[o];if(typeof(u=o.length)!="number")return[o];for(d=new Array(u);u--;)d[u]=o[u];return d}for(u=arguments.length,d=new Array(u);u--;)d[u]=arguments[u];return d}var me=typeof Symbol<"u"?function(o){return o[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Jn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Nn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Jn),Te={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ye(o,u){this.name=o,this.message=u}function Je(o,u){return o+". Errors: "+Object.keys(u).map(function(d){return u[d].toString()}).filter(function(d,f,g){return g.indexOf(d)===f}).join(`
`)}function Ee(o,u,d,f){this.failures=u,this.failedKeys=f,this.successCount=d,this.message=Je(o,u)}function ye(o,u){this.name="BulkError",this.failures=Object.keys(u).map(function(d){return u[d]}),this.failuresByPos=u,this.message=Je(o,this.failures)}C(Ye).from(Error).extend({toString:function(){return this.name+": "+this.message}}),C(Ee).from(Ye),C(ye).from(Ye);var Ae=Nn.reduce(function(o,u){return o[u]=u+"Error",o},{}),le=Ye,de=Nn.reduce(function(o,u){var d=u+"Error";function f(g,_){this.name=d,g?typeof g=="string"?(this.message="".concat(g).concat(_?`
 `+_:""),this.inner=_||null):typeof g=="object"&&(this.message="".concat(g.name," ").concat(g.message),this.inner=g):(this.message=Te[u]||d,this.inner=null)}return C(f).from(le),o[u]=f,o},{});de.Syntax=SyntaxError,de.Type=TypeError,de.Range=RangeError;var En=Jn.reduce(function(o,u){return o[u+"Error"]=de[u],o},{}),Ft=Nn.reduce(function(o,u){return["Syntax","Type","Range"].indexOf(u)===-1&&(o[u+"Error"]=de[u]),o},{});function Fe(){}function fr(o){return o}function fo(o,u){return o==null||o===fr?u:function(d){return u(o(d))}}function ce(o,u){return function(){o.apply(this,arguments),u.apply(this,arguments)}}function Ce(o,u){return o===Fe?u:function(){var d=o.apply(this,arguments);d!==void 0&&(arguments[0]=d);var f=this.onsuccess,g=this.onerror;this.onsuccess=null,this.onerror=null;var _=u.apply(this,arguments);return f&&(this.onsuccess=this.onsuccess?ce(f,this.onsuccess):f),g&&(this.onerror=this.onerror?ce(g,this.onerror):g),_!==void 0?_:d}}function it(o,u){return o===Fe?u:function(){o.apply(this,arguments);var d=this.onsuccess,f=this.onerror;this.onsuccess=this.onerror=null,u.apply(this,arguments),d&&(this.onsuccess=this.onsuccess?ce(d,this.onsuccess):d),f&&(this.onerror=this.onerror?ce(f,this.onerror):f)}}function He(o,u){return o===Fe?u:function(d){var f=o.apply(this,arguments);c(d,f);var g=this.onsuccess,_=this.onerror;return this.onsuccess=null,this.onerror=null,d=u.apply(this,arguments),g&&(this.onsuccess=this.onsuccess?ce(g,this.onsuccess):g),_&&(this.onerror=this.onerror?ce(_,this.onerror):_),f===void 0?d===void 0?void 0:d:c(f,d)}}function Se(o,u){return o===Fe?u:function(){return u.apply(this,arguments)!==!1&&o.apply(this,arguments)}}function Xe(o,u){return o===Fe?u:function(){var d=o.apply(this,arguments);if(d&&typeof d.then=="function"){for(var f=this,g=arguments.length,_=new Array(g);g--;)_[g]=arguments[g];return d.then(function(){return u.apply(f,_)})}return u.apply(this,arguments)}}Ft.ModifyError=Ee,Ft.DexieError=Ye,Ft.BulkError=ye;var et=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function yn(o){et=o}var vn={},Rr=100,An=typeof Promise>"u"?[]:function(){var o=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[o,h(o),o];var u=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[u,h(u),o]}(),Jn=An[0],Nn=An[1],An=An[2],Nn=Nn&&Nn.then,pr=Jn&&Jn.constructor,ai=!!An,jr=function(o,u){po.push([o,u]),_s&&(queueMicrotask(K_),_s=!1)},qe=!0,_s=!0,ws=[],La=[],dc=fr,Fr={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Fe,pgp:!1,env:{},finalize:Fe},ke=Fr,po=[],xs=0,Va=[];function pe(o){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var u=this._PSD=ke;if(typeof o!="function"){if(o!==vn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&pc(this,this._value))}this._state=null,this._value=null,++u.ref,function d(f,g){try{g(function(_){if(f._state===null){if(_===f)throw new TypeError("A promise cannot be resolved with itself.");var b=f._lib&&li();_&&typeof _.then=="function"?d(f,function(A,D){_ instanceof pe?_._then(A,D):_.then(A,D)}):(f._state=!0,f._value=_,Hf(f)),b&&ui()}},pc.bind(null,f))}catch(_){pc(f,_)}}(this,o)}var fc={get:function(){var o=ke,u=Ua;function d(f,g){var _=this,b=!o.global&&(o!==ke||u!==Ua),A=b&&!Vr(),D=new pe(function(j,B){mc(_,new Gf(Qf(f,o,b,A),Qf(g,o,b,A),j,B,o))});return this._consoleTask&&(D._consoleTask=this._consoleTask),D}return d.prototype=vn,d},set:function(o){w(this,"then",o&&o.prototype===vn?fc:{get:function(){return o},set:fc.set})}};function Gf(o,u,d,f,g){this.onFulfilled=typeof o=="function"?o:null,this.onRejected=typeof u=="function"?u:null,this.resolve=d,this.reject=f,this.psd=g}function pc(o,u){var d,f;La.push(u),o._state===null&&(d=o._lib&&li(),u=dc(u),o._state=!1,o._value=u,f=o,ws.some(function(g){return g._value===f._value})||ws.push(f),Hf(o),d&&ui())}function Hf(o){var u=o._listeners;o._listeners=[];for(var d=0,f=u.length;d<f;++d)mc(o,u[d]);var g=o._PSD;--g.ref||g.finalize(),xs===0&&(++xs,jr(function(){--xs==0&&gc()},[]))}function mc(o,u){if(o._state!==null){var d=o._state?u.onFulfilled:u.onRejected;if(d===null)return(o._state?u.resolve:u.reject)(o._value);++u.psd.ref,++xs,jr($_,[d,o,u])}else o._listeners.push(u)}function $_(o,u,d){try{var f,g=u._value;!u._state&&La.length&&(La=[]),f=et&&u._consoleTask?u._consoleTask.run(function(){return o(g)}):o(g),u._state||La.indexOf(g)!==-1||function(_){for(var b=ws.length;b;)if(ws[--b]._value===_._value)return ws.splice(b,1)}(u),d.resolve(f)}catch(_){d.reject(_)}finally{--xs==0&&gc(),--d.psd.ref||d.psd.finalize()}}function K_(){ks(Fr,function(){li()&&ui()})}function li(){var o=qe;return _s=qe=!1,o}function ui(){var o,u,d;do for(;0<po.length;)for(o=po,po=[],d=o.length,u=0;u<d;++u){var f=o[u];f[0].apply(null,f[1])}while(0<po.length);_s=qe=!0}function gc(){var o=ws;ws=[],o.forEach(function(f){f._PSD.onunhandled.call(null,f._value,f)});for(var u=Va.slice(0),d=u.length;d;)u[--d]()}function Ba(o){return new pe(vn,!1,o)}function ut(o,u){var d=ke;return function(){var f=li(),g=ke;try{return Br(d,!0),o.apply(this,arguments)}catch(_){u&&u(_)}finally{Br(g,!1),f&&ui()}}}y(pe.prototype,{then:fc,_then:function(o,u){mc(this,new Gf(null,null,o,u,ke))},catch:function(o){if(arguments.length===1)return this.then(null,o);var u=o,d=arguments[1];return typeof u=="function"?this.then(null,function(f){return(f instanceof u?d:Ba)(f)}):this.then(null,function(f){return(f&&f.name===u?d:Ba)(f)})},finally:function(o){return this.then(function(u){return pe.resolve(o()).then(function(){return u})},function(u){return pe.resolve(o()).then(function(){return Ba(u)})})},timeout:function(o,u){var d=this;return o<1/0?new pe(function(f,g){var _=setTimeout(function(){return g(new de.Timeout(u))},o);d.then(f,g).finally(clearTimeout.bind(null,_))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&w(pe.prototype,Symbol.toStringTag,"Dexie.Promise"),Fr.env=Xf(),y(pe,{all:function(){var o=ee.apply(null,arguments).map(qa);return new pe(function(u,d){o.length===0&&u([]);var f=o.length;o.forEach(function(g,_){return pe.resolve(g).then(function(b){o[_]=b,--f||u(o)},d)})})},resolve:function(o){return o instanceof pe?o:o&&typeof o.then=="function"?new pe(function(u,d){o.then(u,d)}):new pe(vn,!0,o)},reject:Ba,race:function(){var o=ee.apply(null,arguments).map(qa);return new pe(function(u,d){o.map(function(f){return pe.resolve(f).then(u,d)})})},PSD:{get:function(){return ke},set:function(o){return ke=o}},totalEchoes:{get:function(){return Ua}},newPSD:Lr,usePSD:ks,scheduler:{get:function(){return jr},set:function(o){jr=o}},rejectionMapper:{get:function(){return dc},set:function(o){dc=o}},follow:function(o,u){return new pe(function(d,f){return Lr(function(g,_){var b=ke;b.unhandleds=[],b.onunhandled=_,b.finalize=ce(function(){var A,D=this;A=function(){D.unhandleds.length===0?g():_(D.unhandleds[0])},Va.push(function j(){A(),Va.splice(Va.indexOf(j),1)}),++xs,jr(function(){--xs==0&&gc()},[])},b.finalize),o()},u,d,f)})}}),pr&&(pr.allSettled&&w(pe,"allSettled",function(){var o=ee.apply(null,arguments).map(qa);return new pe(function(u){o.length===0&&u([]);var d=o.length,f=new Array(d);o.forEach(function(g,_){return pe.resolve(g).then(function(b){return f[_]={status:"fulfilled",value:b}},function(b){return f[_]={status:"rejected",reason:b}}).then(function(){return--d||u(f)})})})}),pr.any&&typeof AggregateError<"u"&&w(pe,"any",function(){var o=ee.apply(null,arguments).map(qa);return new pe(function(u,d){o.length===0&&d(new AggregateError([]));var f=o.length,g=new Array(f);o.forEach(function(_,b){return pe.resolve(_).then(function(A){return u(A)},function(A){g[b]=A,--f||d(new AggregateError(g))})})})}),pr.withResolvers&&(pe.withResolvers=pr.withResolvers));var Pt={awaits:0,echoes:0,id:0},G_=0,Wa=[],za=0,Ua=0,H_=0;function Lr(o,u,d,f){var g=ke,_=Object.create(g);return _.parent=g,_.ref=0,_.global=!1,_.id=++H_,Fr.env,_.env=ai?{Promise:pe,PromiseProp:{value:pe,configurable:!0,writable:!0},all:pe.all,race:pe.race,allSettled:pe.allSettled,any:pe.any,resolve:pe.resolve,reject:pe.reject}:{},u&&c(_,u),++g.ref,_.finalize=function(){--this.parent.ref||this.parent.finalize()},f=ks(_,o,d,f),_.ref===0&&_.finalize(),f}function ci(){return Pt.id||(Pt.id=++G_),++Pt.awaits,Pt.echoes+=Rr,Pt.id}function Vr(){return!!Pt.awaits&&(--Pt.awaits==0&&(Pt.id=0),Pt.echoes=Pt.awaits*Rr,!0)}function qa(o){return Pt.echoes&&o&&o.constructor===pr?(ci(),o.then(function(u){return Vr(),u},function(u){return Vr(),_t(u)})):o}function X_(){var o=Wa[Wa.length-1];Wa.pop(),Br(o,!1)}function Br(o,u){var d,f=ke;(u?!Pt.echoes||za++&&o===ke:!za||--za&&o===ke)||queueMicrotask(u?(function(g){++Ua,Pt.echoes&&--Pt.echoes!=0||(Pt.echoes=Pt.awaits=Pt.id=0),Wa.push(ke),Br(g,!0)}).bind(null,o):X_),o!==ke&&(ke=o,f===Fr&&(Fr.env=Xf()),ai&&(d=Fr.env.Promise,u=o.env,(f.global||o.global)&&(Object.defineProperty(i,"Promise",u.PromiseProp),d.all=u.all,d.race=u.race,d.resolve=u.resolve,d.reject=u.reject,u.allSettled&&(d.allSettled=u.allSettled),u.any&&(d.any=u.any))))}function Xf(){var o=i.Promise;return ai?{Promise:o,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:o.all,race:o.race,allSettled:o.allSettled,any:o.any,resolve:o.resolve,reject:o.reject}:{}}function ks(o,u,d,f,g){var _=ke;try{return Br(o,!0),u(d,f,g)}finally{Br(_,!1)}}function Qf(o,u,d,f){return typeof o!="function"?o:function(){var g=ke;d&&ci(),Br(u,!0);try{return o.apply(this,arguments)}finally{Br(g,!1),f&&queueMicrotask(Vr)}}}function yc(o){Promise===pr&&Pt.echoes===0?za===0?o():enqueueNativeMicroTask(o):setTimeout(o,0)}(""+Nn).indexOf("[native code]")===-1&&(ci=Vr=Fe);var _t=pe.reject,Ss="",mr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Yf="String expected.",hi=[],$a="__dbnames",vc="readonly",_c="readwrite";function Ts(o,u){return o?u?function(){return o.apply(this,arguments)&&u.apply(this,arguments)}:o:u}var Zf={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ka(o){return typeof o!="string"||/\./.test(o)?function(u){return u}:function(u){return u[o]===void 0&&o in u&&delete(u=se(u))[o],u}}function Jf(){throw de.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Be(o,u){try{var d=ep(o),f=ep(u);if(d!==f)return d==="Array"?1:f==="Array"?-1:d==="binary"?1:f==="binary"?-1:d==="string"?1:f==="string"?-1:d==="Date"?1:f!=="Date"?NaN:-1;switch(d){case"number":case"Date":case"string":return u<o?1:o<u?-1:0;case"binary":return function(g,_){for(var b=g.length,A=_.length,D=b<A?b:A,j=0;j<D;++j)if(g[j]!==_[j])return g[j]<_[j]?-1:1;return b===A?0:b<A?-1:1}(tp(o),tp(u));case"Array":return function(g,_){for(var b=g.length,A=_.length,D=b<A?b:A,j=0;j<D;++j){var B=Be(g[j],_[j]);if(B!==0)return B}return b===A?0:b<A?-1:1}(o,u)}}catch{}return NaN}function ep(o){var u=typeof o;return u!="object"?u:ArrayBuffer.isView(o)?"binary":(o=xe(o),o==="ArrayBuffer"?"binary":o)}function tp(o){return o instanceof Uint8Array?o:ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):new Uint8Array(o)}function Ga(o,u,d){var f=o.schema.yProps;return f?(u&&0<d.numFailures&&(u=u.filter(function(g,_){return!d.failures[_]})),Promise.all(f.map(function(g){return g=g.updatesTable,u?o.db.table(g).where("k").anyOf(u).delete():o.db.table(g).clear()})).then(function(){return d})):d}var mo=(np.prototype.execute=function(o){var u=this["@@propmod"];if(u.add!==void 0){var d=u.add;if(l(d))return s(s([],l(o)?o:[],!0),d).sort();if(typeof d=="number")return(Number(o)||0)+d;if(typeof d=="bigint")try{return BigInt(o)+d}catch{return BigInt(0)+d}throw new TypeError("Invalid term ".concat(d))}if(u.remove!==void 0){var f=u.remove;if(l(f))return l(o)?o.filter(function(g){return!f.includes(g)}).sort():[];if(typeof f=="number")return Number(o)-f;if(typeof f=="bigint")try{return BigInt(o)-f}catch{return BigInt(0)-f}throw new TypeError("Invalid subtrahend ".concat(f))}return d=(d=u.replacePrefix)===null||d===void 0?void 0:d[0],d&&typeof o=="string"&&o.startsWith(d)?u.replacePrefix[1]+o.substring(d.length):o},np);function np(o){this["@@propmod"]=o}function rp(o,u){for(var d=a(u),f=d.length,g=!1,_=0;_<f;++_){var b=d[_],A=u[b],D=P(o,b);A instanceof mo?(M(o,b,A.execute(D)),g=!0):D!==A&&(M(o,b,A),g=!0)}return g}var sp=(tt.prototype._trans=function(o,u,d){var f=this._tx||ke.trans,g=this.name,_=et&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(o==="readonly"?"read":"write"," ").concat(this.name));function b(j,B,I){if(!I.schema[g])throw new de.NotFound("Table "+g+" not part of transaction");return u(I.idbtrans,I)}var A=li();try{var D=f&&f.db._novip===this.db._novip?f===ke.trans?f._promise(o,b,d):Lr(function(){return f._promise(o,b,d)},{trans:f,transless:ke.transless||ke}):function j(B,I,z,F){if(B.idbdb&&(B._state.openComplete||ke.letThrough||B._vip)){var L=B._createTransaction(I,z,B._dbSchema);try{L.create(),B._state.PR1398_maxLoop=3}catch(V){return V.name===Ae.InvalidState&&B.isOpen()&&0<--B._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),B.close({disableAutoOpen:!1}),B.open().then(function(){return j(B,I,z,F)})):_t(V)}return L._promise(I,function(V,W){return Lr(function(){return ke.trans=L,F(V,W,L)})}).then(function(V){if(I==="readwrite")try{L.idbtrans.commit()}catch{}return I==="readonly"?V:L._completion.then(function(){return V})})}if(B._state.openComplete)return _t(new de.DatabaseClosed(B._state.dbOpenError));if(!B._state.isBeingOpened){if(!B._state.autoOpen)return _t(new de.DatabaseClosed);B.open().catch(Fe)}return B._state.dbReadyPromise.then(function(){return j(B,I,z,F)})}(this.db,o,[this.name],b);return _&&(D._consoleTask=_,D=D.catch(function(j){return console.trace(j),_t(j)})),D}finally{A&&ui()}},tt.prototype.get=function(o,u){var d=this;return o&&o.constructor===Object?this.where(o).first(u):o==null?_t(new de.Type("Invalid argument to Table.get()")):this._trans("readonly",function(f){return d.core.get({trans:f,key:o}).then(function(g){return d.hook.reading.fire(g)})}).then(u)},tt.prototype.where=function(o){if(typeof o=="string")return new this.db.WhereClause(this,o);if(l(o))return new this.db.WhereClause(this,"[".concat(o.join("+"),"]"));var u=a(o);if(u.length===1)return this.where(u[0]).equals(o[u[0]]);var d=this.schema.indexes.concat(this.schema.primKey).filter(function(A){if(A.compound&&u.every(function(j){return 0<=A.keyPath.indexOf(j)})){for(var D=0;D<u.length;++D)if(u.indexOf(A.keyPath[D])===-1)return!1;return!0}return!1}).sort(function(A,D){return A.keyPath.length-D.keyPath.length})[0];if(d&&this.db._maxKey!==Ss){var _=d.keyPath.slice(0,u.length);return this.where(_).equals(_.map(function(D){return o[D]}))}!d&&et&&console.warn("The query ".concat(JSON.stringify(o)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(u.join("+"),"]"));var f=this.schema.idxByName;function g(A,D){return Be(A,D)===0}var b=u.reduce(function(I,D){var j=I[0],B=I[1],I=f[D],z=o[D];return[j||I,j||!I?Ts(B,I&&I.multi?function(F){return F=P(F,D),l(F)&&F.some(function(L){return g(z,L)})}:function(F){return g(z,P(F,D))}):B]},[null,null]),_=b[0],b=b[1];return _?this.where(_.name).equals(o[_.keyPath]).filter(b):d?this.filter(b):this.where(u).equals("")},tt.prototype.filter=function(o){return this.toCollection().and(o)},tt.prototype.count=function(o){return this.toCollection().count(o)},tt.prototype.offset=function(o){return this.toCollection().offset(o)},tt.prototype.limit=function(o){return this.toCollection().limit(o)},tt.prototype.each=function(o){return this.toCollection().each(o)},tt.prototype.toArray=function(o){return this.toCollection().toArray(o)},tt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},tt.prototype.orderBy=function(o){return new this.db.Collection(new this.db.WhereClause(this,l(o)?"[".concat(o.join("+"),"]"):o))},tt.prototype.reverse=function(){return this.toCollection().reverse()},tt.prototype.mapToClass=function(o){var u,d=this.db,f=this.name;function g(){return u!==null&&u.apply(this,arguments)||this}(this.schema.mappedClass=o).prototype instanceof Jf&&(function(D,j){if(typeof j!="function"&&j!==null)throw new TypeError("Class extends value "+String(j)+" is not a constructor or null");function B(){this.constructor=D}n(D,j),D.prototype=j===null?Object.create(j):(B.prototype=j.prototype,new B)}(g,u=o),Object.defineProperty(g.prototype,"db",{get:function(){return d},enumerable:!1,configurable:!0}),g.prototype.table=function(){return f},o=g);for(var _=new Set,b=o.prototype;b;b=h(b))Object.getOwnPropertyNames(b).forEach(function(D){return _.add(D)});function A(D){if(!D)return D;var j,B=Object.create(o.prototype);for(j in D)if(!_.has(j))try{B[j]=D[j]}catch{}return B}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=A,this.hook("reading",A),o},tt.prototype.defineClass=function(){return this.mapToClass(function(o){c(this,o)})},tt.prototype.add=function(o,u){var d=this,f=this.schema.primKey,g=f.auto,_=f.keyPath,b=o;return _&&g&&(b=Ka(_)(o)),this._trans("readwrite",function(A){return d.core.mutate({trans:A,type:"add",keys:u!=null?[u]:null,values:[b]})}).then(function(A){return A.numFailures?pe.reject(A.failures[0]):A.lastResult}).then(function(A){if(_)try{M(o,_,A)}catch{}return A})},tt.prototype.upsert=function(o,u){var d=this,f=this.schema.primKey.keyPath;return this._trans("readwrite",function(g){return d.core.get({trans:g,key:o}).then(function(_){var b=_??{};return rp(b,u),f&&M(b,f,o),d.core.mutate({trans:g,type:"put",values:[b],keys:[o],upsert:!0,updates:{keys:[o],changeSpecs:[u]}}).then(function(A){return A.numFailures?pe.reject(A.failures[0]):!!_})})})},tt.prototype.update=function(o,u){return typeof o!="object"||l(o)?this.where(":id").equals(o).modify(u):(o=P(o,this.schema.primKey.keyPath),o===void 0?_t(new de.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(o).modify(u))},tt.prototype.put=function(o,u){var d=this,f=this.schema.primKey,g=f.auto,_=f.keyPath,b=o;return _&&g&&(b=Ka(_)(o)),this._trans("readwrite",function(A){return d.core.mutate({trans:A,type:"put",values:[b],keys:u!=null?[u]:null})}).then(function(A){return A.numFailures?pe.reject(A.failures[0]):A.lastResult}).then(function(A){if(_)try{M(o,_,A)}catch{}return A})},tt.prototype.delete=function(o){var u=this;return this._trans("readwrite",function(d){return u.core.mutate({trans:d,type:"delete",keys:[o]}).then(function(f){return Ga(u,[o],f)}).then(function(f){return f.numFailures?pe.reject(f.failures[0]):void 0})})},tt.prototype.clear=function(){var o=this;return this._trans("readwrite",function(u){return o.core.mutate({trans:u,type:"deleteRange",range:Zf}).then(function(d){return Ga(o,null,d)})}).then(function(u){return u.numFailures?pe.reject(u.failures[0]):void 0})},tt.prototype.bulkGet=function(o){var u=this;return this._trans("readonly",function(d){return u.core.getMany({keys:o,trans:d}).then(function(f){return f.map(function(g){return u.hook.reading.fire(g)})})})},tt.prototype.bulkAdd=function(o,u,d){var f=this,g=Array.isArray(u)?u:void 0,_=(d=d||(g?void 0:u))?d.allKeys:void 0;return this._trans("readwrite",function(b){var j=f.schema.primKey,A=j.auto,j=j.keyPath;if(j&&g)throw new de.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(g&&g.length!==o.length)throw new de.InvalidArgument("Arguments objects and keys must have the same length");var D=o.length,j=j&&A?o.map(Ka(j)):o;return f.core.mutate({trans:b,type:"add",keys:g,values:j,wantResults:_}).then(function(L){var I=L.numFailures,z=L.results,F=L.lastResult,L=L.failures;if(I===0)return _?z:F;throw new ye("".concat(f.name,".bulkAdd(): ").concat(I," of ").concat(D," operations failed"),L)})})},tt.prototype.bulkPut=function(o,u,d){var f=this,g=Array.isArray(u)?u:void 0,_=(d=d||(g?void 0:u))?d.allKeys:void 0;return this._trans("readwrite",function(b){var j=f.schema.primKey,A=j.auto,j=j.keyPath;if(j&&g)throw new de.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(g&&g.length!==o.length)throw new de.InvalidArgument("Arguments objects and keys must have the same length");var D=o.length,j=j&&A?o.map(Ka(j)):o;return f.core.mutate({trans:b,type:"put",keys:g,values:j,wantResults:_}).then(function(L){var I=L.numFailures,z=L.results,F=L.lastResult,L=L.failures;if(I===0)return _?z:F;throw new ye("".concat(f.name,".bulkPut(): ").concat(I," of ").concat(D," operations failed"),L)})})},tt.prototype.bulkUpdate=function(o){var u=this,d=this.core,f=o.map(function(b){return b.key}),g=o.map(function(b){return b.changes}),_=[];return this._trans("readwrite",function(b){return d.getMany({trans:b,keys:f,cache:"clone"}).then(function(A){var D=[],j=[];o.forEach(function(I,z){var F=I.key,L=I.changes,V=A[z];if(V){for(var W=0,U=Object.keys(L);W<U.length;W++){var q=U[W],K=L[q];if(q===u.schema.primKey.keyPath){if(Be(K,F)!==0)throw new de.Constraint("Cannot update primary key in bulkUpdate()")}else M(V,q,K)}_.push(z),D.push(F),j.push(V)}});var B=D.length;return d.mutate({trans:b,type:"put",keys:D,values:j,updates:{keys:f,changeSpecs:g}}).then(function(I){var z=I.numFailures,F=I.failures;if(z===0)return B;for(var L=0,V=Object.keys(F);L<V.length;L++){var W,U=V[L],q=_[Number(U)];q!=null&&(W=F[U],delete F[U],F[q]=W)}throw new ye("".concat(u.name,".bulkUpdate(): ").concat(z," of ").concat(B," operations failed"),F)})})})},tt.prototype.bulkDelete=function(o){var u=this,d=o.length;return this._trans("readwrite",function(f){return u.core.mutate({trans:f,type:"delete",keys:o}).then(function(g){return Ga(u,o,g)})}).then(function(b){var g=b.numFailures,_=b.lastResult,b=b.failures;if(g===0)return _;throw new ye("".concat(u.name,".bulkDelete(): ").concat(g," of ").concat(d," operations failed"),b)})},tt);function tt(){}function go(o){function u(b,A){if(A){for(var D=arguments.length,j=new Array(D-1);--D;)j[D-1]=arguments[D];return d[b].subscribe.apply(null,j),o}if(typeof b=="string")return d[b]}var d={};u.addEventType=_;for(var f=1,g=arguments.length;f<g;++f)_(arguments[f]);return u;function _(b,A,D){if(typeof b!="object"){var j;A=A||Se;var B={subscribers:[],fire:D=D||Fe,subscribe:function(I){B.subscribers.indexOf(I)===-1&&(B.subscribers.push(I),B.fire=A(B.fire,I))},unsubscribe:function(I){B.subscribers=B.subscribers.filter(function(z){return z!==I}),B.fire=B.subscribers.reduce(A,D)}};return d[b]=u[b]=B}a(j=b).forEach(function(I){var z=j[I];if(l(z))_(I,j[I][0],j[I][1]);else{if(z!=="asap")throw new de.InvalidArgument("Invalid event config");var F=_(I,fr,function(){for(var L=arguments.length,V=new Array(L);L--;)V[L]=arguments[L];F.subscribers.forEach(function(W){E(function(){W.apply(null,V)})})})}})}}function yo(o,u){return C(u).from({prototype:o}),u}function di(o,u){return!(o.filter||o.algorithm||o.or)&&(u?o.justLimit:!o.replayFilter)}function wc(o,u){o.filter=Ts(o.filter,u)}function xc(o,u,d){var f=o.replayFilter;o.replayFilter=f?function(){return Ts(f(),u())}:u,o.justLimit=d&&!f}function Ha(o,u){if(o.isPrimKey)return u.primaryKey;var d=u.getIndexByKeyPath(o.index);if(!d)throw new de.Schema("KeyPath "+o.index+" on object store "+u.name+" is not indexed");return d}function ip(o,u,d){var f=Ha(o,u.schema);return u.openCursor({trans:d,values:!o.keysOnly,reverse:o.dir==="prev",unique:!!o.unique,query:{index:f,range:o.range}})}function Xa(o,u,d,f){var g=o.replayFilter?Ts(o.filter,o.replayFilter()):o.filter;if(o.or){var _={},b=function(A,D,j){var B,I;g&&!g(D,j,function(z){return D.stop(z)},function(z){return D.fail(z)})||((I=""+(B=D.primaryKey))=="[object ArrayBuffer]"&&(I=""+new Uint8Array(B)),p(_,I)||(_[I]=!0,u(A,D,j)))};return Promise.all([o.or._iterate(b,d),op(ip(o,f,d),o.algorithm,b,!o.keysOnly&&o.valueMapper)])}return op(ip(o,f,d),Ts(o.algorithm,g),u,!o.keysOnly&&o.valueMapper)}function op(o,u,d,f){var g=ut(f?function(_,b,A){return d(f(_),b,A)}:d);return o.then(function(_){if(_)return _.start(function(){var b=function(){return _.continue()};u&&!u(_,function(A){return b=A},function(A){_.stop(A),b=Fe},function(A){_.fail(A),b=Fe})||g(_.value,_,function(A){return b=A}),b()})})}var Q_=(ze.prototype._read=function(o,u){var d=this._ctx;return d.error?d.table._trans(null,_t.bind(null,d.error)):d.table._trans("readonly",o).then(u)},ze.prototype._write=function(o){var u=this._ctx;return u.error?u.table._trans(null,_t.bind(null,u.error)):u.table._trans("readwrite",o,"locked")},ze.prototype._addAlgorithm=function(o){var u=this._ctx;u.algorithm=Ts(u.algorithm,o)},ze.prototype._iterate=function(o,u){return Xa(this._ctx,o,u,this._ctx.table.core)},ze.prototype.clone=function(o){var u=Object.create(this.constructor.prototype),d=Object.create(this._ctx);return o&&c(d,o),u._ctx=d,u},ze.prototype.raw=function(){return this._ctx.valueMapper=null,this},ze.prototype.each=function(o){var u=this._ctx;return this._read(function(d){return Xa(u,o,d,u.table.core)})},ze.prototype.count=function(o){var u=this;return this._read(function(d){var f=u._ctx,g=f.table.core;if(di(f,!0))return g.count({trans:d,query:{index:Ha(f,g.schema),range:f.range}}).then(function(b){return Math.min(b,f.limit)});var _=0;return Xa(f,function(){return++_,!1},d,g).then(function(){return _})}).then(o)},ze.prototype.sortBy=function(o,u){var d=o.split(".").reverse(),f=d[0],g=d.length-1;function _(D,j){return j?_(D[d[j]],j-1):D[f]}var b=this._ctx.dir==="next"?1:-1;function A(D,j){return Be(_(D,g),_(j,g))*b}return this.toArray(function(D){return D.sort(A)}).then(u)},ze.prototype.toArray=function(o){var u=this;return this._read(function(d){var f=u._ctx;if(f.dir==="next"&&di(f,!0)&&0<f.limit){var g=f.valueMapper,_=Ha(f,f.table.core.schema);return f.table.core.query({trans:d,limit:f.limit,values:!0,query:{index:_,range:f.range}}).then(function(A){return A=A.result,g?A.map(g):A})}var b=[];return Xa(f,function(A){return b.push(A)},d,f.table.core).then(function(){return b})},o)},ze.prototype.offset=function(o){var u=this._ctx;return o<=0||(u.offset+=o,di(u)?xc(u,function(){var d=o;return function(f,g){return d===0||(d===1?--d:g(function(){f.advance(d),d=0}),!1)}}):xc(u,function(){var d=o;return function(){return--d<0}})),this},ze.prototype.limit=function(o){return this._ctx.limit=Math.min(this._ctx.limit,o),xc(this._ctx,function(){var u=o;return function(d,f,g){return--u<=0&&f(g),0<=u}},!0),this},ze.prototype.until=function(o,u){return wc(this._ctx,function(d,f,g){return!o(d.value)||(f(g),u)}),this},ze.prototype.first=function(o){return this.limit(1).toArray(function(u){return u[0]}).then(o)},ze.prototype.last=function(o){return this.reverse().first(o)},ze.prototype.filter=function(o){var u;return wc(this._ctx,function(d){return o(d.value)}),(u=this._ctx).isMatch=Ts(u.isMatch,o),this},ze.prototype.and=function(o){return this.filter(o)},ze.prototype.or=function(o){return new this.db.WhereClause(this._ctx.table,o,this)},ze.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ze.prototype.desc=function(){return this.reverse()},ze.prototype.eachKey=function(o){var u=this._ctx;return u.keysOnly=!u.isMatch,this.each(function(d,f){o(f.key,f)})},ze.prototype.eachUniqueKey=function(o){return this._ctx.unique="unique",this.eachKey(o)},ze.prototype.eachPrimaryKey=function(o){var u=this._ctx;return u.keysOnly=!u.isMatch,this.each(function(d,f){o(f.primaryKey,f)})},ze.prototype.keys=function(o){var u=this._ctx;u.keysOnly=!u.isMatch;var d=[];return this.each(function(f,g){d.push(g.key)}).then(function(){return d}).then(o)},ze.prototype.primaryKeys=function(o){var u=this._ctx;if(u.dir==="next"&&di(u,!0)&&0<u.limit)return this._read(function(f){var g=Ha(u,u.table.core.schema);return u.table.core.query({trans:f,values:!1,limit:u.limit,query:{index:g,range:u.range}})}).then(function(f){return f.result}).then(o);u.keysOnly=!u.isMatch;var d=[];return this.each(function(f,g){d.push(g.primaryKey)}).then(function(){return d}).then(o)},ze.prototype.uniqueKeys=function(o){return this._ctx.unique="unique",this.keys(o)},ze.prototype.firstKey=function(o){return this.limit(1).keys(function(u){return u[0]}).then(o)},ze.prototype.lastKey=function(o){return this.reverse().firstKey(o)},ze.prototype.distinct=function(){var o=this._ctx,o=o.index&&o.table.schema.idxByName[o.index];if(!o||!o.multi)return this;var u={};return wc(this._ctx,function(g){var f=g.primaryKey.toString(),g=p(u,f);return u[f]=!0,!g}),this},ze.prototype.modify=function(o){var u=this,d=this._ctx;return this._write(function(f){var g=typeof o=="function"?o:function(V){return rp(V,o)},_=d.table.core,j=_.schema.primaryKey,b=j.outbound,A=j.extractKey,D=200,j=u.db._options.modifyChunkSize;j&&(D=typeof j=="object"?j[_.name]||j["*"]||200:j);function B(V,q){var U=q.failures,q=q.numFailures;z+=V-q;for(var K=0,Y=a(U);K<Y.length;K++){var re=Y[K];I.push(U[re])}}var I=[],z=0,F=[],L=o===ap;return u.clone().primaryKeys().then(function(V){function W(q){var K=Math.min(D,V.length-q),Y=V.slice(q,q+K);return(L?Promise.resolve([]):_.getMany({trans:f,keys:Y,cache:"immutable"})).then(function(re){var ue=[],ne=[],ie=b?[]:null,he=L?Y:[];if(!L)for(var ae=0;ae<K;++ae){var ge=re[ae],Pe={value:se(ge),primKey:V[q+ae]};g.call(Pe,Pe.value,Pe)!==!1&&(Pe.value==null?he.push(V[q+ae]):b||Be(A(ge),A(Pe.value))===0?(ne.push(Pe.value),b&&ie.push(V[q+ae])):(he.push(V[q+ae]),ue.push(Pe.value)))}return Promise.resolve(0<ue.length&&_.mutate({trans:f,type:"add",values:ue}).then(function(De){for(var je in De.failures)he.splice(parseInt(je),1);B(ue.length,De)})).then(function(){return(0<ne.length||U&&typeof o=="object")&&_.mutate({trans:f,type:"put",keys:ie,values:ne,criteria:U,changeSpec:typeof o!="function"&&o,isAdditionalChunk:0<q}).then(function(De){return B(ne.length,De)})}).then(function(){return(0<he.length||U&&L)&&_.mutate({trans:f,type:"delete",keys:he,criteria:U,isAdditionalChunk:0<q}).then(function(De){return Ga(d.table,he,De)}).then(function(De){return B(he.length,De)})}).then(function(){return V.length>q+K&&W(q+D)})})}var U=di(d)&&d.limit===1/0&&(typeof o!="function"||L)&&{index:d.index,range:d.range};return W(0).then(function(){if(0<I.length)throw new Ee("Error modifying one or more objects",I,z,F);return V.length})})})},ze.prototype.delete=function(){var o=this._ctx,u=o.range;return!di(o)||o.table.schema.yProps||!o.isPrimKey&&u.type!==3?this.modify(ap):this._write(function(d){var f=o.table.core.schema.primaryKey,g=u;return o.table.core.count({trans:d,query:{index:f,range:g}}).then(function(_){return o.table.core.mutate({trans:d,type:"deleteRange",range:g}).then(function(D){var A=D.failures,D=D.numFailures;if(D)throw new Ee("Could not delete some values",Object.keys(A).map(function(j){return A[j]}),_-D);return _-D})})})},ze);function ze(){}var ap=function(o,u){return u.value=null};function Y_(o,u){return o<u?-1:o===u?0:1}function Z_(o,u){return u<o?-1:o===u?0:1}function _n(o,u,d){return o=o instanceof up?new o.Collection(o):o,o._ctx.error=new(d||TypeError)(u),o}function fi(o){return new o.Collection(o,function(){return lp("")}).limit(0)}function Qa(o,u,d,f){var g,_,b,A,D,j,B,I=d.length;if(!d.every(function(L){return typeof L=="string"}))return _n(o,Yf);function z(L){g=L==="next"?function(W){return W.toUpperCase()}:function(W){return W.toLowerCase()},_=L==="next"?function(W){return W.toLowerCase()}:function(W){return W.toUpperCase()},b=L==="next"?Y_:Z_;var V=d.map(function(W){return{lower:_(W),upper:g(W)}}).sort(function(W,U){return b(W.lower,U.lower)});A=V.map(function(W){return W.upper}),D=V.map(function(W){return W.lower}),B=(j=L)==="next"?"":f}z("next"),o=new o.Collection(o,function(){return Wr(A[0],D[I-1]+f)}),o._ondirectionchange=function(L){z(L)};var F=0;return o._addAlgorithm(function(L,V,W){var U=L.key;if(typeof U!="string")return!1;var q=_(U);if(u(q,D,F))return!0;for(var K=null,Y=F;Y<I;++Y){var re=function(ue,ne,ie,he,ae,ge){for(var Pe=Math.min(ue.length,he.length),De=-1,je=0;je<Pe;++je){var wn=ne[je];if(wn!==he[je])return ae(ue[je],ie[je])<0?ue.substr(0,je)+ie[je]+ie.substr(je+1):ae(ue[je],he[je])<0?ue.substr(0,je)+he[je]+ie.substr(je+1):0<=De?ue.substr(0,De)+ne[De]+ie.substr(De+1):null;ae(ue[je],wn)<0&&(De=je)}return Pe<he.length&&ge==="next"?ue+ie.substr(ue.length):Pe<ue.length&&ge==="prev"?ue.substr(0,ie.length):De<0?null:ue.substr(0,De)+he[De]+ie.substr(De+1)}(U,q,A[Y],D[Y],b,j);re===null&&K===null?F=Y+1:(K===null||0<b(K,re))&&(K=re)}return V(K!==null?function(){L.continue(K+B)}:W),!1}),o}function Wr(o,u,d,f){return{type:2,lower:o,upper:u,lowerOpen:d,upperOpen:f}}function lp(o){return{type:1,lower:o,upper:o}}var up=(Object.defineProperty(Mt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Mt.prototype.between=function(o,u,d,f){d=d!==!1,f=f===!0;try{return 0<this._cmp(o,u)||this._cmp(o,u)===0&&(d||f)&&(!d||!f)?fi(this):new this.Collection(this,function(){return Wr(o,u,!d,!f)})}catch{return _n(this,mr)}},Mt.prototype.equals=function(o){return o==null?_n(this,mr):new this.Collection(this,function(){return lp(o)})},Mt.prototype.above=function(o){return o==null?_n(this,mr):new this.Collection(this,function(){return Wr(o,void 0,!0)})},Mt.prototype.aboveOrEqual=function(o){return o==null?_n(this,mr):new this.Collection(this,function(){return Wr(o,void 0,!1)})},Mt.prototype.below=function(o){return o==null?_n(this,mr):new this.Collection(this,function(){return Wr(void 0,o,!1,!0)})},Mt.prototype.belowOrEqual=function(o){return o==null?_n(this,mr):new this.Collection(this,function(){return Wr(void 0,o)})},Mt.prototype.startsWith=function(o){return typeof o!="string"?_n(this,Yf):this.between(o,o+Ss,!0,!0)},Mt.prototype.startsWithIgnoreCase=function(o){return o===""?this.startsWith(o):Qa(this,function(u,d){return u.indexOf(d[0])===0},[o],Ss)},Mt.prototype.equalsIgnoreCase=function(o){return Qa(this,function(u,d){return u===d[0]},[o],"")},Mt.prototype.anyOfIgnoreCase=function(){var o=ee.apply(J,arguments);return o.length===0?fi(this):Qa(this,function(u,d){return d.indexOf(u)!==-1},o,"")},Mt.prototype.startsWithAnyOfIgnoreCase=function(){var o=ee.apply(J,arguments);return o.length===0?fi(this):Qa(this,function(u,d){return d.some(function(f){return u.indexOf(f)===0})},o,Ss)},Mt.prototype.anyOf=function(){var o=this,u=ee.apply(J,arguments),d=this._cmp;try{u.sort(d)}catch{return _n(this,mr)}if(u.length===0)return fi(this);var f=new this.Collection(this,function(){return Wr(u[0],u[u.length-1])});f._ondirectionchange=function(_){d=_==="next"?o._ascending:o._descending,u.sort(d)};var g=0;return f._addAlgorithm(function(_,b,A){for(var D=_.key;0<d(D,u[g]);)if(++g===u.length)return b(A),!1;return d(D,u[g])===0||(b(function(){_.continue(u[g])}),!1)}),f},Mt.prototype.notEqual=function(o){return this.inAnyRange([[-1/0,o],[o,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Mt.prototype.noneOf=function(){var o=ee.apply(J,arguments);if(o.length===0)return new this.Collection(this);try{o.sort(this._ascending)}catch{return _n(this,mr)}var u=o.reduce(function(d,f){return d?d.concat([[d[d.length-1][1],f]]):[[-1/0,f]]},null);return u.push([o[o.length-1],this.db._maxKey]),this.inAnyRange(u,{includeLowers:!1,includeUppers:!1})},Mt.prototype.inAnyRange=function(U,u){var d=this,f=this._cmp,g=this._ascending,_=this._descending,b=this._min,A=this._max;if(U.length===0)return fi(this);if(!U.every(function(q){return q[0]!==void 0&&q[1]!==void 0&&g(q[0],q[1])<=0}))return _n(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",de.InvalidArgument);var D=!u||u.includeLowers!==!1,j=u&&u.includeUppers===!0,B,I=g;function z(q,K){return I(q[0],K[0])}try{(B=U.reduce(function(q,K){for(var Y=0,re=q.length;Y<re;++Y){var ue=q[Y];if(f(K[0],ue[1])<0&&0<f(K[1],ue[0])){ue[0]=b(ue[0],K[0]),ue[1]=A(ue[1],K[1]);break}}return Y===re&&q.push(K),q},[])).sort(z)}catch{return _n(this,mr)}var F=0,L=j?function(q){return 0<g(q,B[F][1])}:function(q){return 0<=g(q,B[F][1])},V=D?function(q){return 0<_(q,B[F][0])}:function(q){return 0<=_(q,B[F][0])},W=L,U=new this.Collection(this,function(){return Wr(B[0][0],B[B.length-1][1],!D,!j)});return U._ondirectionchange=function(q){I=q==="next"?(W=L,g):(W=V,_),B.sort(z)},U._addAlgorithm(function(q,K,Y){for(var re,ue=q.key;W(ue);)if(++F===B.length)return K(Y),!1;return!L(re=ue)&&!V(re)||(d._cmp(ue,B[F][1])===0||d._cmp(ue,B[F][0])===0||K(function(){I===g?q.continue(B[F][0]):q.continue(B[F][1])}),!1)}),U},Mt.prototype.startsWithAnyOf=function(){var o=ee.apply(J,arguments);return o.every(function(u){return typeof u=="string"})?o.length===0?fi(this):this.inAnyRange(o.map(function(u){return[u,u+Ss]})):_n(this,"startsWithAnyOf() only works with strings")},Mt);function Mt(){}function er(o){return ut(function(u){return vo(u),o(u.target.error),!1})}function vo(o){o.stopPropagation&&o.stopPropagation(),o.preventDefault&&o.preventDefault()}var _o="storagemutated",kc="x-storagemutated-1",zr=go(null,_o),J_=(tr.prototype._lock=function(){return R(!ke.global),++this._reculock,this._reculock!==1||ke.global||(ke.lockOwnerFor=this),this},tr.prototype._unlock=function(){if(R(!ke.global),--this._reculock==0)for(ke.global||(ke.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var o=this._blockedFuncs.shift();try{ks(o[1],o[0])}catch{}}return this},tr.prototype._locked=function(){return this._reculock&&ke.lockOwnerFor!==this},tr.prototype.create=function(o){var u=this;if(!this.mode)return this;var d=this.db.idbdb,f=this.db._state.dbOpenError;if(R(!this.idbtrans),!o&&!d)switch(f&&f.name){case"DatabaseClosedError":throw new de.DatabaseClosed(f);case"MissingAPIError":throw new de.MissingAPI(f.message,f);default:throw new de.OpenFailed(f)}if(!this.active)throw new de.TransactionInactive;return R(this._completion._state===null),(o=this.idbtrans=o||(this.db.core||d).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ut(function(g){vo(g),u._reject(o.error)}),o.onabort=ut(function(g){vo(g),u.active&&u._reject(new de.Abort(o.error)),u.active=!1,u.on("abort").fire(g)}),o.oncomplete=ut(function(){u.active=!1,u._resolve(),"mutatedParts"in o&&zr.storagemutated.fire(o.mutatedParts)}),this},tr.prototype._promise=function(o,u,d){var f=this;if(o==="readwrite"&&this.mode!=="readwrite")return _t(new de.ReadOnly("Transaction is readonly"));if(!this.active)return _t(new de.TransactionInactive);if(this._locked())return new pe(function(_,b){f._blockedFuncs.push([function(){f._promise(o,u,d).then(_,b)},ke])});if(d)return Lr(function(){var _=new pe(function(b,A){f._lock();var D=u(b,A,f);D&&D.then&&D.then(b,A)});return _.finally(function(){return f._unlock()}),_._lib=!0,_});var g=new pe(function(_,b){var A=u(_,b,f);A&&A.then&&A.then(_,b)});return g._lib=!0,g},tr.prototype._root=function(){return this.parent?this.parent._root():this},tr.prototype.waitFor=function(o){var u,d=this._root(),f=pe.resolve(o);d._waitingFor?d._waitingFor=d._waitingFor.then(function(){return f}):(d._waitingFor=f,d._waitingQueue=[],u=d.idbtrans.objectStore(d.storeNames[0]),function _(){for(++d._spinCount;d._waitingQueue.length;)d._waitingQueue.shift()();d._waitingFor&&(u.get(-1/0).onsuccess=_)}());var g=d._waitingFor;return new pe(function(_,b){f.then(function(A){return d._waitingQueue.push(ut(_.bind(null,A)))},function(A){return d._waitingQueue.push(ut(b.bind(null,A)))}).finally(function(){d._waitingFor===g&&(d._waitingFor=null)})})},tr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new de.Abort))},tr.prototype.table=function(o){var u=this._memoizedTables||(this._memoizedTables={});if(p(u,o))return u[o];var d=this.schema[o];if(!d)throw new de.NotFound("Table "+o+" not part of transaction");return d=new this.db.Table(o,d,this),d.core=this.db.core.table(o),u[o]=d},tr);function tr(){}function Sc(o,u,d,f,g,_,b,A){return{name:o,keyPath:u,unique:d,multi:f,auto:g,compound:_,src:(d&&!b?"&":"")+(f?"*":"")+(g?"++":"")+cp(u),type:A}}function cp(o){return typeof o=="string"?o:o?"["+[].join.call(o,"+")+"]":""}function Tc(o,u,d){return{name:o,primKey:u,indexes:d,mappedClass:null,idxByName:(f=function(g){return[g.name,g]},d.reduce(function(g,_,b){return b=f(_,b),b&&(g[b[0]]=b[1]),g},{}))};var f}var wo=function(o){try{return o.only([[]]),wo=function(){return[[]]},[[]]}catch{return wo=function(){return Ss},Ss}};function Cc(o){return o==null?function(){}:typeof o=="string"?(u=o).split(".").length===1?function(d){return d[u]}:function(d){return P(d,u)}:function(d){return P(d,o)};var u}function hp(o){return[].slice.call(o)}var e0=0;function xo(o){return o==null?":id":typeof o=="string"?o:"[".concat(o.join("+"),"]")}function t0(o,u,D){function f(W){if(W.type===3)return null;if(W.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var F=W.lower,L=W.upper,V=W.lowerOpen,W=W.upperOpen;return F===void 0?L===void 0?null:u.upperBound(L,!!W):L===void 0?u.lowerBound(F,!!V):u.bound(F,L,!!V,!!W)}function g(z){var F,L=z.name;return{name:L,schema:z,mutate:function(V){var W=V.trans,U=V.type,q=V.keys,K=V.values,Y=V.range;return new Promise(function(re,ue){re=ut(re);var ne=W.objectStore(L),ie=ne.keyPath==null,he=U==="put"||U==="add";if(!he&&U!=="delete"&&U!=="deleteRange")throw new Error("Invalid operation type: "+U);var ae,ge=(q||K||{length:1}).length;if(q&&K&&q.length!==K.length)throw new Error("Given keys array must have same length as given values array.");if(ge===0)return re({numFailures:0,failures:{},results:[],lastResult:void 0});function Pe(Qt){++wn,vo(Qt)}var De=[],je=[],wn=0;if(U==="deleteRange"){if(Y.type===4)return re({numFailures:wn,failures:je,results:[],lastResult:void 0});Y.type===3?De.push(ae=ne.clear()):De.push(ae=ne.delete(f(Y)))}else{var ie=he?ie?[K,q]:[K,null]:[q,null],Ne=ie[0],Ut=ie[1];if(he)for(var qt=0;qt<ge;++qt)De.push(ae=Ut&&Ut[qt]!==void 0?ne[U](Ne[qt],Ut[qt]):ne[U](Ne[qt])),ae.onerror=Pe;else for(qt=0;qt<ge;++qt)De.push(ae=ne[U](Ne[qt])),ae.onerror=Pe}function ll(Qt){Qt=Qt.target.result,De.forEach(function(Es,Uc){return Es.error!=null&&(je[Uc]=Es.error)}),re({numFailures:wn,failures:je,results:U==="delete"?q:De.map(function(Es){return Es.result}),lastResult:Qt})}ae.onerror=function(Qt){Pe(Qt),ll(Qt)},ae.onsuccess=ll})},getMany:function(V){var W=V.trans,U=V.keys;return new Promise(function(q,K){q=ut(q);for(var Y,re=W.objectStore(L),ue=U.length,ne=new Array(ue),ie=0,he=0,ae=function(De){De=De.target,ne[De._pos]=De.result,++he===ie&&q(ne)},ge=er(K),Pe=0;Pe<ue;++Pe)U[Pe]!=null&&((Y=re.get(U[Pe]))._pos=Pe,Y.onsuccess=ae,Y.onerror=ge,++ie);ie===0&&q(ne)})},get:function(V){var W=V.trans,U=V.key;return new Promise(function(q,K){q=ut(q);var Y=W.objectStore(L).get(U);Y.onsuccess=function(re){return q(re.target.result)},Y.onerror=er(K)})},query:(F=j,function(V){return new Promise(function(W,U){W=ut(W);var q,K,Y,ie=V.trans,re=V.values,ue=V.limit,ae=V.query,ne=ue===1/0?void 0:ue,he=ae.index,ae=ae.range,ie=ie.objectStore(L),he=he.isPrimaryKey?ie:ie.index(he.name),ae=f(ae);if(ue===0)return W({result:[]});F?((ne=re?he.getAll(ae,ne):he.getAllKeys(ae,ne)).onsuccess=function(ge){return W({result:ge.target.result})},ne.onerror=er(U)):(q=0,K=!re&&"openKeyCursor"in he?he.openKeyCursor(ae):he.openCursor(ae),Y=[],K.onsuccess=function(ge){var Pe=K.result;return Pe?(Y.push(re?Pe.value:Pe.primaryKey),++q===ue?W({result:Y}):void Pe.continue()):W({result:Y})},K.onerror=er(U))})}),openCursor:function(V){var W=V.trans,U=V.values,q=V.query,K=V.reverse,Y=V.unique;return new Promise(function(re,ue){re=ut(re);var he=q.index,ne=q.range,ie=W.objectStore(L),ie=he.isPrimaryKey?ie:ie.index(he.name),he=K?Y?"prevunique":"prev":Y?"nextunique":"next",ae=!U&&"openKeyCursor"in ie?ie.openKeyCursor(f(ne),he):ie.openCursor(f(ne),he);ae.onerror=er(ue),ae.onsuccess=ut(function(ge){var Pe,De,je,wn,Ne=ae.result;Ne?(Ne.___id=++e0,Ne.done=!1,Pe=Ne.continue.bind(Ne),De=(De=Ne.continuePrimaryKey)&&De.bind(Ne),je=Ne.advance.bind(Ne),wn=function(){throw new Error("Cursor not stopped")},Ne.trans=W,Ne.stop=Ne.continue=Ne.continuePrimaryKey=Ne.advance=function(){throw new Error("Cursor not started")},Ne.fail=ut(ue),Ne.next=function(){var Ut=this,qt=1;return this.start(function(){return qt--?Ut.continue():Ut.stop()}).then(function(){return Ut})},Ne.start=function(Ut){function qt(){if(ae.result)try{Ut()}catch(Qt){Ne.fail(Qt)}else Ne.done=!0,Ne.start=function(){throw new Error("Cursor behind last entry")},Ne.stop()}var ll=new Promise(function(Qt,Es){Qt=ut(Qt),ae.onerror=er(Es),Ne.fail=Es,Ne.stop=function(Uc){Ne.stop=Ne.continue=Ne.continuePrimaryKey=Ne.advance=wn,Qt(Uc)}});return ae.onsuccess=ut(function(Qt){ae.onsuccess=qt,qt()}),Ne.continue=Pe,Ne.continuePrimaryKey=De,Ne.advance=je,qt(),ll},re(Ne)):re(null)},ue)})},count:function(V){var W=V.query,U=V.trans,q=W.index,K=W.range;return new Promise(function(Y,re){var ue=U.objectStore(L),ne=q.isPrimaryKey?ue:ue.index(q.name),ue=f(K),ne=ue?ne.count(ue):ne.count();ne.onsuccess=ut(function(ie){return Y(ie.target.result)}),ne.onerror=er(re)})}}}var _,b,A,B=(b=D,A=hp((_=o).objectStoreNames),{schema:{name:_.name,tables:A.map(function(z){return b.objectStore(z)}).map(function(z){var F=z.keyPath,W=z.autoIncrement,L=l(F),V={},W={name:z.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:F==null,compound:L,keyPath:F,autoIncrement:W,unique:!0,extractKey:Cc(F)},indexes:hp(z.indexNames).map(function(U){return z.index(U)}).map(function(Y){var q=Y.name,K=Y.unique,re=Y.multiEntry,Y=Y.keyPath,re={name:q,compound:l(Y),keyPath:Y,unique:K,multiEntry:re,extractKey:Cc(Y)};return V[xo(Y)]=re}),getIndexByKeyPath:function(U){return V[xo(U)]}};return V[":id"]=W.primaryKey,F!=null&&(V[xo(F)]=W.primaryKey),W})},hasGetAll:0<A.length&&"getAll"in b.objectStore(A[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),D=B.schema,j=B.hasGetAll,B=D.tables.map(g),I={};return B.forEach(function(z){return I[z.name]=z}),{stack:"dbcore",transaction:o.transaction.bind(o),table:function(z){if(!I[z])throw new Error("Table '".concat(z,"' not found"));return I[z]},MIN_KEY:-1/0,MAX_KEY:wo(u),schema:D}}function n0(o,u,d,f){var g=d.IDBKeyRange;return d.indexedDB,{dbcore:(f=t0(u,g,f),o.dbcore.reduce(function(_,b){return b=b.create,r(r({},_),b(_))},f))}}function Ya(o,f){var d=f.db,f=n0(o._middlewares,d,o._deps,f);o.core=f.dbcore,o.tables.forEach(function(g){var _=g.name;o.core.schema.tables.some(function(b){return b.name===_})&&(g.core=o.core.table(_),o[_]instanceof o.Table&&(o[_].core=g.core))})}function Za(o,u,d,f){d.forEach(function(g){var _=f[g];u.forEach(function(b){var A=function D(j,B){return N(j,B)||(j=h(j))&&D(j,B)}(b,g);(!A||"value"in A&&A.value===void 0)&&(b===o.Transaction.prototype||b instanceof o.Transaction?w(b,g,{get:function(){return this.table(g)},set:function(D){x(this,g,{value:D,writable:!0,configurable:!0,enumerable:!0})}}):b[g]=new o.Table(g,_))})})}function bc(o,u){u.forEach(function(d){for(var f in d)d[f]instanceof o.Table&&delete d[f]})}function r0(o,u){return o._cfg.version-u._cfg.version}function s0(o,u,d,f){var g=o._dbSchema;d.objectStoreNames.contains("$meta")&&!g.$meta&&(g.$meta=Tc("$meta",fp("")[0],[]),o._storeNames.push("$meta"));var _=o._createTransaction("readwrite",o._storeNames,g);_.create(d),_._completion.catch(f);var b=_._reject.bind(_),A=ke.transless||ke;Lr(function(){return ke.trans=_,ke.transless=A,u!==0?(Ya(o,d),j=u,((D=_).storeNames.includes("$meta")?D.table("$meta").get("version").then(function(B){return B??j}):pe.resolve(j)).then(function(B){return z=B,F=_,L=d,V=[],B=(I=o)._versions,W=I._dbSchema=el(0,I.idbdb,L),(B=B.filter(function(U){return U._cfg.version>=z})).length!==0?(B.forEach(function(U){V.push(function(){var q=W,K=U._cfg.dbschema;tl(I,q,L),tl(I,K,L),W=I._dbSchema=K;var Y=Ec(q,K);Y.add.forEach(function(he){Ac(L,he[0],he[1].primKey,he[1].indexes)}),Y.change.forEach(function(he){if(he.recreate)throw new de.Upgrade("Not yet support for changing primary key");var ae=L.objectStore(he.name);he.add.forEach(function(ge){return Ja(ae,ge)}),he.change.forEach(function(ge){ae.deleteIndex(ge.name),Ja(ae,ge)}),he.del.forEach(function(ge){return ae.deleteIndex(ge)})});var re=U._cfg.contentUpgrade;if(re&&U._cfg.version>z){Ya(I,L),F._memoizedTables={};var ue=O(K);Y.del.forEach(function(he){ue[he]=q[he]}),bc(I,[I.Transaction.prototype]),Za(I,[I.Transaction.prototype],a(ue),ue),F.schema=ue;var ne,ie=me(re);return ie&&ci(),Y=pe.follow(function(){var he;(ne=re(F))&&ie&&(he=Vr.bind(null,null),ne.then(he,he))}),ne&&typeof ne.then=="function"?pe.resolve(ne):Y.then(function(){return ne})}}),V.push(function(q){var K,Y,re=U._cfg.dbschema;K=re,Y=q,[].slice.call(Y.db.objectStoreNames).forEach(function(ue){return K[ue]==null&&Y.db.deleteObjectStore(ue)}),bc(I,[I.Transaction.prototype]),Za(I,[I.Transaction.prototype],I._storeNames,I._dbSchema),F.schema=I._dbSchema}),V.push(function(q){I.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(I.idbdb.version/10)===U._cfg.version?(I.idbdb.deleteObjectStore("$meta"),delete I._dbSchema.$meta,I._storeNames=I._storeNames.filter(function(K){return K!=="$meta"})):q.objectStore("$meta").put(U._cfg.version,"version"))})}),function U(){return V.length?pe.resolve(V.shift()(F.idbtrans)).then(U):pe.resolve()}().then(function(){dp(W,L)})):pe.resolve();var I,z,F,L,V,W}).catch(b)):(a(g).forEach(function(B){Ac(d,B,g[B].primKey,g[B].indexes)}),Ya(o,d),void pe.follow(function(){return o.on.populate.fire(_)}).catch(b));var D,j})}function i0(o,u){dp(o._dbSchema,u),u.db.version%10!=0||u.objectStoreNames.contains("$meta")||u.db.createObjectStore("$meta").add(Math.ceil(u.db.version/10-1),"version");var d=el(0,o.idbdb,u);tl(o,o._dbSchema,u);for(var f=0,g=Ec(d,o._dbSchema).change;f<g.length;f++){var _=function(b){if(b.change.length||b.recreate)return console.warn("Unable to patch indexes of table ".concat(b.name," because it has changes on the type of index or primary key.")),{value:void 0};var A=u.objectStore(b.name);b.add.forEach(function(D){et&&console.debug("Dexie upgrade patch: Creating missing index ".concat(b.name,".").concat(D.src)),Ja(A,D)})}(g[f]);if(typeof _=="object")return _.value}}function Ec(o,u){var d,f={del:[],add:[],change:[]};for(d in o)u[d]||f.del.push(d);for(d in u){var g=o[d],_=u[d];if(g){var b={name:d,def:_,recreate:!1,del:[],add:[],change:[]};if(""+(g.primKey.keyPath||"")!=""+(_.primKey.keyPath||"")||g.primKey.auto!==_.primKey.auto)b.recreate=!0,f.change.push(b);else{var A=g.idxByName,D=_.idxByName,j=void 0;for(j in A)D[j]||b.del.push(j);for(j in D){var B=A[j],I=D[j];B?B.src!==I.src&&b.change.push(I):b.add.push(I)}(0<b.del.length||0<b.add.length||0<b.change.length)&&f.change.push(b)}}else f.add.push([d,_])}return f}function Ac(o,u,d,f){var g=o.db.createObjectStore(u,d.keyPath?{keyPath:d.keyPath,autoIncrement:d.auto}:{autoIncrement:d.auto});return f.forEach(function(_){return Ja(g,_)}),g}function dp(o,u){a(o).forEach(function(d){u.db.objectStoreNames.contains(d)||(et&&console.debug("Dexie: Creating missing table",d),Ac(u,d,o[d].primKey,o[d].indexes))})}function Ja(o,u){o.createIndex(u.name,u.keyPath,{unique:u.unique,multiEntry:u.multi})}function el(o,u,d){var f={};return S(u.objectStoreNames,0).forEach(function(g){for(var _=d.objectStore(g),b=Sc(cp(j=_.keyPath),j||"",!0,!1,!!_.autoIncrement,j&&typeof j!="string",!0),A=[],D=0;D<_.indexNames.length;++D){var B=_.index(_.indexNames[D]),j=B.keyPath,B=Sc(B.name,j,!!B.unique,!!B.multiEntry,!1,j&&typeof j!="string",!1);A.push(B)}f[g]=Tc(g,b,A)}),f}function tl(o,u,d){for(var f=d.db.objectStoreNames,g=0;g<f.length;++g){var _=f[g],b=d.objectStore(_);o._hasGetAll="getAll"in b;for(var A=0;A<b.indexNames.length;++A){var D=b.indexNames[A],j=b.index(D).keyPath,B=typeof j=="string"?j:"["+S(j).join("+")+"]";!u[_]||(j=u[_].idxByName[B])&&(j.name=D,delete u[_].idxByName[B],u[_].idxByName[D]=j)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(o._hasGetAll=!1)}function fp(o){return o.split(",").map(function(u,d){var _=u.split(":"),f=(g=_[1])===null||g===void 0?void 0:g.trim(),g=(u=_[0].trim()).replace(/([&*]|\+\+)/g,""),_=/^\[/.test(g)?g.match(/^\[(.*)\]$/)[1].split("+"):g;return Sc(g,_||null,/\&/.test(u),/\*/.test(u),/\+\+/.test(u),l(_),d===0,f)})}var o0=(pi.prototype._createTableSchema=Tc,pi.prototype._parseIndexSyntax=fp,pi.prototype._parseStoresSpec=function(o,u){var d=this;a(o).forEach(function(f){if(o[f]!==null){var g=d._parseIndexSyntax(o[f]),_=g.shift();if(!_)throw new de.Schema("Invalid schema for table "+f+": "+o[f]);if(_.unique=!0,_.multi)throw new de.Schema("Primary key cannot be multiEntry*");g.forEach(function(b){if(b.auto)throw new de.Schema("Only primary key can be marked as autoIncrement (++)");if(!b.keyPath)throw new de.Schema("Index must have a name and cannot be an empty string")}),g=d._createTableSchema(f,_,g),u[f]=g}})},pi.prototype.stores=function(d){var u=this.db;this._cfg.storesSource=this._cfg.storesSource?c(this._cfg.storesSource,d):d;var d=u._versions,f={},g={};return d.forEach(function(_){c(f,_._cfg.storesSource),g=_._cfg.dbschema={},_._parseStoresSpec(f,g)}),u._dbSchema=g,bc(u,[u._allTables,u,u.Transaction.prototype]),Za(u,[u._allTables,u,u.Transaction.prototype,this._cfg.tables],a(g),g),u._storeNames=a(g),this},pi.prototype.upgrade=function(o){return this._cfg.contentUpgrade=Xe(this._cfg.contentUpgrade||Fe,o),this},pi);function pi(){}function Nc(o,u){var d=o._dbNamesDB;return d||(d=o._dbNamesDB=new gr($a,{addons:[],indexedDB:o,IDBKeyRange:u})).version(1).stores({dbnames:"name"}),d.table("dbnames")}function Oc(o){return o&&typeof o.databases=="function"}function Ic(o){return Lr(function(){return ke.letThrough=!0,o()})}function Pc(o){return!("from"in o)}var zt=function(o,u){if(!this){var d=new zt;return o&&"d"in o&&c(d,o),d}c(this,arguments.length?{d:1,from:o,to:1<arguments.length?u:o}:{d:0})};function ko(o,u,d){var f=Be(u,d);if(!isNaN(f)){if(0<f)throw RangeError();if(Pc(o))return c(o,{from:u,to:d,d:1});var g=o.l,f=o.r;if(Be(d,o.from)<0)return g?ko(g,u,d):o.l={from:u,to:d,d:1,l:null,r:null},mp(o);if(0<Be(u,o.to))return f?ko(f,u,d):o.r={from:u,to:d,d:1,l:null,r:null},mp(o);Be(u,o.from)<0&&(o.from=u,o.l=null,o.d=f?f.d+1:1),0<Be(d,o.to)&&(o.to=d,o.r=null,o.d=o.l?o.l.d+1:1),d=!o.r,g&&!o.l&&So(o,g),f&&d&&So(o,f)}}function So(o,u){Pc(u)||function d(f,D){var _=D.from,b=D.to,A=D.l,D=D.r;ko(f,_,b),A&&d(f,A),D&&d(f,D)}(o,u)}function pp(o,u){var d=nl(u),f=d.next();if(f.done)return!1;for(var g=f.value,_=nl(o),b=_.next(g.from),A=b.value;!f.done&&!b.done;){if(Be(A.from,g.to)<=0&&0<=Be(A.to,g.from))return!0;Be(g.from,A.from)<0?g=(f=d.next(A.from)).value:A=(b=_.next(g.from)).value}return!1}function nl(o){var u=Pc(o)?null:{s:0,n:o};return{next:function(d){for(var f=0<arguments.length;u;)switch(u.s){case 0:if(u.s=1,f)for(;u.n.l&&Be(d,u.n.from)<0;)u={up:u,n:u.n.l,s:1};else for(;u.n.l;)u={up:u,n:u.n.l,s:1};case 1:if(u.s=2,!f||Be(d,u.n.to)<=0)return{value:u.n,done:!1};case 2:if(u.n.r){u.s=3,u={up:u,n:u.n.r,s:0};continue}case 3:u=u.up}return{done:!0}}}}function mp(o){var u,d,f=(((u=o.r)===null||u===void 0?void 0:u.d)||0)-(((d=o.l)===null||d===void 0?void 0:d.d)||0),g=1<f?"r":f<-1?"l":"";g&&(u=g=="r"?"l":"r",d=r({},o),f=o[g],o.from=f.from,o.to=f.to,o[g]=f[g],d[g]=f[u],(o[u]=d).d=gp(d)),o.d=gp(o)}function gp(d){var u=d.r,d=d.l;return(u?d?Math.max(u.d,d.d):u.d:d?d.d:0)+1}function rl(o,u){return a(u).forEach(function(d){o[d]?So(o[d],u[d]):o[d]=function f(g){var _,b,A={};for(_ in g)p(g,_)&&(b=g[_],A[_]=!b||typeof b!="object"||X.has(b.constructor)?b:f(b));return A}(u[d])}),o}function Mc(o,u){return o.all||u.all||Object.keys(o).some(function(d){return u[d]&&pp(u[d],o[d])})}y(zt.prototype,((Nn={add:function(o){return So(this,o),this},addKey:function(o){return ko(this,o,o),this},addKeys:function(o){var u=this;return o.forEach(function(d){return ko(u,d,d)}),this},hasKey:function(o){var u=nl(this).next(o).value;return u&&Be(u.from,o)<=0&&0<=Be(u.to,o)}})[Z]=function(){return nl(this)},Nn));var Cs={},Dc={},Rc=!1;function sl(o){rl(Dc,o),Rc||(Rc=!0,setTimeout(function(){Rc=!1,jc(Dc,!(Dc={}))},0))}function jc(o,u){u===void 0&&(u=!1);var d=new Set;if(o.all)for(var f=0,g=Object.values(Cs);f<g.length;f++)yp(b=g[f],o,d,u);else for(var _ in o){var b,A=/^idb\:\/\/(.*)\/(.*)\//.exec(_);A&&(_=A[1],A=A[2],(b=Cs["idb://".concat(_,"/").concat(A)])&&yp(b,o,d,u))}d.forEach(function(D){return D()})}function yp(o,u,d,f){for(var g=[],_=0,b=Object.entries(o.queries.query);_<b.length;_++){for(var A=b[_],D=A[0],j=[],B=0,I=A[1];B<I.length;B++){var z=I[B];Mc(u,z.obsSet)?z.subscribers.forEach(function(W){return d.add(W)}):f&&j.push(z)}f&&g.push([D,j])}if(f)for(var F=0,L=g;F<L.length;F++){var V=L[F],D=V[0],j=V[1];o.queries.query[D]=j}}function a0(o){var u=o._state,d=o._deps.indexedDB;if(u.isBeingOpened||o.idbdb)return u.dbReadyPromise.then(function(){return u.dbOpenError?_t(u.dbOpenError):o});u.isBeingOpened=!0,u.dbOpenError=null,u.openComplete=!1;var f=u.openCanceller,g=Math.round(10*o.verno),_=!1;function b(){if(u.openCanceller!==f)throw new de.DatabaseClosed("db.open() was cancelled")}function A(){return new pe(function(z,F){if(b(),!d)throw new de.MissingAPI;var L=o.name,V=u.autoSchema||!g?d.open(L):d.open(L,g);if(!V)throw new de.MissingAPI;V.onerror=er(F),V.onblocked=ut(o._fireOnBlocked),V.onupgradeneeded=ut(function(W){var U;B=V.transaction,u.autoSchema&&!o._options.allowEmptyDB?(V.onerror=vo,B.abort(),V.result.close(),(U=d.deleteDatabase(L)).onsuccess=U.onerror=ut(function(){F(new de.NoSuchDatabase("Database ".concat(L," doesnt exist")))})):(B.onerror=er(F),W=W.oldVersion>Math.pow(2,62)?0:W.oldVersion,I=W<1,o.idbdb=V.result,_&&i0(o,B),s0(o,W/10,B,F))},F),V.onsuccess=ut(function(){B=null;var W,U,q,K,Y,re=o.idbdb=V.result,ue=S(re.objectStoreNames);if(0<ue.length)try{var ne=re.transaction((K=ue).length===1?K[0]:K,"readonly");if(u.autoSchema)U=re,q=ne,(W=o).verno=U.version/10,q=W._dbSchema=el(0,U,q),W._storeNames=S(U.objectStoreNames,0),Za(W,[W._allTables],a(q),q);else if(tl(o,o._dbSchema,ne),((Y=Ec(el(0,(Y=o).idbdb,ne),Y._dbSchema)).add.length||Y.change.some(function(ie){return ie.add.length||ie.change.length}))&&!_)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),re.close(),g=re.version+1,_=!0,z(A());Ya(o,ne)}catch{}hi.push(o),re.onversionchange=ut(function(ie){u.vcFired=!0,o.on("versionchange").fire(ie)}),re.onclose=ut(function(){o.close({disableAutoOpen:!1})}),I&&(Y=o._deps,ne=L,re=Y.indexedDB,Y=Y.IDBKeyRange,Oc(re)||ne===$a||Nc(re,Y).put({name:ne}).catch(Fe)),z()},F)}).catch(function(z){switch(z==null?void 0:z.name){case"UnknownError":if(0<u.PR1398_maxLoop)return u.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),A();break;case"VersionError":if(0<g)return g=0,A()}return pe.reject(z)})}var D,j=u.dbReadyResolve,B=null,I=!1;return pe.race([f,(typeof navigator>"u"?pe.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(z){function F(){return indexedDB.databases().finally(z)}D=setInterval(F,100),F()}).finally(function(){return clearInterval(D)}):Promise.resolve()).then(A)]).then(function(){return b(),u.onReadyBeingFired=[],pe.resolve(Ic(function(){return o.on.ready.fire(o.vip)})).then(function z(){if(0<u.onReadyBeingFired.length){var F=u.onReadyBeingFired.reduce(Xe,Fe);return u.onReadyBeingFired=[],pe.resolve(Ic(function(){return F(o.vip)})).then(z)}})}).finally(function(){u.openCanceller===f&&(u.onReadyBeingFired=null,u.isBeingOpened=!1)}).catch(function(z){u.dbOpenError=z;try{B&&B.abort()}catch{}return f===u.openCanceller&&o._close(),_t(z)}).finally(function(){u.openComplete=!0,j()}).then(function(){var z;return I&&(z={},o.tables.forEach(function(F){F.schema.indexes.forEach(function(L){L.name&&(z["idb://".concat(o.name,"/").concat(F.name,"/").concat(L.name)]=new zt(-1/0,[[[]]]))}),z["idb://".concat(o.name,"/").concat(F.name,"/")]=z["idb://".concat(o.name,"/").concat(F.name,"/:dels")]=new zt(-1/0,[[[]]])}),zr(_o).fire(z),jc(z,!0)),o})}function Fc(o){function u(_){return o.next(_)}var d=g(u),f=g(function(_){return o.throw(_)});function g(_){return function(D){var A=_(D),D=A.value;return A.done?D:D&&typeof D.then=="function"?D.then(d,f):l(D)?Promise.all(D).then(d,f):d(D)}}return g(u)()}function il(o,u,d){for(var f=l(o)?o.slice():[o],g=0;g<d;++g)f.push(u);return f}var l0={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(o){return r(r({},o),{table:function(u){var d=o.table(u),f=d.schema,g={},_=[];function b(I,z,F){var L=xo(I),V=g[L]=g[L]||[],W=I==null?0:typeof I=="string"?1:I.length,U=0<z,U=r(r({},F),{name:U?"".concat(L,"(virtual-from:").concat(F.name,")"):F.name,lowLevelIndex:F,isVirtual:U,keyTail:z,keyLength:W,extractKey:Cc(I),unique:!U&&F.unique});return V.push(U),U.isPrimaryKey||_.push(U),1<W&&b(W===2?I[0]:I.slice(0,W-1),z+1,F),V.sort(function(q,K){return q.keyTail-K.keyTail}),U}u=b(f.primaryKey.keyPath,0,f.primaryKey),g[":id"]=[u];for(var A=0,D=f.indexes;A<D.length;A++){var j=D[A];b(j.keyPath,0,j)}function B(I){var z,F=I.query.index;return F.isVirtual?r(r({},I),{query:{index:F.lowLevelIndex,range:(z=I.query.range,F=F.keyTail,{type:z.type===1?2:z.type,lower:il(z.lower,z.lowerOpen?o.MAX_KEY:o.MIN_KEY,F),lowerOpen:!0,upper:il(z.upper,z.upperOpen?o.MIN_KEY:o.MAX_KEY,F),upperOpen:!0})}}):I}return r(r({},d),{schema:r(r({},f),{primaryKey:u,indexes:_,getIndexByKeyPath:function(I){return(I=g[xo(I)])&&I[0]}}),count:function(I){return d.count(B(I))},query:function(I){return d.query(B(I))},openCursor:function(I){var z=I.query.index,F=z.keyTail,L=z.isVirtual,V=z.keyLength;return L?d.openCursor(B(I)).then(function(U){return U&&W(U)}):d.openCursor(I);function W(U){return Object.create(U,{continue:{value:function(q){q!=null?U.continue(il(q,I.reverse?o.MAX_KEY:o.MIN_KEY,F)):I.unique?U.continue(U.key.slice(0,V).concat(I.reverse?o.MIN_KEY:o.MAX_KEY,F)):U.continue()}},continuePrimaryKey:{value:function(q,K){U.continuePrimaryKey(il(q,o.MAX_KEY,F),K)}},primaryKey:{get:function(){return U.primaryKey}},key:{get:function(){var q=U.key;return V===1?q[0]:q.slice(0,V)}},value:{get:function(){return U.value}}})}}})}})}};function Lc(o,u,d,f){return d=d||{},f=f||"",a(o).forEach(function(g){var _,b,A;p(u,g)?(_=o[g],b=u[g],typeof _=="object"&&typeof b=="object"&&_&&b?(A=xe(_))!==xe(b)?d[f+g]=u[g]:A==="Object"?Lc(_,b,d,f+g+"."):_!==b&&(d[f+g]=u[g]):_!==b&&(d[f+g]=u[g])):d[f+g]=void 0}),a(u).forEach(function(g){p(o,g)||(d[f+g]=u[g])}),d}function Vc(o,u){return u.type==="delete"?u.keys:u.keys||u.values.map(o.extractKey)}var u0={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(o){return r(r({},o),{table:function(u){var d=o.table(u),f=d.schema.primaryKey;return r(r({},d),{mutate:function(g){var _=ke.trans,b=_.table(u).hook,A=b.deleting,D=b.creating,j=b.updating;switch(g.type){case"add":if(D.fire===Fe)break;return _._promise("readwrite",function(){return B(g)},!0);case"put":if(D.fire===Fe&&j.fire===Fe)break;return _._promise("readwrite",function(){return B(g)},!0);case"delete":if(A.fire===Fe)break;return _._promise("readwrite",function(){return B(g)},!0);case"deleteRange":if(A.fire===Fe)break;return _._promise("readwrite",function(){return function I(z,F,L){return d.query({trans:z,values:!1,query:{index:f,range:F},limit:L}).then(function(V){var W=V.result;return B({type:"delete",keys:W,trans:z}).then(function(U){return 0<U.numFailures?Promise.reject(U.failures[0]):W.length<L?{failures:[],numFailures:0,lastResult:void 0}:I(z,r(r({},F),{lower:W[W.length-1],lowerOpen:!0}),L)})})}(g.trans,g.range,1e4)},!0)}return d.mutate(g);function B(I){var z,F,L,V=ke.trans,W=I.keys||Vc(f,I);if(!W)throw new Error("Keys missing");return(I=I.type==="add"||I.type==="put"?r(r({},I),{keys:W}):r({},I)).type!=="delete"&&(I.values=s([],I.values)),I.keys&&(I.keys=s([],I.keys)),z=d,L=W,((F=I).type==="add"?Promise.resolve([]):z.getMany({trans:F.trans,keys:L,cache:"immutable"})).then(function(U){var q=W.map(function(K,Y){var re,ue,ne,ie=U[Y],he={onerror:null,onsuccess:null};return I.type==="delete"?A.fire.call(he,K,ie,V):I.type==="add"||ie===void 0?(re=D.fire.call(he,K,I.values[Y],V),K==null&&re!=null&&(I.keys[Y]=K=re,f.outbound||M(I.values[Y],f.keyPath,K))):(re=Lc(ie,I.values[Y]),(ue=j.fire.call(he,re,K,ie,V))&&(ne=I.values[Y],Object.keys(ue).forEach(function(ae){p(ne,ae)?ne[ae]=ue[ae]:M(ne,ae,ue[ae])}))),he});return d.mutate(I).then(function(K){for(var Y=K.failures,re=K.results,ue=K.numFailures,K=K.lastResult,ne=0;ne<W.length;++ne){var ie=(re||W)[ne],he=q[ne];ie==null?he.onerror&&he.onerror(Y[ne]):he.onsuccess&&he.onsuccess(I.type==="put"&&U[ne]?I.values[ne]:ie)}return{failures:Y,results:re,numFailures:ue,lastResult:K}}).catch(function(K){return q.forEach(function(Y){return Y.onerror&&Y.onerror(K)}),Promise.reject(K)})})}}})}})}};function vp(o,u,d){try{if(!u||u.keys.length<o.length)return null;for(var f=[],g=0,_=0;g<u.keys.length&&_<o.length;++g)Be(u.keys[g],o[_])===0&&(f.push(d?se(u.values[g]):u.values[g]),++_);return f.length===o.length?f:null}catch{return null}}var c0={stack:"dbcore",level:-1,create:function(o){return{table:function(u){var d=o.table(u);return r(r({},d),{getMany:function(f){if(!f.cache)return d.getMany(f);var g=vp(f.keys,f.trans._cache,f.cache==="clone");return g?pe.resolve(g):d.getMany(f).then(function(_){return f.trans._cache={keys:f.keys,values:f.cache==="clone"?se(_):_},_})},mutate:function(f){return f.type!=="add"&&(f.trans._cache=null),d.mutate(f)}})}}}};function _p(o,u){return o.trans.mode==="readonly"&&!!o.subscr&&!o.trans.explicit&&o.trans.db._options.cache!=="disabled"&&!u.schema.primaryKey.outbound}function wp(o,u){switch(o){case"query":return u.values&&!u.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var h0={stack:"dbcore",level:0,name:"Observability",create:function(o){var u=o.schema.name,d=new zt(o.MIN_KEY,o.MAX_KEY);return r(r({},o),{transaction:function(f,g,_){if(ke.subscr&&g!=="readonly")throw new de.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ke.querier));return o.transaction(f,g,_)},table:function(f){var g=o.table(f),_=g.schema,b=_.primaryKey,I=_.indexes,A=b.extractKey,D=b.outbound,j=b.autoIncrement&&I.filter(function(F){return F.compound&&F.keyPath.includes(b.keyPath)}),B=r(r({},g),{mutate:function(F){function L(ae){return ae="idb://".concat(u,"/").concat(f,"/").concat(ae),K[ae]||(K[ae]=new zt)}var V,W,U,q=F.trans,K=F.mutatedParts||(F.mutatedParts={}),Y=L(""),re=L(":dels"),ue=F.type,he=F.type==="deleteRange"?[F.range]:F.type==="delete"?[F.keys]:F.values.length<50?[Vc(b,F).filter(function(ae){return ae}),F.values]:[],ne=he[0],ie=he[1],he=F.trans._cache;return l(ne)?(Y.addKeys(ne),(he=ue==="delete"||ne.length===ie.length?vp(ne,he):null)||re.addKeys(ne),(he||ie)&&(V=L,W=he,U=ie,_.indexes.forEach(function(ae){var ge=V(ae.name||"");function Pe(je){return je!=null?ae.extractKey(je):null}function De(je){return ae.multiEntry&&l(je)?je.forEach(function(wn){return ge.addKey(wn)}):ge.addKey(je)}(W||U).forEach(function(je,Ut){var Ne=W&&Pe(W[Ut]),Ut=U&&Pe(U[Ut]);Be(Ne,Ut)!==0&&(Ne!=null&&De(Ne),Ut!=null&&De(Ut))})}))):ne?(ie={from:(ie=ne.lower)!==null&&ie!==void 0?ie:o.MIN_KEY,to:(ie=ne.upper)!==null&&ie!==void 0?ie:o.MAX_KEY},re.add(ie),Y.add(ie)):(Y.add(d),re.add(d),_.indexes.forEach(function(ae){return L(ae.name).add(d)})),g.mutate(F).then(function(ae){return!ne||F.type!=="add"&&F.type!=="put"||(Y.addKeys(ae.results),j&&j.forEach(function(ge){for(var Pe=F.values.map(function(Ne){return ge.extractKey(Ne)}),De=ge.keyPath.findIndex(function(Ne){return Ne===b.keyPath}),je=0,wn=ae.results.length;je<wn;++je)Pe[je][De]=ae.results[je];L(ge.name).addKeys(Pe)})),q.mutatedParts=rl(q.mutatedParts||{},K),ae})}}),I=function(L){var V=L.query,L=V.index,V=V.range;return[L,new zt((L=V.lower)!==null&&L!==void 0?L:o.MIN_KEY,(V=V.upper)!==null&&V!==void 0?V:o.MAX_KEY)]},z={get:function(F){return[b,new zt(F.key)]},getMany:function(F){return[b,new zt().addKeys(F.keys)]},count:I,query:I,openCursor:I};return a(z).forEach(function(F){B[F]=function(L){var V=ke.subscr,W=!!V,U=_p(ke,g)&&wp(F,L)?L.obsSet={}:V;if(W){var q=function(ie){return ie="idb://".concat(u,"/").concat(f,"/").concat(ie),U[ie]||(U[ie]=new zt)},K=q(""),Y=q(":dels"),V=z[F](L),W=V[0],V=V[1];if((F==="query"&&W.isPrimaryKey&&!L.values?Y:q(W.name||"")).add(V),!W.isPrimaryKey){if(F!=="count"){var re=F==="query"&&D&&L.values&&g.query(r(r({},L),{values:!1}));return g[F].apply(this,arguments).then(function(ie){if(F==="query"){if(D&&L.values)return re.then(function(Pe){return Pe=Pe.result,K.addKeys(Pe),ie});var he=L.values?ie.result.map(A):ie.result;(L.values?K:Y).addKeys(he)}else if(F==="openCursor"){var ae=ie,ge=L.values;return ae&&Object.create(ae,{key:{get:function(){return Y.addKey(ae.primaryKey),ae.key}},primaryKey:{get:function(){var Pe=ae.primaryKey;return Y.addKey(Pe),Pe}},value:{get:function(){return ge&&K.addKey(ae.primaryKey),ae.value}}})}return ie})}Y.add(d)}}return g[F].apply(this,arguments)}}),B}})}};function xp(o,u,d){if(d.numFailures===0)return u;if(u.type==="deleteRange")return null;var f=u.keys?u.keys.length:"values"in u&&u.values?u.values.length:1;return d.numFailures===f?null:(u=r({},u),l(u.keys)&&(u.keys=u.keys.filter(function(g,_){return!(_ in d.failures)})),"values"in u&&l(u.values)&&(u.values=u.values.filter(function(g,_){return!(_ in d.failures)})),u)}function Bc(o,u){return d=o,((f=u).lower===void 0||(f.lowerOpen?0<Be(d,f.lower):0<=Be(d,f.lower)))&&(o=o,(u=u).upper===void 0||(u.upperOpen?Be(o,u.upper)<0:Be(o,u.upper)<=0));var d,f}function kp(o,u,z,f,g,_){if(!z||z.length===0)return o;var b=u.query.index,A=b.multiEntry,D=u.query.range,j=f.schema.primaryKey.extractKey,B=b.extractKey,I=(b.lowLevelIndex||b).extractKey,z=z.reduce(function(F,L){var V=F,W=[];if(L.type==="add"||L.type==="put")for(var U=new zt,q=L.values.length-1;0<=q;--q){var K,Y=L.values[q],re=j(Y);U.hasKey(re)||(K=B(Y),(A&&l(K)?K.some(function(ae){return Bc(ae,D)}):Bc(K,D))&&(U.addKey(re),W.push(Y)))}switch(L.type){case"add":var ue=new zt().addKeys(u.values?F.map(function(ge){return j(ge)}):F),V=F.concat(u.values?W.filter(function(ge){return ge=j(ge),!ue.hasKey(ge)&&(ue.addKey(ge),!0)}):W.map(function(ge){return j(ge)}).filter(function(ge){return!ue.hasKey(ge)&&(ue.addKey(ge),!0)}));break;case"put":var ne=new zt().addKeys(L.values.map(function(ge){return j(ge)}));V=F.filter(function(ge){return!ne.hasKey(u.values?j(ge):ge)}).concat(u.values?W:W.map(function(ge){return j(ge)}));break;case"delete":var ie=new zt().addKeys(L.keys);V=F.filter(function(ge){return!ie.hasKey(u.values?j(ge):ge)});break;case"deleteRange":var he=L.range;V=F.filter(function(ge){return!Bc(j(ge),he)})}return V},o);return z===o?o:(z.sort(function(F,L){return Be(I(F),I(L))||Be(j(F),j(L))}),u.limit&&u.limit<1/0&&(z.length>u.limit?z.length=u.limit:o.length===u.limit&&z.length<u.limit&&(g.dirty=!0)),_?Object.freeze(z):z)}function Sp(o,u){return Be(o.lower,u.lower)===0&&Be(o.upper,u.upper)===0&&!!o.lowerOpen==!!u.lowerOpen&&!!o.upperOpen==!!u.upperOpen}function d0(o,u){return function(d,f,g,_){if(d===void 0)return f!==void 0?-1:0;if(f===void 0)return 1;if((f=Be(d,f))===0){if(g&&_)return 0;if(g)return 1;if(_)return-1}return f}(o.lower,u.lower,o.lowerOpen,u.lowerOpen)<=0&&0<=function(d,f,g,_){if(d===void 0)return f!==void 0?1:0;if(f===void 0)return-1;if((f=Be(d,f))===0){if(g&&_)return 0;if(g)return-1;if(_)return 1}return f}(o.upper,u.upper,o.upperOpen,u.upperOpen)}function f0(o,u,d,f){o.subscribers.add(d),f.addEventListener("abort",function(){var g,_;o.subscribers.delete(d),o.subscribers.size===0&&(g=o,_=u,setTimeout(function(){g.subscribers.size===0&&Q(_,g)},3e3))})}var p0={stack:"dbcore",level:0,name:"Cache",create:function(o){var u=o.schema.name;return r(r({},o),{transaction:function(d,f,g){var _,b,A=o.transaction(d,f,g);return f==="readwrite"&&(b=(_=new AbortController).signal,g=function(D){return function(){if(_.abort(),f==="readwrite"){for(var j=new Set,B=0,I=d;B<I.length;B++){var z=I[B],F=Cs["idb://".concat(u,"/").concat(z)];if(F){var L=o.table(z),V=F.optimisticOps.filter(function(ge){return ge.trans===A});if(A._explicit&&D&&A.mutatedParts)for(var W=0,U=Object.values(F.queries.query);W<U.length;W++)for(var q=0,K=(ue=U[W]).slice();q<K.length;q++)Mc((ne=K[q]).obsSet,A.mutatedParts)&&(Q(ue,ne),ne.subscribers.forEach(function(ge){return j.add(ge)}));else if(0<V.length){F.optimisticOps=F.optimisticOps.filter(function(ge){return ge.trans!==A});for(var Y=0,re=Object.values(F.queries.query);Y<re.length;Y++)for(var ue,ne,ie,he=0,ae=(ue=re[Y]).slice();he<ae.length;he++)(ne=ae[he]).res!=null&&A.mutatedParts&&(D&&!ne.dirty?(ie=Object.isFrozen(ne.res),ie=kp(ne.res,ne.req,V,L,ne,ie),ne.dirty?(Q(ue,ne),ne.subscribers.forEach(function(ge){return j.add(ge)})):ie!==ne.res&&(ne.res=ie,ne.promise=pe.resolve({result:ie}))):(ne.dirty&&Q(ue,ne),ne.subscribers.forEach(function(ge){return j.add(ge)})))}}}j.forEach(function(ge){return ge()})}}},A.addEventListener("abort",g(!1),{signal:b}),A.addEventListener("error",g(!1),{signal:b}),A.addEventListener("complete",g(!0),{signal:b})),A},table:function(d){var f=o.table(d),g=f.schema.primaryKey;return r(r({},f),{mutate:function(_){var b=ke.trans;if(g.outbound||b.db._options.cache==="disabled"||b.explicit||b.idbtrans.mode!=="readwrite")return f.mutate(_);var A=Cs["idb://".concat(u,"/").concat(d)];return A?(b=f.mutate(_),_.type!=="add"&&_.type!=="put"||!(50<=_.values.length||Vc(g,_).some(function(D){return D==null}))?(A.optimisticOps.push(_),_.mutatedParts&&sl(_.mutatedParts),b.then(function(D){0<D.numFailures&&(Q(A.optimisticOps,_),(D=xp(0,_,D))&&A.optimisticOps.push(D),_.mutatedParts&&sl(_.mutatedParts))}),b.catch(function(){Q(A.optimisticOps,_),_.mutatedParts&&sl(_.mutatedParts)})):b.then(function(D){var j=xp(0,r(r({},_),{values:_.values.map(function(B,I){var z;return D.failures[I]?B:(B=(z=g.keyPath)!==null&&z!==void 0&&z.includes(".")?se(B):r({},B),M(B,g.keyPath,D.results[I]),B)})}),D);A.optimisticOps.push(j),queueMicrotask(function(){return _.mutatedParts&&sl(_.mutatedParts)})}),b):f.mutate(_)},query:function(_){if(!_p(ke,f)||!wp("query",_))return f.query(_);var b=((j=ke.trans)===null||j===void 0?void 0:j.db._options.cache)==="immutable",I=ke,A=I.requery,D=I.signal,j=function(L,V,W,U){var q=Cs["idb://".concat(L,"/").concat(V)];if(!q)return[];if(!(V=q.queries[W]))return[null,!1,q,null];var K=V[(U.query?U.query.index.name:null)||""];if(!K)return[null,!1,q,null];switch(W){case"query":var Y=K.find(function(re){return re.req.limit===U.limit&&re.req.values===U.values&&Sp(re.req.query.range,U.query.range)});return Y?[Y,!0,q,K]:[K.find(function(re){return("limit"in re.req?re.req.limit:1/0)>=U.limit&&(!U.values||re.req.values)&&d0(re.req.query.range,U.query.range)}),!1,q,K];case"count":return Y=K.find(function(re){return Sp(re.req.query.range,U.query.range)}),[Y,!!Y,q,K]}}(u,d,"query",_),B=j[0],I=j[1],z=j[2],F=j[3];return B&&I?B.obsSet=_.obsSet:(I=f.query(_).then(function(L){var V=L.result;if(B&&(B.res=V),b){for(var W=0,U=V.length;W<U;++W)Object.freeze(V[W]);Object.freeze(V)}else L.result=se(V);return L}).catch(function(L){return F&&B&&Q(F,B),Promise.reject(L)}),B={obsSet:_.obsSet,promise:I,subscribers:new Set,type:"query",req:_,dirty:!1},F?F.push(B):(F=[B],(z=z||(Cs["idb://".concat(u,"/").concat(d)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[_.query.index.name||""]=F)),f0(B,F,A,D),B.promise.then(function(L){return{result:kp(L.result,_,z==null?void 0:z.optimisticOps,f,B,b)}})}})}})}};function ol(o,u){return new Proxy(o,{get:function(d,f,g){return f==="db"?u:Reflect.get(d,f,g)}})}var gr=(wt.prototype.version=function(o){if(isNaN(o)||o<.1)throw new de.Type("Given version is not a positive number");if(o=Math.round(10*o)/10,this.idbdb||this._state.isBeingOpened)throw new de.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,o);var u=this._versions,d=u.filter(function(f){return f._cfg.version===o})[0];return d||(d=new this.Version(o),u.push(d),u.sort(r0),d.stores({}),this._state.autoSchema=!1,d)},wt.prototype._whenReady=function(o){var u=this;return this.idbdb&&(this._state.openComplete||ke.letThrough||this._vip)?o():new pe(function(d,f){if(u._state.openComplete)return f(new de.DatabaseClosed(u._state.dbOpenError));if(!u._state.isBeingOpened){if(!u._state.autoOpen)return void f(new de.DatabaseClosed);u.open().catch(Fe)}u._state.dbReadyPromise.then(d,f)}).then(o)},wt.prototype.use=function(o){var u=o.stack,d=o.create,f=o.level,g=o.name;return g&&this.unuse({stack:u,name:g}),o=this._middlewares[u]||(this._middlewares[u]=[]),o.push({stack:u,create:d,level:f??10,name:g}),o.sort(function(_,b){return _.level-b.level}),this},wt.prototype.unuse=function(o){var u=o.stack,d=o.name,f=o.create;return u&&this._middlewares[u]&&(this._middlewares[u]=this._middlewares[u].filter(function(g){return f?g.create!==f:!!d&&g.name!==d})),this},wt.prototype.open=function(){var o=this;return ks(Fr,function(){return a0(o)})},wt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var o=this._state,u=hi.indexOf(this);if(0<=u&&hi.splice(u,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}o.isBeingOpened||(o.dbReadyPromise=new pe(function(d){o.dbReadyResolve=d}),o.openCanceller=new pe(function(d,f){o.cancelOpen=f}))},wt.prototype.close=function(d){var u=(d===void 0?{disableAutoOpen:!0}:d).disableAutoOpen,d=this._state;u?(d.isBeingOpened&&d.cancelOpen(new de.DatabaseClosed),this._close(),d.autoOpen=!1,d.dbOpenError=new de.DatabaseClosed):(this._close(),d.autoOpen=this._options.autoOpen||d.isBeingOpened,d.openComplete=!1,d.dbOpenError=null)},wt.prototype.delete=function(o){var u=this;o===void 0&&(o={disableAutoOpen:!0});var d=0<arguments.length&&typeof arguments[0]!="object",f=this._state;return new pe(function(g,_){function b(){u.close(o);var A=u._deps.indexedDB.deleteDatabase(u.name);A.onsuccess=ut(function(){var D,j,B;D=u._deps,j=u.name,B=D.indexedDB,D=D.IDBKeyRange,Oc(B)||j===$a||Nc(B,D).delete(j).catch(Fe),g()}),A.onerror=er(_),A.onblocked=u._fireOnBlocked}if(d)throw new de.InvalidArgument("Invalid closeOptions argument to db.delete()");f.isBeingOpened?f.dbReadyPromise.then(b):b()})},wt.prototype.backendDB=function(){return this.idbdb},wt.prototype.isOpen=function(){return this.idbdb!==null},wt.prototype.hasBeenClosed=function(){var o=this._state.dbOpenError;return o&&o.name==="DatabaseClosed"},wt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},wt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(wt.prototype,"tables",{get:function(){var o=this;return a(this._allTables).map(function(u){return o._allTables[u]})},enumerable:!1,configurable:!0}),wt.prototype.transaction=function(){var o=(function(u,d,f){var g=arguments.length;if(g<2)throw new de.InvalidArgument("Too few arguments");for(var _=new Array(g-1);--g;)_[g-1]=arguments[g];return f=_.pop(),[u,$(_),f]}).apply(this,arguments);return this._transaction.apply(this,o)},wt.prototype._transaction=function(o,u,d){var f=this,g=ke.trans;g&&g.db===this&&o.indexOf("!")===-1||(g=null);var _,b,A=o.indexOf("?")!==-1;o=o.replace("!","").replace("?","");try{if(b=u.map(function(j){if(j=j instanceof f.Table?j.name:j,typeof j!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return j}),o=="r"||o===vc)_=vc;else{if(o!="rw"&&o!=_c)throw new de.InvalidArgument("Invalid transaction mode: "+o);_=_c}if(g){if(g.mode===vc&&_===_c){if(!A)throw new de.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");g=null}g&&b.forEach(function(j){if(g&&g.storeNames.indexOf(j)===-1){if(!A)throw new de.SubTransaction("Table "+j+" not included in parent transaction.");g=null}}),A&&g&&!g.active&&(g=null)}}catch(j){return g?g._promise(null,function(B,I){I(j)}):_t(j)}var D=(function j(B,I,z,F,L){return pe.resolve().then(function(){var V=ke.transless||ke,W=B._createTransaction(I,z,B._dbSchema,F);if(W.explicit=!0,V={trans:W,transless:V},F)W.idbtrans=F.idbtrans;else try{W.create(),W.idbtrans._explicit=!0,B._state.PR1398_maxLoop=3}catch(K){return K.name===Ae.InvalidState&&B.isOpen()&&0<--B._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),B.close({disableAutoOpen:!1}),B.open().then(function(){return j(B,I,z,null,L)})):_t(K)}var U,q=me(L);return q&&ci(),V=pe.follow(function(){var K;(U=L.call(W,W))&&(q?(K=Vr.bind(null,null),U.then(K,K)):typeof U.next=="function"&&typeof U.throw=="function"&&(U=Fc(U)))},V),(U&&typeof U.then=="function"?pe.resolve(U).then(function(K){return W.active?K:_t(new de.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):V.then(function(){return U})).then(function(K){return F&&W._resolve(),W._completion.then(function(){return K})}).catch(function(K){return W._reject(K),_t(K)})})}).bind(null,this,_,b,g,d);return g?g._promise(_,D,"lock"):ke.trans?ks(ke.transless,function(){return f._whenReady(D)}):this._whenReady(D)},wt.prototype.table=function(o){if(!p(this._allTables,o))throw new de.InvalidTable("Table ".concat(o," does not exist"));return this._allTables[o]},wt);function wt(o,u){var d=this;this._middlewares={},this.verno=0;var f=wt.dependencies;this._options=u=r({addons:wt.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange,cache:"cloned"},u),this._deps={indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange},f=u.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var g,_,b,A,D,j={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Fe,dbReadyPromise:null,cancelOpen:Fe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:u.autoOpen};j.dbReadyPromise=new pe(function(I){j.dbReadyResolve=I}),j.openCanceller=new pe(function(I,z){j.cancelOpen=z}),this._state=j,this.name=o,this.on=go(this,"populate","blocked","versionchange","close",{ready:[Xe,Fe]}),this.once=function(I,z){var F=function(){for(var L=[],V=0;V<arguments.length;V++)L[V]=arguments[V];d.on(I).unsubscribe(F),z.apply(d,L)};return d.on(I,F)},this.on.ready.subscribe=k(this.on.ready.subscribe,function(I){return function(z,F){wt.vip(function(){var L,V=d._state;V.openComplete?(V.dbOpenError||pe.resolve().then(z),F&&I(z)):V.onReadyBeingFired?(V.onReadyBeingFired.push(z),F&&I(z)):(I(z),L=d,F||I(function W(){L.on.ready.unsubscribe(z),L.on.ready.unsubscribe(W)}))})}}),this.Collection=(g=this,yo(Q_.prototype,function(U,W){this.db=g;var F=Zf,L=null;if(W)try{F=W()}catch(q){L=q}var V=U._ctx,W=V.table,U=W.hook.reading.fire;this._ctx={table:W,index:V.index,isPrimKey:!V.index||W.schema.primKey.keyPath&&V.index===W.schema.primKey.name,range:F,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:L,or:V.or,valueMapper:U!==fr?U:null}})),this.Table=(_=this,yo(sp.prototype,function(I,z,F){this.db=_,this._tx=F,this.name=I,this.schema=z,this.hook=_._allTables[I]?_._allTables[I].hook:go(null,{creating:[Ce,Fe],reading:[fo,fr],updating:[He,Fe],deleting:[it,Fe]})})),this.Transaction=(b=this,yo(J_.prototype,function(I,z,F,L,V){var W=this;I!=="readonly"&&z.forEach(function(U){U=(U=F[U])===null||U===void 0?void 0:U.yProps,U&&(z=z.concat(U.map(function(q){return q.updatesTable})))}),this.db=b,this.mode=I,this.storeNames=z,this.schema=F,this.chromeTransactionDurability=L,this.idbtrans=null,this.on=go(this,"complete","error","abort"),this.parent=V||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new pe(function(U,q){W._resolve=U,W._reject=q}),this._completion.then(function(){W.active=!1,W.on.complete.fire()},function(U){var q=W.active;return W.active=!1,W.on.error.fire(U),W.parent?W.parent._reject(U):q&&W.idbtrans&&W.idbtrans.abort(),_t(U)})})),this.Version=(A=this,yo(o0.prototype,function(I){this.db=A,this._cfg={version:I,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(D=this,yo(up.prototype,function(I,z,F){if(this.db=D,this._ctx={table:I,index:z===":id"?null:z,or:F},this._cmp=this._ascending=Be,this._descending=function(L,V){return Be(V,L)},this._max=function(L,V){return 0<Be(L,V)?L:V},this._min=function(L,V){return Be(L,V)<0?L:V},this._IDBKeyRange=D._deps.IDBKeyRange,!this._IDBKeyRange)throw new de.MissingAPI})),this.on("versionchange",function(I){0<I.newVersion?console.warn("Another connection wants to upgrade database '".concat(d.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(d.name,"'. Closing db now to resume the delete request.")),d.close({disableAutoOpen:!1})}),this.on("blocked",function(I){!I.newVersion||I.newVersion<I.oldVersion?console.warn("Dexie.delete('".concat(d.name,"') was blocked")):console.warn("Upgrade '".concat(d.name,"' blocked by other connection holding version ").concat(I.oldVersion/10))}),this._maxKey=wo(u.IDBKeyRange),this._createTransaction=function(I,z,F,L){return new d.Transaction(I,z,F,d._options.chromeTransactionDurability,L)},this._fireOnBlocked=function(I){d.on("blocked").fire(I),hi.filter(function(z){return z.name===d.name&&z!==d&&!z._state.vcFired}).map(function(z){return z.on("versionchange").fire(I)})},this.use(c0),this.use(p0),this.use(h0),this.use(l0),this.use(u0);var B=new Proxy(this,{get:function(I,z,F){if(z==="_vip")return!0;if(z==="table")return function(V){return ol(d.table(V),B)};var L=Reflect.get(I,z,F);return L instanceof sp?ol(L,B):z==="tables"?L.map(function(V){return ol(V,B)}):z==="_createTransaction"?function(){return ol(L.apply(this,arguments),B)}:L}});this.vip=B,f.forEach(function(I){return I(d)})}var al,Nn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",m0=(Wc.prototype.subscribe=function(o,u,d){return this._subscribe(o&&typeof o!="function"?o:{next:o,error:u,complete:d})},Wc.prototype[Nn]=function(){return this},Wc);function Wc(o){this._subscribe=o}try{al={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{al={indexedDB:null,IDBKeyRange:null}}function Tp(o){var u,d=!1,f=new m0(function(g){var _=me(o),b,A=!1,D={},j={},B={get closed(){return A},unsubscribe:function(){A||(A=!0,b&&b.abort(),I&&zr.storagemutated.unsubscribe(F))}};g.start&&g.start(B);var I=!1,z=function(){return yc(L)},F=function(V){rl(D,V),Mc(j,D)&&z()},L=function(){var V,W,U;!A&&al.indexedDB&&(D={},V={},b&&b.abort(),b=new AbortController,U=function(q){var K=li();try{_&&ci();var Y=Lr(o,q);return Y=_?Y.finally(Vr):Y}finally{K&&ui()}}(W={subscr:V,signal:b.signal,requery:z,querier:o,trans:null}),Promise.resolve(U).then(function(q){d=!0,u=q,A||W.signal.aborted||(D={},function(K){for(var Y in K)if(p(K,Y))return;return 1}(j=V)||I||(zr(_o,F),I=!0),yc(function(){return!A&&g.next&&g.next(q)}))},function(q){d=!1,["DatabaseClosedError","AbortError"].includes(q==null?void 0:q.name)||A||yc(function(){A||g.error&&g.error(q)})}))};return setTimeout(z,0),B});return f.hasValue=function(){return d},f.getValue=function(){return u},f}var bs=gr;function zc(o){var u=Ur;try{Ur=!0,zr.storagemutated.fire(o),jc(o,!0)}finally{Ur=u}}y(bs,r(r({},Ft),{delete:function(o){return new bs(o,{addons:[]}).delete()},exists:function(o){return new bs(o,{addons:[]}).open().then(function(u){return u.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(o){try{return u=bs.dependencies,d=u.indexedDB,u=u.IDBKeyRange,(Oc(d)?Promise.resolve(d.databases()).then(function(f){return f.map(function(g){return g.name}).filter(function(g){return g!==$a})}):Nc(d,u).toCollection().primaryKeys()).then(o)}catch{return _t(new de.MissingAPI)}var u,d},defineClass:function(){return function(o){c(this,o)}},ignoreTransaction:function(o){return ke.trans?ks(ke.transless,o):o()},vip:Ic,async:function(o){return function(){try{var u=Fc(o.apply(this,arguments));return u&&typeof u.then=="function"?u:pe.resolve(u)}catch(d){return _t(d)}}},spawn:function(o,u,d){try{var f=Fc(o.apply(d,u||[]));return f&&typeof f.then=="function"?f:pe.resolve(f)}catch(g){return _t(g)}},currentTransaction:{get:function(){return ke.trans||null}},waitFor:function(o,u){return u=pe.resolve(typeof o=="function"?bs.ignoreTransaction(o):o).timeout(u||6e4),ke.trans?ke.trans.waitFor(u):u},Promise:pe,debug:{get:function(){return et},set:function(o){yn(o)}},derive:C,extend:c,props:y,override:k,Events:go,on:zr,liveQuery:Tp,extendObservabilitySet:rl,getByKeyPath:P,setByKeyPath:M,delByKeyPath:function(o,u){typeof u=="string"?M(o,u,void 0):"length"in u&&[].map.call(u,function(d){M(o,d,void 0)})},shallowClone:O,deepClone:se,getObjectDiff:Lc,cmp:Be,asap:E,minKey:-1/0,addons:[],connections:hi,errnames:Ae,dependencies:al,cache:Cs,semVer:"4.2.1",version:"4.2.1".split(".").map(function(o){return parseInt(o)}).reduce(function(o,u,d){return o+u/Math.pow(10,2*d)})})),bs.maxKey=wo(bs.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(zr(_o,function(o){Ur||(o=new CustomEvent(kc,{detail:o}),Ur=!0,dispatchEvent(o),Ur=!1)}),addEventListener(kc,function(o){o=o.detail,Ur||zc(o)}));var mi,Ur=!1,Cp=function(){};return typeof BroadcastChannel<"u"&&((Cp=function(){(mi=new BroadcastChannel(kc)).onmessage=function(o){return o.data&&zc(o.data)}})(),typeof mi.unref=="function"&&mi.unref(),zr(_o,function(o){Ur||mi.postMessage(o)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(o){if(!gr.disableBfCache&&o.persisted){et&&console.debug("Dexie: handling persisted pagehide"),mi!=null&&mi.close();for(var u=0,d=hi;u<d.length;u++)d[u].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(o){!gr.disableBfCache&&o.persisted&&(et&&console.debug("Dexie: handling persisted pageshow"),Cp(),zc({all:new zt(-1/0,[[]])}))})),pe.rejectionMapper=function(o,u){return!o||o instanceof Ye||o instanceof TypeError||o instanceof SyntaxError||!o.name||!En[o.name]?o:(u=new En[o.name](u||o.message,o),"stack"in o&&w(u,"stack",{get:function(){return this.inner.stack}}),u)},yn(et),r(gr,Object.freeze({__proto__:null,Dexie:gr,liveQuery:Tp,Entity:Jf,cmp:Be,PropModification:mo,replacePrefix:function(o,u){return new mo({replacePrefix:[o,u]})},add:function(o){return new mo({add:o})},remove:function(o){return new mo({remove:o})},default:gr,RangeSet:zt,mergeRanges:So,rangesOverlap:pp}),{default:gr}),gr})})(U_);var OE=U_.exports;const Td=yg(OE),gg=Symbol.for("Dexie"),Vu=globalThis[gg]||(globalThis[gg]=Td);if(Td.semVer!==Vu.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Td.semVer} and ${Vu.semVer}`);const{liveQuery:lA,mergeRanges:uA,rangesOverlap:cA,RangeSet:hA,cmp:dA,Entity:fA,PropModification:pA,replacePrefix:mA,add:gA,remove:yA,DexieYProvider:vA}=Vu;class IE extends Vu{constructor(){super("coachdb"),this.version(1).stores({exercises:"id, createdAt, style, skillFocus, keyTonic",logs:"id, exerciseId, date"}),this.version(2).stores({exercises:"id, createdAt, style, skillFocus, keyTonic",logs:"id, exerciseId, date",stats:"id, level, xp, streak",quests:"id, date, completed"}),this.version(3).stores({exercises:"id, createdAt, style, skillFocus, keyTonic",logs:"id, exerciseId, date",stats:"id, level, xp, streak, shields, bestTempo",quests:"id, date, completed"}),this.version(4).stores({exercises:"id, createdAt, style, skillFocus, keyTonic",logs:"id, exerciseId, date",stats:"id, level, xp, streak, shields, bestTempo",quests:"id, date, completed",achievements:"id, unlockedAt",rewards:"id, createdAt, rarity"}),this.version(5).stores({exercises:"id, createdAt, style, skillFocus, keyTonic",logs:"id, exerciseId, date",stats:"id, level, xp, streak, shields, bestTempo",quests:"id, date, completed",achievements:"id, unlockedAt",rewards:"id, createdAt, rarity",weekly:"id, weekKey, completed",surprises:"id, date, claimed"})}}const Ue=new IE;function PE({header:t,children:e,navItems:n,activeKey:r,onNavChange:s}){return T.jsxs("div",{style:{minHeight:"100vh",background:`radial-gradient(1200px 600px at 10% -10%, #1b2a54, ${we.bgPrimary}) fixed`,color:we.textOnDark,padding:`${be.lg}px ${be.md}px ${be.lg*3}px`},children:[T.jsxs("div",{style:{maxWidth:1200,margin:"0 auto"},children:[t,e]}),T.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,background:we.bgDeep,borderTop:"1px solid #1b2a54",display:"grid",gridTemplateColumns:"repeat(4, 1fr)",padding:`${be.sm}px ${be.md}px ${be.md}px`,gap:be.xs,zIndex:10},children:n.map(i=>T.jsx("button",{onClick:()=>s(i.key),style:{background:r===i.key?"#0f1830":"transparent",color:r===i.key?we.textOnDark:"#A6ACB3",border:`1px solid ${r===i.key?"#24345c":"transparent"}`,borderRadius:12,padding:`${be.xs}px ${be.sm}px`,cursor:"pointer"},children:i.label},i.key))})]})}function ME(){const[t,e]=Re.useState("setup"),[n,r]=Re.useState(cd),[s,i]=Re.useState({...U1,instrument:cd}),[a,l]=Re.useState(null),[c,h]=Re.useState([]),[m,p]=Re.useState([]),[y,x]=Re.useState(fg()),[w,C]=Re.useState([]),[N,v]=Re.useState([]),[S,k]=Re.useState([]),[R,E]=Re.useState(null),[P,M]=Re.useState([]),[O,G]=Re.useState(null),[$,X]=Re.useState(!0),[H,se]=Re.useState(!0),[fe,xe]=Re.useState(!0),[Z,_e]=Re.useState(!0);Re.useEffect(()=>{Ue.exercises.toArray().then(h),Ue.logs.toArray().then(p),Ue.stats.get("stats-1").then(le=>x(le??fg())),Ue.achievements.toArray().then(le=>{if(le.length)v(le);else{const de=mg();Ue.achievements.bulkPut(de).then(()=>v(de))}}),Ue.rewards.toArray().then(k);const ye=Sd();Ue.weekly.where("weekKey").equals(ye).toArray().then(le=>{if(le.length)M(le);else{const de=SE(ye);Ue.weekly.bulkPut(de).then(()=>M(de))}});const Ae=dg();Ue.surprises.get(`surprise-${Ae}`).then(le=>{if(le)G(le);else{const de=CE(Ae);de&&Ue.surprises.put(de).then(()=>G(de))}}),Ue.quests.where("date").equals(Ae).toArray().then(le=>{if(le.length>0)C(le);else{const de=pg(Ae);Ue.quests.bulkPut(de).then(()=>C(de))}})},[]);const Q=ye=>{r(ye),i({...s,instrument:ye})},J=async(ye,Ae)=>{l(ye),i({...s,lastPatternId:Ae}),e("practice");const le=Po(y,"generate_exercise");x(le),await Ue.stats.put(le)},ee=async()=>{if(!a)return;await Ue.exercises.put(a),h(await Ue.exercises.toArray());const ye=Po(y,"save_exercise");x(ye),await Ue.stats.put(ye);const Ae={id:"log-"+Date.now(),exerciseId:a.id,date:new Date().toLocaleDateString(),tempoAchieved:a.tempo,notes:"Felt comfortable, increase tempo next time."};await Ue.logs.put(Ae);const le=await Ue.logs.toArray();p(le)},me=async()=>{if(!a)return;const ye=dg(),Ae={id:"log-"+Date.now(),exerciseId:a.id,date:new Date().toLocaleDateString(),tempoAchieved:a.tempo,notes:"Logged practice session."};await Ue.logs.put(Ae);const le=await Ue.logs.toArray();p(le);const de=Math.max(y.bestTempo,a.tempo),En=y.lastTempoAchieved!==null&&a.tempo>=y.lastTempoAchieved+4;let Ft=_E(Po(y,"log_practice"),ye);Ft={...Ft,bestTempo:de,lastTempoAchieved:a.tempo},x(Ft),await Ue.stats.put(Ft);const Fe=w.length?w:pg(ye),fr=le.filter(qe=>qe.date===Ae.date).length,fo=le.filter(qe=>qe.date===Ae.date).map(qe=>qe.exerciseId),ce=await Ue.exercises.where("id").anyOf(fo).toArray(),Ce=new Set(ce.map(qe=>qe.keyTonic)).size,{next:it,bonusXp:He}=wE(Fe,{logsToday:fr,uniqueKeysToday:Ce,tempoImproved:En});let Se=Ft;He>0&&(Se=Po(Se,"generate_exercise"),Se={...Se,xp:Se.xp+(He-10)},it.every(qe=>qe.completed)&&(Se={...Se,shields:Se.shields+1})),x(Se),await Ue.stats.put(Se),C(it),await Ue.quests.bulkPut(it);const Xe=Sd(),et=le.filter(qe=>qe.date>=Xe),yn=et.map(qe=>qe.exerciseId),vn=await Ue.exercises.where("id").anyOf(yn).toArray(),Rr=new Set(vn.map(qe=>qe.keyTonic)).size,{next:Jn,bonusXp:An}=TE(P,{sessionsThisWeek:et.length,uniqueKeysThisWeek:Rr});if(An>0&&(Se=Po(Se,"generate_exercise"),Se={...Se,xp:Se.xp+(An-10)},x(Se),await Ue.stats.put(Se)),M(Jn),await Ue.weekly.bulkPut(Jn),O&&!O.claimed){const qe={...O,claimed:!0};G(qe),await Ue.surprises.put(qe);const _s={...Se,xp:Se.xp+O.rewardXp};x(_s),await Ue.stats.put(_s)}const pr=new Set(c.map(qe=>qe.keyTonic)).size,{next:ai,unlocked:jr}=xE({achievements:N.length?N:mg(),totalLogs:le.length,streak:Se.streak,uniqueKeys:pr});if(jr.length){const qe=jr.map(kE);k([...S,...qe]),E(qe[qe.length-1]),await Ue.rewards.bulkPut(qe)}v(ai),await Ue.achievements.bulkPut(ai)},Te=()=>{e("generate")},Ye=ye=>{ye==="notes"&&X(Ae=>!Ae),ye==="solfa"&&se(Ae=>!Ae),ye==="numbers"&&xe(Ae=>!Ae)},Je=ye=>{ye==="roman"?_e(Ae=>!Ae):Ye(ye)},Ee=Re.useMemo(()=>[{key:"setup",label:"Setup"},{key:"generate",label:"Generate"},{key:"practice",label:"Practice"},{key:"progress",label:"Progress"}],[]);return T.jsx(PE,{header:T.jsx("div",{style:{marginBottom:24},children:T.jsx("div",{style:Oe.title,children:"Solo Instrument Exercise Coach"})}),navItems:Ee,activeKey:t,onNavChange:ye=>e(ye),children:T.jsxs("div",{className:"stack",children:[t==="setup"&&T.jsx(G1,{instrument:n,onChange:Q,preferredKeys:s.preferredKeys,avoidedKeys:s.avoidedKeys,onPreferredKeysChange:ye=>i({...s,preferredKeys:ye}),onAvoidedKeysChange:ye=>i({...s,avoidedKeys:ye})}),t==="generate"&&T.jsx(fx,{request:s,onRequestChange:i,onGenerate:J}),t==="practice"&&T.jsx(bE,{exercise:a,onSave:ee,onGenerateVariation:Te,onLogPractice:me,showNoteNames:$,showSolfa:H,showNumbers:fe,showRoman:Z,onToggle:Je,stats:y,quests:w,lastReward:R,weekly:P,surprise:O}),t==="progress"&&T.jsx(NE,{exercises:c,logs:m,stats:y,quests:w,achievements:N,rewards:S,weekly:P})]})})}const q_=document.getElementById("root");if(!q_)throw new Error("Root element not found");Ov(q_).render(T.jsx(I0.StrictMode,{children:T.jsx(ME,{})}));
